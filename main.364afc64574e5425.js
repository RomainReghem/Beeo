(self.webpackChunkbeeo=self.webpackChunkbeeo||[]).push([[179],{907:(B,q,P)=>{"use strict";function Q(e){return"function"==typeof e}function f(e){const n=e(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const g=f(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function D(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class M{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(Q(i))try{i()}catch(s){t=s instanceof g?s.errors:[s]}const{_teardowns:o}=this;if(o){this._teardowns=null;for(const s of o)try{V(s)}catch(l){t=null!=t?t:[],l instanceof g?t=[...t,...l.errors]:t.push(l)}}if(t)throw new g(t)}}add(t){var n;if(t&&t!==this)if(this.closed)V(t);else{if(t instanceof M){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&D(n,t)}remove(t){const{_teardowns:n}=this;n&&D(n,t),t instanceof M&&t._removeParent(this)}}M.EMPTY=(()=>{const e=new M;return e.closed=!0,e})();const A=M.EMPTY;function j(e){return e instanceof M||e&&"closed"in e&&Q(e.remove)&&Q(e.add)&&Q(e.unsubscribe)}function V(e){Q(e)?e():e.unsubscribe()}const Z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_e={setTimeout(...e){const{delegate:t}=_e;return((null==t?void 0:t.setTimeout)||setTimeout)(...e)},clearTimeout(e){const{delegate:t}=_e;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function cr(e){_e.setTimeout(()=>{const{onUnhandledError:t}=Z;if(!t)throw e;t(e)})}function dn(){}const Re=dr("C",void 0,void 0);function dr(e,t,n){return{kind:e,value:t,error:n}}let rt=null;function Ni(e){if(Z.useDeprecatedSynchronousErrorHandling){const t=!rt;if(t&&(rt={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:i}=rt;if(rt=null,n)throw i}}else e()}class Oi extends M{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,j(t)&&t.add(this)):this.destination=ot}static create(t,n,i){return new fr(t,n,i)}next(t){this.isStopped?gr(function Rl(e){return dr("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?gr(function Vs(e){return dr("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?gr(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class fr extends Oi{constructor(t,n,i){let o;if(super(),Q(t))o=t;else if(t){let s;({next:o,error:n,complete:i}=t),this&&Z.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe()):s=t,o=null==o?void 0:o.bind(s),n=null==n?void 0:n.bind(s),i=null==i?void 0:i.bind(s)}this.destination={next:o?pr(o):dn,error:pr(null!=n?n:mr),complete:i?pr(i):dn}}}function pr(e,t){return(...n)=>{try{e(...n)}catch(i){Z.useDeprecatedSynchronousErrorHandling?function hr(e){Z.useDeprecatedSynchronousErrorHandling&&rt&&(rt.errorThrown=!0,rt.error=e)}(i):cr(i)}}}function mr(e){throw e}function gr(e,t){const{onStoppedNotification:n}=Z;n&&_e.setTimeout(()=>n(e,t))}const ot={closed:!0,next:dn,error:mr,complete:dn},st="function"==typeof Symbol&&Symbol.observable||"@@observable";function js(e){return e}let Te=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,o){const s=function Us(e){return e&&e instanceof Oi||function ee(e){return e&&Q(e.next)&&Q(e.error)&&Q(e.complete)}(e)&&j(e)}(n)?n:new fr(n,i,o);return Ni(()=>{const{operator:l,source:c}=this;s.add(l?l.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=gi(i))((o,s)=>{let l;l=this.subscribe(c=>{try{n(c)}catch(d){s(d),null==l||l.unsubscribe()}},s,o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[st](){return this}pipe(...n){return function zs(e){return 0===e.length?js:1===e.length?e[0]:function(n){return e.reduce((i,o)=>o(i),n)}}(n)(this)}toPromise(n){return new(n=gi(n))((i,o)=>{let s;this.subscribe(l=>s=l,l=>o(l),()=>i(s))})}}return e.create=t=>new e(t),e})();function gi(e){var t;return null!==(t=null!=e?e:Z.Promise)&&void 0!==t?t:Promise}const ge=f(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Se=(()=>{class e extends Te{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new St(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new ge}next(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const o of i)o.next(n)}})}error(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:o,observers:s}=this;return i||o?A:(s.push(n),new M(()=>D(s,n)))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:o,isStopped:s}=this;i?n.error(o):s&&n.complete()}asObservable(){const n=new Te;return n.source=this,n}}return e.create=(t,n)=>new St(t,n),e})();class St extends Se{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)}error(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:A}}function Ae(e){return t=>{if(function ht(e){return Q(null==e?void 0:e.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class ye extends Oi{constructor(t,n,i,o,s){super(t),this.onFinalize=s,this._next=n?function(l){try{n(l)}catch(c){t.error(c)}}:super._next,this._error=o?function(l){try{o(l)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function xe(e,t){return Ae((n,i)=>{let o=0;n.subscribe(new ye(i,s=>{i.next(e.call(t,s,o++))}))})}function jt(e){return this instanceof jt?(this.v=e,this):new jt(e)}function Hl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=n.apply(e,t||[]),s=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(w){i[w]&&(o[w]=function(E){return new Promise(function(C,S){s.push([w,E,C,S])>1||c(w,E)})})}function c(w,E){try{!function d(w){w.value instanceof jt?Promise.resolve(w.value.v).then(p,_):v(s[0][2],w)}(i[w](E))}catch(C){v(s[0][3],C)}}function p(w){c("next",w)}function _(w){c("throw",w)}function v(w,E){w(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Po(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Ri(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(l){return new Promise(function(c,d){!function o(s,l,c,d){Promise.resolve(d).then(function(p){s({value:p,done:c})},l)}(c,d,(l=e[s](l)).done,l.value)})}}}const vr=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Dr(e){return Q(null==e?void 0:e.then)}function ko(e){return Q(e[st])}function Et(e){return Symbol.asyncIterator&&Q(null==e?void 0:e[Symbol.asyncIterator])}function Kn(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ks=function Zl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function hn(e){return Q(null==e?void 0:e[Ks])}function zt(e){return Hl(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:i,done:o}=yield jt(n.read());if(o)return yield jt(void 0);yield yield jt(i)}}finally{n.releaseLock()}})}function Ut(e){return Q(null==e?void 0:e.getReader)}function Jn(e){if(e instanceof Te)return e;if(null!=e){if(ko(e))return function Gl(e){return new Te(t=>{const n=e[st]();if(Q(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(vr(e))return function In(e){return new Te(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Dr(e))return function yi(e){return new Te(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,cr)})}(e);if(Et(e))return Fi(e);if(hn(e))return function Js(e){return new Te(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Ut(e))return function wr(e){return Fi(zt(e))}(e)}throw Kn(e)}function Fi(e){return new Te(t=>{(function Qt(e,t){var n,i,o,s;return function Fl(e,t,n,i){return new(n||(n=Promise))(function(s,l){function c(_){try{p(i.next(_))}catch(v){l(v)}}function d(_){try{p(i.throw(_))}catch(v){l(v)}}function p(_){_.done?s(_.value):function o(s){return s instanceof n?s:new n(function(l){l(s)})}(_.value).then(c,d)}p((i=i.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Po(e);!(i=yield n.next()).done;)if(t.next(i.value),t.closed)return}catch(l){o={error:l}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(o)throw o.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Sn(e,t,n,i=0,o=!1){const s=t.schedule(function(){n(),o?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(s),!o)return s}function vi(e,t,n=1/0){return Q(t)?vi((i,o)=>xe((s,l)=>t(i,s,o,l))(Jn(e(i,o))),n):("number"==typeof t&&(n=t),Ae((i,o)=>function Ao(e,t,n,i,o,s,l,c){const d=[];let p=0,_=0,v=!1;const w=()=>{v&&!d.length&&!p&&t.complete()},E=S=>p<i?C(S):d.push(S),C=S=>{s&&t.next(S),p++;let R=!1;Jn(n(S,_++)).subscribe(new ye(t,O=>{null==o||o(O),s?E(O):t.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(p--;d.length&&p<i;){const O=d.shift();l?Sn(t,l,()=>C(O)):C(O)}w()}catch(O){t.error(O)}}))};return e.subscribe(new ye(t,E,()=>{v=!0,w()})),()=>{null==c||c()}}(i,o,e,n)))}const Bi=new Te(e=>e.complete());function Oo(e){return e[e.length-1]}function Xs(e){return function $l(e){return e&&Q(e.schedule)}(Oo(e))?e.pop():void 0}function Ro(e,t=0){return Ae((n,i)=>{n.subscribe(new ye(i,o=>Sn(i,e,()=>i.next(o),t),()=>Sn(i,e,()=>i.complete(),t),o=>Sn(i,e,()=>i.error(o),t)))})}function Er(e,t=0){return Ae((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function Qn(e,t){if(!e)throw new Error("Iterable cannot be null");return new Te(n=>{Sn(n,t,()=>{const i=e[Symbol.asyncIterator]();Sn(n,t,()=>{i.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Vi(e,t){return t?function Jl(e,t){if(null!=e){if(ko(e))return function ql(e,t){return Jn(e).pipe(Er(t),Ro(t))}(e,t);if(vr(e))return function br(e,t){return new Te(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}(e,t);if(Dr(e))return function Yl(e,t){return Jn(e).pipe(Er(t),Ro(t))}(e,t);if(Et(e))return Qn(e,t);if(hn(e))return function Cr(e,t){return new Te(n=>{let i;return Sn(n,t,()=>{i=e[Ks](),Sn(n,t,()=>{let o,s;try{({value:o,done:s}=i.next())}catch(l){return void n.error(l)}s?n.complete():n.next(o)},0,!0)}),()=>Q(null==i?void 0:i.return)&&i.return()})}(e,t);if(Ut(e))return function Kl(e,t){return Qn(zt(e),t)}(e,t)}throw Kn(e)}(e,t):Jn(e)}function Xn(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(function ea(e){return e<=0?()=>Bi:Ae((t,n)=>{let i=0;t.subscribe(new ye(n,o=>{++i<=e&&(n.next(o),e<=i&&n.complete())}))})}(1)).subscribe(()=>e())}function G(e){for(let t in e)if(e[t]===G)return t;throw Error("Could not find renamed property on target object.")}function ve(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ve).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function kn(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Di=G({__forward_ref__:G});function zi(e){return e.__forward_ref__=zi,e.toString=function(){return ve(this())},e}function F(e){return function Fe(e){return"function"==typeof e&&e.hasOwnProperty(Di)&&e.__forward_ref__===zi}(e)?e():e}class pe extends Error{constructor(t,n){super(function ft(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function te(e){return"string"==typeof e?e:null==e?"":String(e)}function We(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():te(e)}function An(e,t){const n=t?` in ${t}`:"";throw new pe(-201,`No provider for ${We(e)} found${n}`)}function Be(e,t){null==e&&function X(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function we(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Xt(e){return{providers:e.providers||[],imports:e.imports||[]}}function ni(e){return bt(e,Zi)||bt(e,Lr)}function bt(e,t){return e.hasOwnProperty(t)?e[t]:null}function da(e){return e&&(e.hasOwnProperty(Gi)||e.hasOwnProperty(Vo))?e[Gi]:null}const Zi=G({\u0275prov:G}),Gi=G({\u0275inj:G}),Lr=G({ngInjectableDef:G}),Vo=G({ngInjectorDef:G});var ne=(()=>((ne=ne||{})[ne.Default=0]="Default",ne[ne.Host=1]="Host",ne[ne.Self=2]="Self",ne[ne.SkipSelf=4]="SkipSelf",ne[ne.Optional=8]="Optional",ne))();let jo;function ae(e){const t=jo;return jo=e,t}function fa(e,t,n){const i=ni(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&ne.Optional?null:void 0!==t?t:void An(ve(e),"Injector")}function kt(e){return{toString:e}.toString()}var At=(()=>((At=At||{})[At.OnPush=0]="OnPush",At[At.Default=1]="Default",At))(),tn=(()=>{return(e=tn||(tn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",tn;var e})();const ma="undefined"!=typeof globalThis&&globalThis,eu="undefined"!=typeof window&&window,zo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ce=ma||"undefined"!=typeof global&&global||eu||zo,ii={},Ce=[],nn=G({\u0275cmp:G}),Mr=G({\u0275dir:G}),Tr=G({\u0275pipe:G}),ga=G({\u0275mod:G}),pn=G({\u0275fac:G}),ri=G({__NG_ELEMENT_ID__:G});let nu=0;function Ei(e){return kt(()=>{const n={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===At.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Ce,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||tn.Emulated,id:"c",styles:e.styles||Ce,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.directives,s=e.features,l=e.pipes;return i.id+=nu++,i.inputs=Uo(e.inputs,n),i.outputs=Uo(e.outputs),s&&s.forEach(c=>c(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map($i):null,i.pipeDefs=l?()=>("function"==typeof l?l():l).map(Nn):null,i})}function $i(e){return at(e)||function rn(e){return e[Mr]||null}(e)}function Nn(e){return function gn(e){return e[Tr]||null}(e)}const ya={};function Gt(e){return kt(()=>{const t={type:e.type,bootstrap:e.bootstrap||Ce,declarations:e.declarations||Ce,imports:e.imports||Ce,exports:e.exports||Ce,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ya[e.id]=e.type),t})}function Uo(e,t){if(null==e)return ii;const n={};for(const i in e)if(e.hasOwnProperty(i)){let o=e[i],s=o;Array.isArray(o)&&(s=o[1],o=o[0]),n[o]=i,t&&(t[o]=s)}return n}function at(e){return e[nn]||null}function Ot(e,t){const n=e[ga]||null;if(!n&&!0===t)throw new Error(`Type ${ve(e)} does not have '\u0275mod' property.`);return n}function dt(e){return Array.isArray(e)&&"object"==typeof e[1]}function _t(e){return Array.isArray(e)&&!0===e[1]}function Yi(e){return 0!=(8&e.flags)}function Sr(e){return 1==(1&e.flags)}function yt(e){return null!==e.template}function iu(e){return 0!=(512&e[2])}function sn(e,t){return e.hasOwnProperty(pn)?e[pn]:null}class er{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Go(e){return e.type.prototype.ngOnChanges&&(e.setInput=Da),cu}function cu(){const e=Wo(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===ii)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Da(e,t,n,i){const o=Wo(e)||function wa(e,t){return e[$o]=t}(e,{previous:ii,current:null}),s=o.current||(o.current={}),l=o.previous,c=this.declaredInputs[n],d=l[c];s[c]=new er(d&&d.currentValue,t,l===ii),e[i]=t}const $o="__ngSimpleChanges__";function Wo(e){return e[$o]||null}let a;function y(e){return!!e.listen}const b={createRenderer:(e,t)=>function h(){return void 0!==a?a:"undefined"!=typeof document?document:void 0}()};function x(e){for(;Array.isArray(e);)e=e[0];return e}function ie(e,t){return x(t[e.index])}function je(e,t){const n=t[e];return dt(n)?n:n[0]}function Rr(e){return 4==(4&e[2])}function qo(e){return 128==(128&e[2])}function Bn(e,t){return null==t?null:e[t]}function Yo(e){e[18]=0}function Ko(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const K={lFrame:Dh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ca(){return K.bindingsEnabled}function N(){return K.lFrame.lView}function De(){return K.lFrame.tView}function et(){let e=ph();for(;null!==e&&64===e.type;)e=e.parent;return e}function ph(){return K.lFrame.currentTNode}function Hn(e,t){const n=K.lFrame;n.currentTNode=e,n.isParent=t}function pu(){return K.lFrame.isParent}function Ma(){return K.isInCheckNoChangesMode}function Ta(e){K.isInCheckNoChangesMode=e}function Iy(e,t){const n=K.lFrame;n.bindingIndex=n.bindingRootIndex=e,gu(t)}function gu(e){K.lFrame.currentDirectiveIndex=e}function _h(){return K.lFrame.currentQueryIndex}function yu(e){K.lFrame.currentQueryIndex=e}function ky(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function yh(e,t,n){if(n&ne.SkipSelf){let o=t,s=e;for(;!(o=o.parent,null!==o||n&ne.Host||(o=ky(s),null===o||(s=s[15],10&o.type))););if(null===o)return!1;t=o,e=s}const i=K.lFrame=vh();return i.currentTNode=t,i.lView=e,!0}function xa(e){const t=vh(),n=e[1];K.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function vh(){const e=K.lFrame,t=null===e?null:e.child;return null===t?Dh(e):t}function Dh(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function wh(){const e=K.lFrame;return K.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Eh=wh;function Pa(){const e=wh();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Tt(){return K.lFrame.selectedIndex}function Mi(e){K.lFrame.selectedIndex=e}function Ia(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:p,ngOnDestroy:_}=s;l&&(e.contentHooks||(e.contentHooks=[])).push(-n,l),c&&((e.contentHooks||(e.contentHooks=[])).push(n,c),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,c)),d&&(e.viewHooks||(e.viewHooks=[])).push(-n,d),p&&((e.viewHooks||(e.viewHooks=[])).push(n,p),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,p)),null!=_&&(e.destroyHooks||(e.destroyHooks=[])).push(n,_)}}function Sa(e,t,n){bh(e,t,3,n)}function ka(e,t,n,i){(3&e[2])===n&&bh(e,t,n,i)}function vu(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function bh(e,t,n,i){const s=null!=i?i:-1,l=t.length-1;let c=0;for(let d=void 0!==i?65535&e[18]:0;d<l;d++)if("number"==typeof t[d+1]){if(c=t[d],null!=i&&c>=i)break}else t[d]<0&&(e[18]+=65536),(c<s||-1==s)&&(jy(e,n,t,d),e[18]=(4294901760&e[18])+d+2),d++}function jy(e,t,n,i){const o=n[i]<0,s=n[i+1],c=e[o?-n[i]:n[i]];if(o){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(c)}finally{}}}else try{s.call(c)}finally{}}class Xo{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Aa(e,t,n){const i=y(e);let o=0;for(;o<n.length;){const s=n[o];if("number"==typeof s){if(0!==s)break;o++;const l=n[o++],c=n[o++],d=n[o++];i?e.setAttribute(t,c,d,l):t.setAttributeNS(l,c,d)}else{const l=s,c=n[++o];wu(l)?i&&e.setProperty(t,l,c):i?e.setAttribute(t,l,c):t.setAttribute(l,c),o++}}return o}function Ch(e){return 3===e||4===e||6===e}function wu(e){return 64===e.charCodeAt(0)}function Na(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const o=t[i];"number"==typeof o?n=o:0===n||Lh(e,n,o,null,-1===n||2===n?t[++i]:null)}}return e}function Lh(e,t,n,i,o){let s=0,l=e.length;if(-1===t)l=-1;else for(;s<e.length;){const c=e[s++];if("number"==typeof c){if(c===t){l=-1;break}if(c>t){l=s-1;break}}}for(;s<e.length;){const c=e[s];if("number"==typeof c)break;if(c===n){if(null===i)return void(null!==o&&(e[s+1]=o));if(i===e[s+1])return void(e[s+2]=o)}s++,null!==i&&s++,null!==o&&s++}-1!==l&&(e.splice(l,0,t),s=l+1),e.splice(s++,0,n),null!==i&&e.splice(s++,0,i),null!==o&&e.splice(s++,0,o)}function Mh(e){return-1!==e}function Hr(e){return 32767&e}function Vr(e,t){let n=function $y(e){return e>>16}(e),i=t;for(;n>0;)i=i[15],n--;return i}let Eu=!0;function Oa(e){const t=Eu;return Eu=e,t}let Wy=0;function ts(e,t){const n=Cu(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,bu(i.data,e),bu(t,null),bu(i.blueprint,null));const o=Ra(e,t),s=e.injectorIndex;if(Mh(o)){const l=Hr(o),c=Vr(o,t),d=c[1].data;for(let p=0;p<8;p++)t[s+p]=c[l+p]|d[l+p]}return t[s+8]=o,s}function bu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Cu(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ra(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,o=t;for(;null!==o;){const s=o[1],l=s.type;if(i=2===l?s.declTNode:1===l?o[6]:null,null===i)return-1;if(n++,o=o[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function Fa(e,t,n){!function qy(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(ri)&&(i=n[ri]),null==i&&(i=n[ri]=Wy++);const o=255&i;t.data[e+(o>>5)]|=1<<o}(e,t,n)}function Ph(e,t,n){if(n&ne.Optional)return e;An(t,"NodeInjector")}function Ih(e,t,n,i){if(n&ne.Optional&&void 0===i&&(i=null),0==(n&(ne.Self|ne.Host))){const o=e[9],s=ae(void 0);try{return o?o.get(t,i,n&ne.Optional):fa(t,i,n&ne.Optional)}finally{ae(s)}}return Ph(i,t,n)}function Sh(e,t,n,i=ne.Default,o){if(null!==e){const s=function Qy(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ri)?e[ri]:void 0;return"number"==typeof t?t>=0?255&t:Ky:t}(n);if("function"==typeof s){if(!yh(t,e,i))return i&ne.Host?Ph(o,n,i):Ih(t,n,i,o);try{const l=s(i);if(null!=l||i&ne.Optional)return l;An(n)}finally{Eh()}}else if("number"==typeof s){let l=null,c=Cu(e,t),d=-1,p=i&ne.Host?t[16][6]:null;for((-1===c||i&ne.SkipSelf)&&(d=-1===c?Ra(e,t):t[c+8],-1!==d&&Nh(i,!1)?(l=t[1],c=Hr(d),t=Vr(d,t)):c=-1);-1!==c;){const _=t[1];if(Ah(s,c,_.data)){const v=Jy(c,t,n,l,i,p);if(v!==kh)return v}d=t[c+8],-1!==d&&Nh(i,t[1].data[c+8]===p)&&Ah(s,c,t)?(l=_,c=Hr(d),t=Vr(d,t)):c=-1}}}return Ih(t,n,i,o)}const kh={};function Ky(){return new jr(et(),N())}function Jy(e,t,n,i,o,s){const l=t[1],c=l.data[e+8],_=Ba(c,l,n,null==i?function Ki(e){return 2==(2&e.flags)}(c)&&Eu:i!=l&&0!=(3&c.type),o&ne.Host&&s===c);return null!==_?ns(t,l,_,c):kh}function Ba(e,t,n,i,o){const s=e.providerIndexes,l=t.data,c=1048575&s,d=e.directiveStart,_=s>>20,w=o?c+_:e.directiveEnd;for(let E=i?c:c+_;E<w;E++){const C=l[E];if(E<d&&n===C||E>=d&&C.type===n)return E}if(o){const E=l[d];if(E&&yt(E)&&E.type===n)return d}return null}function ns(e,t,n,i){let o=e[n];const s=t.data;if(function zy(e){return e instanceof Xo}(o)){const l=o;l.resolving&&function ei(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new pe(-200,`Circular dependency in DI detected for ${e}${n}`)}(We(s[n]));const c=Oa(l.canSeeViewProviders);l.resolving=!0;const d=l.injectImpl?ae(l.injectImpl):null;yh(e,i,ne.Default);try{o=e[n]=l.factory(void 0,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&function Vy(e,t,n){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:s}=t.type.prototype;if(i){const l=Go(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,l),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,l)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,o),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==d&&ae(d),Oa(c),l.resolving=!1,Eh()}}return o}function Ah(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Nh(e,t){return!(e&ne.Self||e&ne.Host&&t)}class jr{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return Sh(this._tNode,this._lView,t,i,n)}}const Ur="__parameters__";function Gr(e,t,n){return kt(()=>{const i=function Tu(e){return function(...n){if(e){const i=e(...n);for(const o in i)this[o]=i[o]}}}(t);function o(...s){if(this instanceof o)return i.apply(this,s),this;const l=new o(...s);return c.annotation=l,c;function c(d,p,_){const v=d.hasOwnProperty(Ur)?d[Ur]:Object.defineProperty(d,Ur,{value:[]})[Ur];for(;v.length<=_;)v.push(null);return(v[_]=v[_]||[]).push(l),d}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}class be{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=we({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function an(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),an(i,t)):t!==e&&t.push(i)}return t}function Vn(e,t){e.forEach(n=>Array.isArray(n)?Vn(n,t):t(n))}function Rh(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ha(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const ss={},Su="__NG_DI_FLAG__",ja="ngTempTokenPath",cv=/\n/gm,jh="__source",hv=G({provide:String,useValue:G});let as;function zh(e){const t=as;return as=e,t}function fv(e,t=ne.Default){if(void 0===as)throw new pe(203,"");return null===as?fa(e,void 0,t):as.get(e,t&ne.Optional?null:void 0,t)}function me(e,t=ne.Default){return(function ha(){return jo}()||fv)(F(e),t)}function ku(e){const t=[];for(let n=0;n<e.length;n++){const i=F(e[n]);if(Array.isArray(i)){if(0===i.length)throw new pe(900,"");let o,s=ne.Default;for(let l=0;l<i.length;l++){const c=i[l],d=pv(c);"number"==typeof d?-1===d?o=c.token:s|=d:o=c}t.push(me(o,s))}else t.push(me(i))}return t}function ls(e,t){return e[Su]=t,e.prototype[Su]=t,e}function pv(e){return e[Su]}const za=ls(Gr("Inject",e=>({token:e})),-1),Wr=ls(Gr("Optional"),8),us=ls(Gr("SkipSelf"),4),uf="__ngContext__";function vt(e,t){e[uf]=t}function ju(e){const t=function ps(e){return e[uf]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Uu(e){return e.ngOriginalError}function sD(e,...t){e.error(...t)}class Kr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),i=function oD(e){return e&&e.ngErrorLogger||sD}(t);i(this._console,"ERROR",t),n&&i(this._console,"ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Uu(t);for(;n&&Uu(n);)n=Uu(n);return n||null}}const pf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ce))();function zn(e){return e instanceof Function?e():e}var qt=(()=>((qt=qt||{})[qt.Important=1]="Important",qt[qt.DashCase=2]="DashCase",qt))();function Gu(e,t){return undefined(e,t)}function ms(e){const t=e[3];return _t(t)?t[3]:t}function $u(e){return vf(e[13])}function Wu(e){return vf(e[4])}function vf(e){for(;null!==e&&!_t(e);)e=e[4];return e}function Qr(e,t,n,i,o){if(null!=i){let s,l=!1;_t(i)?s=i:dt(i)&&(l=!0,i=i[0]);const c=x(i);0===e&&null!==n?null==o?Lf(t,n,c):nr(t,n,c,o||null,!0):1===e&&null!==n?nr(t,n,c,o||null,!0):2===e?function kf(e,t,n){const i=qa(e,t);i&&function PD(e,t,n,i){y(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,c,l):3===e&&t.destroyNode(c),null!=s&&function kD(e,t,n,i,o){const s=n[7];s!==x(n)&&Qr(t,e,i,s,o);for(let c=10;c<n.length;c++){const d=n[c];gs(d[1],d,e,t,i,s)}}(t,e,s,n,o)}}function Yu(e,t,n){return y(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function wf(e,t){const n=e[9],i=n.indexOf(t),o=t[3];1024&t[2]&&(t[2]&=-1025,Ko(o,-1)),n.splice(i,1)}function Ku(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const o=i[17];null!==o&&o!==e&&wf(o,i),t>0&&(e[n-1][4]=i[4]);const s=Ha(e,10+t);!function wD(e,t){gs(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const l=s[19];null!==l&&l.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function Ef(e,t){if(!(256&t[2])){const n=t[11];y(n)&&n.destroyNode&&gs(e,t,n,3,null,null),function CD(e){let t=e[13];if(!t)return Ju(e[1],e);for(;t;){let n=null;if(dt(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)dt(t)&&Ju(t[1],t),t=t[3];null===t&&(t=e),dt(t)&&Ju(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ju(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function xD(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const o=t[n[i]];if(!(o instanceof Xo)){const s=n[i+1];if(Array.isArray(s))for(let l=0;l<s.length;l+=2){const c=o[s[l]],d=s[l+1];try{d.call(c)}finally{}}else try{s.call(o)}finally{}}}}(e,t),function TD(e,t){const n=e.cleanup,i=t[7];let o=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const l=n[s+1],c="function"==typeof l?l(t):x(t[l]),d=i[o=n[s+2]],p=n[s+3];"boolean"==typeof p?c.removeEventListener(n[s],d,p):p>=0?i[o=p]():i[o=-p].unsubscribe(),s+=2}else{const l=i[o=n[s+1]];n[s].call(l)}if(null!==i){for(let s=o+1;s<i.length;s++)i[s]();t[7]=null}}(e,t),1===t[1].type&&y(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&_t(t[3])){n!==t[3]&&wf(n,t);const i=t[19];null!==i&&i.detachView(e)}}}function bf(e,t,n){return function Cf(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const o=e.data[i.directiveStart].encapsulation;if(o===tn.None||o===tn.Emulated)return null}return ie(i,n)}(e,t.parent,n)}function nr(e,t,n,i,o){y(e)?e.insertBefore(t,n,i,o):t.insertBefore(n,i,o)}function Lf(e,t,n){y(e)?e.appendChild(t,n):t.appendChild(n)}function Mf(e,t,n,i,o){null!==i?nr(e,t,n,i,o):Lf(e,t,n)}function qa(e,t){return y(e)?e.parentNode(t):t.parentNode}let Pf=function xf(e,t,n){return 40&e.type?ie(e,n):null};function Ya(e,t,n,i){const o=bf(e,i,t),s=t[11],c=function Tf(e,t,n){return Pf(e,t,n)}(i.parent||t[6],i,t);if(null!=o)if(Array.isArray(n))for(let d=0;d<n.length;d++)Mf(s,o,n[d],c,!1);else Mf(s,o,n,c,!1)}function Ka(e,t){if(null!==t){const n=t.type;if(3&n)return ie(t,e);if(4&n)return Xu(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return Ka(e,i);{const o=e[t.index];return _t(o)?Xu(-1,o):x(o)}}if(32&n)return Gu(t,e)()||x(e[t.index]);{const i=Sf(e,t);return null!==i?Array.isArray(i)?i[0]:Ka(ms(e[16]),i):Ka(e,t.next)}}return null}function Sf(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Xu(e,t){const n=10+e+1;if(n<t.length){const i=t[n],o=i[1].firstChild;if(null!==o)return Ka(i,o)}return t[7]}function ec(e,t,n,i,o,s,l){for(;null!=n;){const c=i[n.index],d=n.type;if(l&&0===t&&(c&&vt(x(c),i),n.flags|=4),64!=(64&n.flags))if(8&d)ec(e,t,n.child,i,o,s,!1),Qr(t,e,o,c,s);else if(32&d){const p=Gu(n,i);let _;for(;_=p();)Qr(t,e,o,_,s);Qr(t,e,o,c,s)}else 16&d?Af(e,t,i,n,o,s):Qr(t,e,o,c,s);n=l?n.projectionNext:n.next}}function gs(e,t,n,i,o,s){ec(n,i,e.firstChild,t,o,s,!1)}function Af(e,t,n,i,o,s){const l=n[16],d=l[6].projection[i.projection];if(Array.isArray(d))for(let p=0;p<d.length;p++)Qr(t,e,o,d[p],s);else ec(e,t,d,l[3],o,s,!0)}function Nf(e,t,n){y(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function tc(e,t,n){y(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Of(e,t,n){let i=e.length;for(;;){const o=e.indexOf(t,n);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const s=t.length;if(o+s===i||e.charCodeAt(o+s)<=32)return o}n=o+1}}const Rf="ng-template";function ND(e,t,n){let i=0;for(;i<e.length;){let o=e[i++];if(n&&"class"===o){if(o=e[i],-1!==Of(o.toLowerCase(),t,0))return!0}else if(1===o){for(;i<e.length&&"string"==typeof(o=e[i++]);)if(o.toLowerCase()===t)return!0;return!1}}return!1}function Ff(e){return 4===e.type&&e.value!==Rf}function OD(e,t,n){return t===(4!==e.type||n?e.value:Rf)}function RD(e,t,n){let i=4;const o=e.attrs||[],s=function HD(e){for(let t=0;t<e.length;t++)if(Ch(e[t]))return t;return e.length}(o);let l=!1;for(let c=0;c<t.length;c++){const d=t[c];if("number"!=typeof d){if(!l)if(4&i){if(i=2|1&i,""!==d&&!OD(e,d,n)||""===d&&1===t.length){if(Dn(i))return!1;l=!0}}else{const p=8&i?d:t[++c];if(8&i&&null!==e.attrs){if(!ND(e.attrs,p,n)){if(Dn(i))return!1;l=!0}continue}const v=FD(8&i?"class":d,o,Ff(e),n);if(-1===v){if(Dn(i))return!1;l=!0;continue}if(""!==p){let w;w=v>s?"":o[v+1].toLowerCase();const E=8&i?w:null;if(E&&-1!==Of(E,p,0)||2&i&&p!==w){if(Dn(i))return!1;l=!0}}}}else{if(!l&&!Dn(i)&&!Dn(d))return!1;if(l&&Dn(d))continue;l=!1,i=d|1&i}}return Dn(i)||l}function Dn(e){return 0==(1&e)}function FD(e,t,n,i){if(null===t)return-1;let o=0;if(i||!n){let s=!1;for(;o<t.length;){const l=t[o];if(l===e)return o;if(3===l||6===l)s=!0;else{if(1===l||2===l){let c=t[++o];for(;"string"==typeof c;)c=t[++o];continue}if(4===l)break;if(0===l){o+=4;continue}}o+=s?1:2}return-1}return function VD(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function Bf(e,t,n=!1){for(let i=0;i<t.length;i++)if(RD(e,t[i],n))return!0;return!1}function Hf(e,t){return e?":not("+t.trim()+")":t}function zD(e){let t=e[0],n=1,i=2,o="",s=!1;for(;n<e.length;){let l=e[n];if("string"==typeof l)if(2&i){const c=e[++n];o+="["+l+(c.length>0?'="'+c+'"':"")+"]"}else 8&i?o+="."+l:4&i&&(o+=" "+l);else""!==o&&!Dn(l)&&(t+=Hf(s,o),o=""),i=l,s=s||!Dn(i);n++}return""!==o&&(t+=Hf(s,o)),t}const re={};function jf(e,t,n,i){if(!i)if(3==(3&t[2])){const s=e.preOrderCheckHooks;null!==s&&Sa(t,s,n)}else{const s=e.preOrderHooks;null!==s&&ka(t,s,0,n)}Mi(n)}function Qf(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i],s=n[i+1];if(-1!==s){const l=e.data[s];yu(o),l.contentQueries(2,t[s],s)}}}function _s(e,t,n,i,o,s,l,c,d,p){const _=t.blueprint.slice();return _[0]=o,_[2]=140|i,Yo(_),_[3]=_[15]=e,_[8]=n,_[10]=l||e&&e[10],_[11]=c||e&&e[11],_[12]=d||e&&e[12]||null,_[9]=p||e&&e[9]||null,_[6]=s,_[16]=2==t.type?e[16]:_,_}function Xr(e,t,n,i,o){let s=e.data[t];if(null===s)s=function fc(e,t,n,i,o){const s=ph(),l=pu(),d=e.data[t]=function sw(e,t,n,i,o,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,l?s:s&&s.parent,n,t,i,o);return null===e.firstChild&&(e.firstChild=d),null!==s&&(l?null==s.child&&null!==d.parent&&(s.child=d):null===s.next&&(s.next=d)),d}(e,t,n,i,o),function Py(){return K.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=o;const l=function Qo(){const e=K.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===l?-1:l.injectorIndex}return Hn(s,!0),s}function eo(e,t,n,i){if(0===n)return-1;const o=t.length;for(let s=0;s<n;s++)t.push(i),e.blueprint.push(i),e.data.push(null);return o}function ys(e,t,n){xa(t);try{const i=e.viewQuery;null!==i&&Ec(1,i,n);const o=e.template;null!==o&&Xf(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Qf(e,t),e.staticViewQueries&&Ec(2,e.viewQuery,n);const s=e.components;null!==s&&function iw(e,t){for(let n=0;n<t.length;n++)Cw(e,t[n])}(t,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[2]&=-5,Pa()}}function to(e,t,n,i){const o=t[2];if(256==(256&o))return;xa(t);const s=Ma();try{Yo(t),function mh(e){return K.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Xf(e,t,n,2,i);const l=3==(3&o);if(!s)if(l){const p=e.preOrderCheckHooks;null!==p&&Sa(t,p,null)}else{const p=e.preOrderHooks;null!==p&&ka(t,p,0,null),vu(t,0)}if(function Ew(e){for(let t=$u(e);null!==t;t=Wu(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const o=n[i],s=o[3];0==(1024&o[2])&&Ko(s,1),o[2]|=1024}}}(t),function ww(e){for(let t=$u(e);null!==t;t=Wu(t))for(let n=10;n<t.length;n++){const i=t[n],o=i[1];qo(i)&&to(o,i,o.template,i[8])}}(t),null!==e.contentQueries&&Qf(e,t),!s)if(l){const p=e.contentCheckHooks;null!==p&&Sa(t,p)}else{const p=e.contentHooks;null!==p&&ka(t,p,1),vu(t,1)}!function tw(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Mi(~o);else{const s=o,l=n[++i],c=n[++i];Iy(l,s),c(2,t[s])}}}finally{Mi(-1)}}(e,t);const c=e.components;null!==c&&function nw(e,t){for(let n=0;n<t.length;n++)bw(e,t[n])}(t,c);const d=e.viewQuery;if(null!==d&&Ec(2,d,i),!s)if(l){const p=e.viewCheckHooks;null!==p&&Sa(t,p)}else{const p=e.viewHooks;null!==p&&ka(t,p,2),vu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ko(t[3],-1))}finally{Pa()}}function rw(e,t,n,i){const o=t[10],s=!Ma(),l=Rr(t);try{s&&!l&&o.begin&&o.begin(),l&&ys(e,t,i),to(e,t,n,i)}finally{s&&!l&&o.end&&o.end()}}function Xf(e,t,n,i,o){const s=Tt(),l=2&i;try{Mi(-1),l&&t.length>20&&jf(e,t,20,Ma()),n(i,o)}finally{Mi(s)}}function tp(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=el(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function el(e,t,n,i,o,s,l,c,d,p){const _=20+i,v=_+o,w=function ow(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:re);return n}(_,v),E="function"==typeof p?p():p;return w[1]={type:e,blueprint:w,template:n,queries:null,viewQuery:c,declTNode:t,data:w.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof l?l():l,firstChild:null,schemas:d,consts:E,incompleteFirstPass:!1}}function rp(e,t,n,i){const o=pp(t);null===n?o.push(i):(o.push(n),e.firstCreatePass&&mp(e).push(i,o.length-1))}function op(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const o=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,o):n[i]=[t,o]}return n}function ap(e,t,n,i,o,s){const l=s.hostBindings;if(l){let c=e.hostBindingOpCodes;null===c&&(c=e.hostBindingOpCodes=[]);const d=~t.index;(function hw(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(c)!=d&&c.push(d),c.push(i,o,l)}}function lp(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function up(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function _w(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;yt(t)&&(n[""]=e)}}function cp(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function dp(e,t,n,i,o){e.data[i]=o;const s=o.factory||(o.factory=sn(o.type)),l=new Xo(s,yt(o),null);e.blueprint[i]=l,n[i]=l,ap(e,t,0,i,eo(e,n,o.hostVars,re),o)}function yw(e,t,n){const i=ie(t,e),o=tp(n),s=e[10],l=tl(e,_s(e,o,null,n.onPush?64:16,i,t,s,s.createRenderer(i,n),null,null));e[t.index]=l}function vw(e,t,n,i,o,s){const l=s[t];if(null!==l){const c=i.setInput;for(let d=0;d<l.length;){const p=l[d++],_=l[d++],v=l[d++];null!==c?i.setInput(n,v,p,_):n[_]=v}}}function Dw(e,t){let n=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;e.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,e[o],t[i+1])),i+=2}else i+=2;else i+=4}return n}function bw(e,t){const n=je(t,e);if(qo(n)){const i=n[1];80&n[2]?to(i,n,i.template,n[8]):n[5]>0&&yc(n)}}function yc(e){for(let i=$u(e);null!==i;i=Wu(i))for(let o=10;o<i.length;o++){const s=i[o];if(1024&s[2]){const l=s[1];to(l,s,l.template,s[8])}else s[5]>0&&yc(s)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const o=je(n[i],e);qo(o)&&o[5]>0&&yc(o)}}function Cw(e,t){const n=je(t,e),i=n[1];(function Lw(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),ys(i,n,n[8])}function tl(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function vc(e){for(;e;){e[2]|=64;const t=ms(e);if(iu(e)&&!t)return e;e=t}return null}function wc(e,t,n){const i=t[10];i.begin&&i.begin();try{to(e,t,e.template,n)}catch(o){throw _p(t,o),o}finally{i.end&&i.end()}}function fp(e){!function Dc(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],i=ju(n),o=i[1];rw(o,i,o.template,n)}}(e[8])}function Ec(e,t,n){yu(0),t(e,n)}const Pw=(()=>Promise.resolve(null))();function pp(e){return e[7]||(e[7]=[])}function mp(e){return e.cleanup||(e.cleanup=[])}function _p(e,t){const n=e[9],i=n?n.get(Kr,null):null;i&&i.handleError(t)}function ci(e,t,n){const i=function $(e,t){return x(t[e])}(t,e);!function Df(e,t,n){y(e)?e.setValue(t,n):t.textContent=n}(e[11],i,n)}function nl(e,t,n){let i=n?e.styles:null,o=n?e.classes:null,s=0;if(null!==t)for(let l=0;l<t.length;l++){const c=t[l];"number"==typeof c?s=c:1==s?o=kn(o,c):2==s&&(i=kn(i,c+": "+t[++l]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=o:e.classesWithoutHost=o}const bc=new be("INJECTOR",-1);class vp{get(t,n=ss){if(n===ss){const i=new Error(`NullInjectorError: No provider for ${ve(t)}!`);throw i.name="NullInjectorError",i}return n}}const Cc=new be("Set Injector scope."),vs={},kw={};let Lc;function Dp(){return void 0===Lc&&(Lc=new vp),Lc}function wp(e,t=null,n=null,i){const o=Ep(e,t,n,i);return o._resolveInjectorDefTypes(),o}function Ep(e,t=null,n=null,i){return new Aw(e,n,t||Dp(),i)}class Aw{constructor(t,n,i,o=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&Vn(n,c=>this.processProvider(c,t,n)),Vn([t],c=>this.processInjectorType(c,[],s)),this.records.set(bc,no(void 0,this));const l=this.records.get(Cc);this.scope=null!=l?l.value:null,this.source=o||("object"==typeof t?null:ve(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=ss,i=ne.Default){this.assertNotDestroyed();const o=zh(this),s=ae(void 0);try{if(!(i&ne.SkipSelf)){let c=this.records.get(t);if(void 0===c){const d=function jw(e){return"function"==typeof e||"object"==typeof e&&e instanceof be}(t)&&ni(t);c=d&&this.injectableDefInScope(d)?no(Mc(t),vs):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(i&ne.Self?Dp():this.parent).get(t,n=i&ne.Optional&&n===ss?null:n)}catch(l){if("NullInjectorError"===l.name){if((l[ja]=l[ja]||[]).unshift(ve(t)),o)throw l;return function mv(e,t,n,i){const o=e[ja];throw t[jh]&&o.unshift(t[jh]),e.message=function gv(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let o=ve(t);if(Array.isArray(t))o=t.map(ve).join(" -> ");else if("object"==typeof t){let s=[];for(let l in t)if(t.hasOwnProperty(l)){let c=t[l];s.push(l+":"+("string"==typeof c?JSON.stringify(c):ve(c)))}o=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${o}]: ${e.replace(cv,"\n  ")}`}("\n"+e.message,o,n,i),e.ngTokenPath=o,e[ja]=null,e}(l,t,"R3InjectorError",this.source)}throw l}finally{ae(s),zh(o)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((i,o)=>t.push(ve(o))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,"")}processInjectorType(t,n,i){if(!(t=F(t)))return!1;let o=da(t);const s=null==o&&t.ngModule||void 0,l=void 0===s?t:s,c=-1!==i.indexOf(l);if(void 0!==s&&(o=da(s)),null==o)return!1;if(null!=o.imports&&!c){let _;i.push(l);try{Vn(o.imports,v=>{this.processInjectorType(v,n,i)&&(void 0===_&&(_=[]),_.push(v))})}finally{}if(void 0!==_)for(let v=0;v<_.length;v++){const{ngModule:w,providers:E}=_[v];Vn(E,C=>this.processProvider(C,w,E||Ce))}}this.injectorDefTypes.add(l);const d=sn(l)||(()=>new l);this.records.set(l,no(d,vs));const p=o.providers;if(null!=p&&!c){const _=t;Vn(p,v=>this.processProvider(v,_,p))}return void 0!==s&&void 0!==t.providers}processProvider(t,n,i){let o=io(t=F(t))?t:F(t&&t.provide);const s=function Ow(e,t,n){return Cp(e)?no(void 0,e.useValue):no(function bp(e,t,n){let i;if(io(e)){const o=F(e);return sn(o)||Mc(o)}if(Cp(e))i=()=>F(e.useValue);else if(function Fw(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...ku(e.deps||[]));else if(function Rw(e){return!(!e||!e.useExisting)}(e))i=()=>me(F(e.useExisting));else{const o=F(e&&(e.useClass||e.provide));if(!function Hw(e){return!!e.deps}(e))return sn(o)||Mc(o);i=()=>new o(...ku(e.deps))}return i}(e),vs)}(t);if(io(t)||!0!==t.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=no(void 0,vs,!0),l.factory=()=>ku(l.multi),this.records.set(o,l)),o=t,l.multi.push(t)}this.records.set(o,s)}hydrate(t,n){return n.value===vs&&(n.value=kw,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Vw(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=F(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Mc(e){const t=ni(e),n=null!==t?t.factory:sn(e);if(null!==n)return n;if(e instanceof be)throw new pe(204,"");if(e instanceof Function)return function Nw(e){const t=e.length;if(t>0)throw function os(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}(t,"?"),new pe(204,"");const n=function fn(e){const t=e&&(e[Zi]||e[Lr]);if(t){const n=function ca(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new pe(204,"")}function no(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Cp(e){return null!==e&&"object"==typeof e&&hv in e}function io(e){return"function"==typeof e}let Kt=(()=>{class e{static create(n,i){var o;if(Array.isArray(n))return wp({name:""},i,n,"");{const s=null!==(o=n.name)&&void 0!==o?o:"";return wp({name:s},n.parent,n.providers,s)}}}return e.THROW_IF_NOT_FOUND=ss,e.NULL=new vp,e.\u0275prov=we({token:e,providedIn:"any",factory:()=>me(bc)}),e.__NG_ELEMENT_ID__=-1,e})();function Yw(e,t){Ia(ju(e)[1],et())}let il=null;function ro(){if(!il){const e=ce.Symbol;if(e&&e.iterator)il=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(il=i)}}}return il}function Ds(e){return!!Ic(e)&&(Array.isArray(e)||!(e instanceof Map)&&ro()in e)}function Ic(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function so(e,t,n,i){return function Dt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}(e,function Br(){return K.lFrame.bindingIndex++}(),n)?t+te(n)+i:re}function de(e,t=ne.Default){const n=N();return null===n?me(e,t):Sh(et(),n,F(e),t)}function Oc(e,t,n,i,o){const l=o?"class":"style";!function yp(e,t,n,i,o){for(let s=0;s<n.length;){const l=n[s++],c=n[s++],d=t[l],p=e.data[l];null!==p.setInput?p.setInput(d,o,i,c):d[c]=o}}(e,n,t.inputs[l],l,i)}function Pe(e,t,n,i){const o=N(),s=De(),l=20+e,c=o[11],d=o[l]=Yu(c,t,function Hy(){return K.lFrame.currentNamespace}()),p=s.firstCreatePass?function IE(e,t,n,i,o,s,l){const c=t.consts,p=Xr(t,e,2,o,Bn(c,s));return function gc(e,t,n,i){let o=!1;if(Ca()){const s=function mw(e,t,n){const i=e.directiveRegistry;let o=null;if(i)for(let s=0;s<i.length;s++){const l=i[s];Bf(n,l.selectors,!1)&&(o||(o=[]),Fa(ts(n,t),e,l.type),yt(l)?(up(e,n),o.unshift(l)):o.push(l))}return o}(e,t,n),l=null===i?null:{"":-1};if(null!==s){o=!0,cp(n,e.data.length,s.length);for(let _=0;_<s.length;_++){const v=s[_];v.providersResolver&&v.providersResolver(v)}let c=!1,d=!1,p=eo(e,t,s.length,null);for(let _=0;_<s.length;_++){const v=s[_];n.mergedAttrs=Na(n.mergedAttrs,v.hostAttrs),dp(e,n,t,p,v),_w(p,v,l),null!==v.contentQueries&&(n.flags|=8),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(n.flags|=128);const w=v.type.prototype;!c&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),!d&&(w.ngOnChanges||w.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),d=!0),p++}!function aw(e,t){const i=t.directiveEnd,o=e.data,s=t.attrs,l=[];let c=null,d=null;for(let p=t.directiveStart;p<i;p++){const _=o[p],v=_.inputs,w=null===s||Ff(t)?null:Dw(v,s);l.push(w),c=op(v,p,c),d=op(_.outputs,p,d)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=16),c.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=l,t.inputs=c,t.outputs=d}(e,n)}l&&function gw(e,t,n){if(t){const i=e.localNames=[];for(let o=0;o<t.length;o+=2){const s=n[t[o+1]];if(null==s)throw new pe(-301,`Export of name '${t[o+1]}' not found!`);i.push(t[o],s)}}}(n,i,l)}return n.mergedAttrs=Na(n.mergedAttrs,n.attrs),o}(t,n,p,Bn(c,l)),null!==p.attrs&&nl(p,p.attrs,!1),null!==p.mergedAttrs&&nl(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(l,s,o,0,t,n,i):s.data[l];Hn(p,!0);const _=p.mergedAttrs;null!==_&&Aa(c,d,_);const v=p.classes;null!==v&&tc(c,d,v);const w=p.styles;null!==w&&Nf(c,d,w),64!=(64&p.flags)&&Ya(s,o,d,p),0===function Fr(){return K.lFrame.elementDepthCount}()&&vt(d,o),function hu(){K.lFrame.elementDepthCount++}(),Sr(p)&&(function pc(e,t,n){!Ca()||(function fw(e,t,n,i){const o=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||ts(n,t),vt(i,t);const l=n.initialInputs;for(let c=o;c<s;c++){const d=e.data[c],p=yt(d);p&&yw(t,n,d);const _=ns(t,e,c,n);vt(_,t),null!==l&&vw(0,c-o,_,d,0,l),p&&(je(n.index,t)[8]=_)}}(e,t,n,ie(n,t)),128==(128&n.flags)&&function pw(e,t,n){const i=n.directiveStart,o=n.directiveEnd,l=n.index,c=function Sy(){return K.lFrame.currentDirectiveIndex}();try{Mi(l);for(let d=i;d<o;d++){const p=e.data[d],_=t[d];gu(d),(null!==p.hostBindings||0!==p.hostVars||null!==p.hostAttrs)&&lp(p,_)}}finally{Mi(-1),gu(c)}}(e,t,n))}(s,o,p),function ep(e,t,n){if(Yi(t)){const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const l=e.data[s];l.contentQueries&&l.contentQueries(1,n[s],s)}}}(s,p,o)),null!==i&&function mc(e,t,n=ie){const i=t.localNames;if(null!==i){let o=t.index+1;for(let s=0;s<i.length;s+=2){const l=i[s+1],c=-1===l?n(t,e):e[l];e[o++]=c}}}(o,p)}function Ie(){let e=et();pu()?function mu(){K.lFrame.isParent=!1}():(e=e.parent,Hn(e,!1));const t=e;!function fu(){K.lFrame.elementDepthCount--}();const n=De();n.firstCreatePass&&(Ia(n,e),Yi(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Zy(e){return 0!=(16&e.flags)}(t)&&Oc(n,t,N(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Gy(e){return 0!=(32&e.flags)}(t)&&Oc(n,t,N(),t.stylesWithoutHost,!1)}function Gn(e,t,n,i){Pe(e,t,n,i),Ie()}function Rc(e){return!!e&&"function"==typeof e.then}const NE=function am(e){return!!e&&"function"==typeof e.subscribe};function di(e,t,n,i){const o=N(),s=De(),l=et();return function um(e,t,n,i,o,s,l,c){const d=Sr(i),_=e.firstCreatePass&&mp(e),v=t[8],w=pp(t);let E=!0;if(3&i.type||c){const R=ie(i,t),O=c?c(R):R,I=w.length,W=c?se=>c(x(se[i.index])):i.index;if(y(n)){let se=null;if(!c&&d&&(se=function OE(e,t,n,i){const o=e.cleanup;if(null!=o)for(let s=0;s<o.length-1;s+=2){const l=o[s];if(l===n&&o[s+1]===i){const c=t[7],d=o[s+2];return c.length>d?c[d]:null}"string"==typeof l&&(s+=2)}return null}(e,t,o,i.index)),null!==se)(se.__ngLastListenerFn__||se).__ngNextListenerFn__=s,se.__ngLastListenerFn__=s,E=!1;else{s=Fc(i,t,v,s,!1);const Ee=n.listen(O,o,s);w.push(s,Ee),_&&_.push(o,W,I,I+1)}}else s=Fc(i,t,v,s,!0),O.addEventListener(o,s,l),w.push(s),_&&_.push(o,W,I,l)}else s=Fc(i,t,v,s,!1);const C=i.outputs;let S;if(E&&null!==C&&(S=C[o])){const R=S.length;if(R)for(let O=0;O<R;O+=2){const Jt=t[S[O]][S[O+1]].subscribe(s),ur=w.length;w.push(s,Jt),_&&_.push(o,i.index,ur,-(ur+1))}}}(s,o,o[11],l,e,t,!!n,i),di}function cm(e,t,n,i){try{return!1!==n(i)}catch(o){return _p(e,o),!1}}function Fc(e,t,n,i,o){return function s(l){if(l===Function)return i;const c=2&e.flags?je(e.index,t):t;0==(32&t[2])&&vc(c);let d=cm(t,0,i,l),p=s.__ngNextListenerFn__;for(;p;)d=cm(t,0,p,l)&&d,p=p.__ngNextListenerFn__;return o&&!1===d&&(l.preventDefault(),l.returnValue=!1),d}}function ut(e,t=""){const n=N(),i=De(),o=e+20,s=i.firstCreatePass?Xr(i,o,1,t,null):i.data[o],l=n[o]=function qu(e,t){return y(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Ya(i,n,l,s),Hn(s,!1)}function Vc(e){return jc("",e,""),Vc}function jc(e,t,n){const i=N(),o=so(i,e,t,n);return o!==re&&ci(i,Tt(),o),jc}const rr=void 0;var bb=["en",[["a","p"],["AM","PM"],rr],[["AM","PM"],rr,rr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rr,"{1} 'at' {0}",rr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Eb(e){const n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let _o={};function tg(e){return e in _o||(_o[e]=ce.ng&&ce.ng.common&&ce.ng.common.locales&&ce.ng.common.locales[e]),_o[e]}var U=(()=>((U=U||{})[U.LocaleId=0]="LocaleId",U[U.DayPeriodsFormat=1]="DayPeriodsFormat",U[U.DayPeriodsStandalone=2]="DayPeriodsStandalone",U[U.DaysFormat=3]="DaysFormat",U[U.DaysStandalone=4]="DaysStandalone",U[U.MonthsFormat=5]="MonthsFormat",U[U.MonthsStandalone=6]="MonthsStandalone",U[U.Eras=7]="Eras",U[U.FirstDayOfWeek=8]="FirstDayOfWeek",U[U.WeekendRange=9]="WeekendRange",U[U.DateFormat=10]="DateFormat",U[U.TimeFormat=11]="TimeFormat",U[U.DateTimeFormat=12]="DateTimeFormat",U[U.NumberSymbols=13]="NumberSymbols",U[U.NumberFormats=14]="NumberFormats",U[U.CurrencyCode=15]="CurrencyCode",U[U.CurrencySymbol=16]="CurrencySymbol",U[U.CurrencyName=17]="CurrencyName",U[U.Currencies=18]="Currencies",U[U.Directionality=19]="Directionality",U[U.PluralCase=20]="PluralCase",U[U.ExtraData=21]="ExtraData",U))();const al="en-US";let ng=al;class Tg{}class MC{resolveComponentFactory(t){throw function LC(e){const t=Error(`No component factory found for ${ve(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Ts=(()=>{class e{}return e.NULL=new MC,e})();function TC(){return vo(et(),N())}function vo(e,t){return new Do(ie(e,t))}let Do=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=TC,e})();function xC(e){return e instanceof Do?e.nativeElement:e}class Pg{}let SC=(()=>{class e{}return e.\u0275prov=we({token:e,providedIn:"root",factory:()=>null}),e})();class qc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const kC=new qc("13.1.3"),Yc={};function hl(e,t,n,i,o=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&i.push(x(s)),_t(s))for(let c=10;c<s.length;c++){const d=s[c],p=d[1].firstChild;null!==p&&hl(d[1],d,p,i)}const l=n.type;if(8&l)hl(e,t,n.child,i);else if(32&l){const c=Gu(n,t);let d;for(;d=c();)i.push(d)}else if(16&l){const c=Sf(t,n);if(Array.isArray(c))i.push(...c);else{const d=ms(t[16]);hl(d[1],d,c,i,!0)}}n=o?n.projectionNext:n.next}return i}class xs{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return hl(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(_t(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(Ku(t,i),Ha(n,i))}this._attachedToViewContainer=!1}Ef(this._lView[1],this._lView)}onDestroy(t){rp(this._lView[1],this._lView,null,t)}markForCheck(){vc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Tw(e,t,n){Ta(!0);try{wc(e,t,n)}finally{Ta(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bD(e,t){gs(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pe(902,"");this._appRef=t}}class AC extends xs{constructor(t){super(t),this._view=t}detectChanges(){fp(this._view)}checkNoChanges(){!function xw(e){Ta(!0);try{fp(e)}finally{Ta(!1)}}(this._view)}get context(){return null}}class Sg extends Ts{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=at(t);return new Kc(n,this.ngModule)}}function kg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const OC=new be("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pf});class Kc extends Tg{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function UD(e){return e.map(zD).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return kg(this.componentDef.inputs)}get outputs(){return kg(this.componentDef.outputs)}create(t,n,i,o){const s=(o=o||this.ngModule)?function RC(e,t){return{get:(n,i,o)=>{const s=e.get(n,Yc,o);return s!==Yc||i===Yc?s:t.get(n,i,o)}}}(t,o.injector):t,l=s.get(Pg,b),c=s.get(SC,null),d=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",_=i?function ip(e,t,n){if(y(e))return e.selectRootElement(t,n===tn.ShadowDom);let i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(d,i,this.componentDef.encapsulation):Yu(l.createRenderer(null,this.componentDef),p,function NC(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(p)),v=this.componentDef.onPush?576:528,w=function Op(e,t){return{components:[],scheduler:e||pf,clean:Pw,playerHandler:t||null,flags:0}}(),E=el(0,null,null,1,0,null,null,null,null,null),C=_s(null,E,w,v,null,null,l,d,c,s);let S,R;xa(C);try{const O=function Ap(e,t,n,i,o,s){const l=n[1];n[20]=e;const d=Xr(l,20,2,"#host",null),p=d.mergedAttrs=t.hostAttrs;null!==p&&(nl(d,p,!0),null!==e&&(Aa(o,e,p),null!==d.classes&&tc(o,e,d.classes),null!==d.styles&&Nf(o,e,d.styles)));const _=i.createRenderer(e,t),v=_s(n,tp(t),null,t.onPush?64:16,n[20],d,i,_,s||null,null);return l.firstCreatePass&&(Fa(ts(d,n),l,t.type),up(l,d),cp(d,n.length,1)),tl(n,v),n[20]=v}(_,this.componentDef,C,l,d);if(_)if(i)Aa(d,_,["ng-version",kC.full]);else{const{attrs:I,classes:W}=function ZD(e){const t=[],n=[];let i=1,o=2;for(;i<e.length;){let s=e[i];if("string"==typeof s)2===o?""!==s&&t.push(s,e[++i]):8===o&&n.push(s);else{if(!Dn(o))break;o=s}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);I&&Aa(d,_,I),W&&W.length>0&&tc(d,_,W.join(" "))}if(R=function yn(e,t){return e.data[t]}(E,20),void 0!==n){const I=R.projection=[];for(let W=0;W<this.ngContentSelectors.length;W++){const se=n[W];I.push(null!=se?Array.from(se):null)}}S=function Np(e,t,n,i,o){const s=n[1],l=function dw(e,t,n){const i=et();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),dp(e,i,t,eo(e,t,1,null),n));const o=ns(t,e,i.directiveStart,i);vt(o,t);const s=ie(i,t);return s&&vt(s,t),o}(s,n,t);if(i.components.push(l),e[8]=l,o&&o.forEach(d=>d(l,t)),t.contentQueries){const d=et();t.contentQueries(1,l,d.directiveStart)}const c=et();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Mi(c.index),ap(n[1],c,0,c.directiveStart,c.directiveEnd,t),lp(t,l)),l}(O,this.componentDef,C,w,[Yw]),ys(E,C,null)}finally{Pa()}return new BC(this.componentType,S,vo(R,C),C,R)}}class BC extends class CC{}{constructor(t,n,i,o,s){super(),this.location=i,this._rootLView=o,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new AC(o),this.componentType=t}get injector(){return new jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class wo{}const Eo=new Map;class Og extends wo{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sg(this);const i=Ot(t);this._bootstrapComponents=zn(i.bootstrap),this._r3Injector=Ep(t,n,[{provide:wo,useValue:this},{provide:Ts,useValue:this.componentFactoryResolver}],ve(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Kt.THROW_IF_NOT_FOUND,i=ne.Default){return t===Kt||t===wo||t===bc?this:this._r3Injector.get(t,n,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Jc extends class VC{}{constructor(t){super(),this.moduleType=t,null!==Ot(t)&&function jC(e){const t=new Set;!function n(i){const o=Ot(i,!0),s=o.id;null!==s&&(function Ag(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ve(t)} vs ${ve(t.name)}`)}(s,Eo.get(s),i),Eo.set(s,i));const l=zn(o.imports);for(const c of l)t.has(c)||(t.add(c),n(c))}(e)}(t)}create(t){return new Og(this.moduleType,t)}}function Qc(e){return t=>{setTimeout(e,void 0,t)}}const hi=class s0 extends Se{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){var o,s,l;let c=t,d=n||(()=>null),p=i;if(t&&"object"==typeof t){const v=t;c=null===(o=v.next)||void 0===o?void 0:o.bind(v),d=null===(s=v.error)||void 0===s?void 0:s.bind(v),p=null===(l=v.complete)||void 0===l?void 0:l.bind(v)}this.__isAsync&&(d=Qc(d),c&&(c=Qc(c)),p&&(p=Qc(p)));const _=super.subscribe({next:c,error:d,complete:p});return t instanceof M&&t.add(_),_}};function a0(){return this._results[ro()]()}class Xc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=ro(),i=Xc.prototype;i[n]||(i[n]=a0)}get changes(){return this._changes||(this._changes=new hi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const o=an(t);(this._changesDetected=!function tv(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],s=t[i];if(n&&(o=n(o),s=n(s)),s!==o)return!1}return!0}(i._results,o,n))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let fi=(()=>{class e{}return e.__NG_ELEMENT_ID__=c0,e})();const l0=fi,u0=class extends l0{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t){const n=this._declarationTContainer.tViews,i=_s(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(n)),ys(n,i,t),new xs(i)}};function c0(){return fl(et(),N())}function fl(e,t){return 4&e.type?new u0(t,e,vo(e,t)):null}let qn=(()=>{class e{}return e.__NG_ELEMENT_ID__=d0,e})();function d0(){return Ug(et(),N())}const h0=qn,jg=class extends h0{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return vo(this._hostTNode,this._hostLView)}get injector(){return new jr(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ra(this._hostTNode,this._hostLView);if(Mh(t)){const n=Vr(t,this._hostLView),i=Hr(t);return new jr(n[1].data[i+8],n)}return new jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=zg(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){const o=t.createEmbeddedView(n||{});return this.insert(o,i),o}createComponent(t,n,i,o,s){const l=t&&!function rs(e){return"function"==typeof e}(t);let c;if(l)c=n;else{const v=n||{};c=v.index,i=v.injector,o=v.projectableNodes,s=v.ngModuleRef}const d=l?t:new Kc(at(t)),p=i||this.parentInjector;if(!s&&null==d.ngModule&&p){const v=p.get(wo,null);v&&(s=v)}const _=d.create(p,o,void 0,s);return this.insert(_.hostView,c),_}insert(t,n){const i=t._lView,o=i[1];if(function du(e){return _t(e[3])}(i)){const _=this.indexOf(t);if(-1!==_)this.detach(_);else{const v=i[3],w=new jg(v,v[6],v[3]);w.detach(w.indexOf(t))}}const s=this._adjustIndex(n),l=this._lContainer;!function LD(e,t,n,i){const o=10+i,s=n.length;i>0&&(n[o-1][4]=t),i<s-10?(t[4]=n[o],Rh(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const l=t[17];null!==l&&n!==l&&function MD(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(l,t);const c=t[19];null!==c&&c.insertView(e),t[2]|=128}(o,i,l,s);const c=Xu(s,l),d=i[11],p=qa(d,l[7]);return null!==p&&function ED(e,t,n,i,o,s){i[0]=o,i[6]=t,gs(e,i,n,1,o,s)}(o,l[6],d,i,p,c),t.attachToViewContainerRef(),Rh(ed(l),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=zg(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=Ku(this._lContainer,n);i&&(Ha(ed(this._lContainer),n),Ef(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=Ku(this._lContainer,n);return i&&null!=Ha(ed(this._lContainer),n)?new xs(i):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function zg(e){return e[8]}function ed(e){return e[8]||(e[8]=[])}function Ug(e,t){let n;const i=t[e.index];if(_t(i))n=i;else{let o;if(8&e.type)o=x(i);else{const s=t[11];o=s.createComment("");const l=ie(e,t);nr(s,qa(s,l),o,function ID(e,t){return y(e)?e.nextSibling(t):t.nextSibling}(s,l),!1)}t[e.index]=n=function hp(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}(i,t,o,e),tl(t,n)}return new jg(n,e,t)}class td{constructor(t){this.queryList=t,this.matches=null}clone(){return new td(this.queryList)}setDirty(){this.queryList.setDirty()}}class nd{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,o=[];for(let s=0;s<i;s++){const l=n.getByIndex(s);o.push(this.queries[l.indexInDeclarationView].clone())}return new nd(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==qg(t,n).matches&&this.queries[n].setDirty()}}class Zg{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class id{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const o=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(t,o);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new id(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class rd{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new rd(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const s=i[o];this.matchTNodeWithReadOption(t,n,m0(n,s)),this.matchTNodeWithReadOption(t,n,Ba(n,t,s,!1,!1))}else i===fi?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Ba(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===Do||o===qn||o===fi&&4&n.type)this.addMatch(n.index,-2);else{const s=Ba(n,t,o,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function m0(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function _0(e,t,n,i){return-1===n?function g0(e,t){return 11&e.type?vo(e,t):4&e.type?fl(e,t):null}(t,e):-2===n?function y0(e,t,n){return n===Do?vo(t,e):n===fi?fl(t,e):n===qn?Ug(t,e):void 0}(e,t,i):ns(e,e[1],n,t)}function Gg(e,t,n,i){const o=t[19].queries[i];if(null===o.matches){const s=e.data,l=n.matches,c=[];for(let d=0;d<l.length;d+=2){const p=l[d];c.push(p<0?null:_0(t,s[p],l[d+1],n.metadata.read))}o.matches=c}return o.matches}function od(e,t,n,i){const o=e.queries.getByIndex(n),s=o.matches;if(null!==s){const l=Gg(e,t,o,n);for(let c=0;c<s.length;c+=2){const d=s[c];if(d>0)i.push(l[c/2]);else{const p=s[c+1],_=t[-d];for(let v=10;v<_.length;v++){const w=_[v];w[17]===w[3]&&od(w[1],w,p,i)}if(null!==_[9]){const v=_[9];for(let w=0;w<v.length;w++){const E=v[w];od(E[1],E,p,i)}}}}}return i}function or(e){const t=N(),n=De(),i=_h();yu(i+1);const o=qg(n,i);if(e.dirty&&Rr(t)===(2==(2&o.metadata.flags))){if(null===o.matches)e.reset([]);else{const s=o.crossesNgTemplate?od(n,t,i,[]):Gg(n,t,o,i);e.reset(s,xC),e.notifyOnChanges()}return!0}return!1}function sr(e,t,n){const i=De();i.firstCreatePass&&(function Wg(e,t,n){null===e.queries&&(e.queries=new id),e.queries.track(new rd(t,n))}(i,new Zg(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),function $g(e,t,n){const i=new Xc(4==(4&n));rp(e,t,i,i.destroy),null===t[19]&&(t[19]=new nd),t[19].queries.push(new td(i))}(i,N(),t)}function ar(){return function D0(e,t){return e[19].queries[t].queryList}(N(),_h())}function qg(e,t){return e.queries.getByIndex(t)}function gl(...e){}const dd=new be("Application Initializer");let Co=(()=>{class e{constructor(n){this.appInits=n,this.resolve=gl,this.reject=gl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const s=this.appInits[o]();if(Rc(s))n.push(s);else if(NE(s)){const l=new Promise((c,d)=>{s.subscribe({complete:c,error:d})});n.push(l)}}Promise.all(n).then(()=>{i()}).catch(o=>{this.reject(o)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(me(dd,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const ks=new be("AppId"),V0={provide:ks,useFactory:function H0(){return`${hd()}${hd()}${hd()}`},deps:[]};function hd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const d_=new be("Platform Initializer"),_l=new be("Platform ID"),j0=new be("appBootstrapListener");let z0=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const Si=new be("LocaleId"),h_=new be("DefaultCurrencyCode");class U0{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let f_=(()=>{class e{compileModuleSync(n){return new Jc(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),s=zn(Ot(n).declarations).reduce((l,c)=>{const d=at(c);return d&&l.push(new Kc(d)),l},[]);return new U0(i,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const G0=(()=>Promise.resolve(0))();function fd(e){"undefined"==typeof Zone?G0.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class wt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hi(!1),this.onMicrotaskEmpty=new hi(!1),this.onStable=new hi(!1),this.onError=new hi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&n,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function $0(){let e=ce.requestAnimationFrame,t=ce.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Y0(e){const t=()=>{!function q0(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ce,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,md(e),e.isCheckStableRunning=!0,pd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),md(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,o,s,l,c)=>{try{return p_(e),n.invokeTask(o,s,l,c)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),m_(e)}},onInvoke:(n,i,o,s,l,c,d)=>{try{return p_(e),n.invoke(o,s,l,c,d)}finally{e.shouldCoalesceRunChangeDetection&&t(),m_(e)}},onHasTask:(n,i,o,s)=>{n.hasTask(o,s),i===o&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,md(e),pd(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,o,s)=>(n.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(o)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,o){const s=this._inner,l=s.scheduleEventTask("NgZoneEvent: "+o,t,W0,gl,gl);try{return s.runTask(l,n,i)}finally{s.cancelTask(l)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const W0={};function pd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function md(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function p_(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function m_(e){e._nesting--,pd(e)}class K0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hi,this.onMicrotaskEmpty=new hi,this.onStable=new hi,this.onError=new hi}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,o){return t.apply(n,i)}}let gd=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wt.assertNotInAngularZone(),fd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fd(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(l=>l.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:o})}whenStable(n,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,i,o){return[]}}return e.\u0275fac=function(n){return new(n||e)(me(wt))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),g_=(()=>{class e{constructor(){this._applications=new Map,_d.addToWindow(this)}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return _d.findTestabilityInTree(this,n,i)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();class J0{addToWindow(t){}findTestabilityInTree(t,n,i){return null}}let Ln,_d=new J0;const __=new be("AllowMultipleToken");function y_(e,t,n=[]){const i=`Platform: ${t}`,o=new be(i);return(s=[])=>{let l=v_();if(!l||l.injector.get(__,!1))if(e)e(n.concat(s).concat({provide:o,useValue:!0}));else{const c=n.concat(s).concat({provide:o,useValue:!0},{provide:Cc,useValue:"platform"});!function tL(e){if(Ln&&!Ln.destroyed&&!Ln.injector.get(__,!1))throw new pe(400,"");Ln=e.get(D_);const t=e.get(d_,null);t&&t.forEach(n=>n())}(Kt.create({providers:c,name:i}))}return function nL(e){const t=v_();if(!t)throw new pe(401,"");return t}()}}function v_(){return Ln&&!Ln.destroyed?Ln:null}let D_=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const c=function iL(e,t){let n;return n="noop"===e?new K0:("zone.js"===e?void 0:e)||new wt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),d=[{provide:wt,useValue:c}];return c.run(()=>{const p=Kt.create({providers:d,parent:this.injector,name:n.moduleType.name}),_=n.create(p),v=_.injector.get(Kr,null);if(!v)throw new pe(402,"");return c.runOutsideAngular(()=>{const w=c.onError.subscribe({next:E=>{v.handleError(E)}});_.onDestroy(()=>{yd(this._modules,_),w.unsubscribe()})}),function rL(e,t,n){try{const i=n();return Rc(i)?i.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(v,c,()=>{const w=_.injector.get(Co);return w.runInitializers(),w.donePromise.then(()=>(function xb(e){Be(e,"Expected localeId to be defined"),"string"==typeof e&&(ng=e.toLowerCase().replace(/_/g,"-"))}(_.injector.get(Si,al)||al),this._moduleDoBootstrap(_),_))})})}bootstrapModule(n,i=[]){const o=w_({},i);return function X0(e,t,n){const i=new Jc(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(n){const i=n.injector.get(yl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new pe(403,"");n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,"");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(me(Kt))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();function w_(e,t){return Array.isArray(t)?t.reduce(w_,e):Object.assign(Object.assign({},e),t)}let yl=(()=>{class e{constructor(n,i,o,s,l){this._zone=n,this._injector=i,this._exceptionHandler=o,this._componentFactoryResolver=s,this._initStatus=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new Te(p=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{p.next(this._stable),p.complete()})}),d=new Te(p=>{let _;this._zone.runOutsideAngular(()=>{_=this._zone.onStable.subscribe(()=>{wt.assertNotInAngularZone(),fd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,p.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{wt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{p.next(!1)}))});return()=>{_.unsubscribe(),v.unsubscribe()}});this.isStable=function ji(...e){const t=Xs(e),n=function Wl(e,t){return"number"==typeof Oo(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?Jn(i[0]):function No(e=1/0){return vi(js,e)}(n)(Vi(i,t)):Bi}(c,d.pipe(function ta(e={}){const{connector:t=(()=>new Se),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=e;return s=>{let l=null,c=null,d=null,p=0,_=!1,v=!1;const w=()=>{null==c||c.unsubscribe(),c=null},E=()=>{w(),l=d=null,_=v=!1},C=()=>{const S=l;E(),null==S||S.unsubscribe()};return Ae((S,R)=>{p++,!v&&!_&&w();const O=d=null!=d?d:t();R.add(()=>{p--,0===p&&!v&&!_&&(c=Xn(C,o))}),O.subscribe(R),l||(l=new fr({next:I=>O.next(I),error:I=>{v=!0,w(),c=Xn(E,n,I),O.error(I)},complete:()=>{_=!0,w(),c=Xn(E,i),O.complete()}}),Vi(S).subscribe(l))})(s)}}()))}bootstrap(n,i){if(!this._initStatus.done)throw new pe(405,"");let o;o=n instanceof Tg?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(o.componentType);const s=function eL(e){return e.isBoundToModule}(o)?void 0:this._injector.get(wo),c=o.create(Kt.NULL,[],i||o.selector,s),d=c.location.nativeElement,p=c.injector.get(gd,null),_=p&&c.injector.get(g_);return p&&_&&_.registerApplication(d,p),c.onDestroy(()=>{this.detachView(c.hostView),yd(this.components,c),_&&_.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new pe(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;yd(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(j0,[]).concat(this._bootstrapListeners).forEach(o=>o(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(me(wt),me(Kt),me(Kr),me(Ts),me(Co))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();function yd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let b_=!0;class I_{constructor(){}supports(t){return Ds(t)}create(t){return new mL(t)}}const pL=(e,t)=>t;class mL{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||pL}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,o=0,s=null;for(;n||i;){const l=!i||n&&n.currentIndex<k_(i,o,s)?n:i,c=k_(l,o,s),d=l.currentIndex;if(l===i)o--,i=i._nextRemoved;else if(n=n._next,null==l.previousIndex)o++;else{s||(s=[]);const p=c-o,_=d-o;if(p!=_){for(let w=0;w<p;w++){const E=w<s.length?s[w]:s[w]=0,C=E+w;_<=C&&C<p&&(s[w]=E+1)}s[l.previousIndex]=_-p}}c!==d&&t(l,c,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Ds(t))throw new pe(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,s,l,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)s=t[c],l=this._trackByFn(c,s),null!==n&&Object.is(n.trackById,l)?(i&&(n=this._verifyReinsertion(n,s,l,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,l,c),i=!0),n=n._next}else o=0,function oE(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ro()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,c=>{l=this._trackByFn(o,c),null!==n&&Object.is(n.trackById,l)?(i&&(n=this._verifyReinsertion(n,c,l,o)),Object.is(n.item,c)||this._addIdentityChange(n,c)):(n=this._mismatch(n,c,l,o),i=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,o){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,o)):t=this._addAfter(new gL(n,i),s,o),t}_verifyReinsertion(t,n,i,o){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,s=t._nextRemoved;return null===o?this._removalsHead=s:o._nextRemoved=s,null===s?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const o=null===n?this._itHead:n._next;return t._next=o,t._prev=n,null===o?this._itTail=t:o._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new S_),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new S_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class gL{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _L{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class S_{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new _L,this.map.set(n,i)),i.add(t)}get(t,n){const o=this.map.get(t);return o?o.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function k_(e,t,n){const i=e.previousIndex;if(null===i)return i;let o=0;return n&&i<n.length&&(o=n[i]),i+t+o}class A_{constructor(){}supports(t){return t instanceof Map||Ic(t)}create(){return new yL}}class yL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Ic(t)))throw new pe(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(o,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,n);const s=o._prev,l=o._next;return s&&(s._next=l),l&&(l._prev=s),o._next=null,o._prev=null,o}const i=new vL(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class vL{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function N_(){return new As([new I_])}let As=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const o=i.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||N_()),deps:[[e,new us,new Wr]]}}find(n){const i=this.factories.find(o=>o.supports(n));if(null!=i)return i;throw new pe(901,"")}}return e.\u0275prov=we({token:e,providedIn:"root",factory:N_}),e})();function O_(){return new Lo([new A_])}let Lo=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const o=i.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||O_()),deps:[[e,new us,new Wr]]}}find(n){const i=this.factories.find(s=>s.supports(n));if(i)return i;throw new pe(901,"")}}return e.\u0275prov=we({token:e,providedIn:"root",factory:O_}),e})();const DL=[new A_],EL=new As([new I_]),bL=new Lo(DL),CL=y_(null,"core",[{provide:_l,useValue:"unknown"},{provide:D_,deps:[Kt]},{provide:g_,deps:[]},{provide:z0,deps:[]}]),PL=[{provide:yl,useClass:yl,deps:[wt,Kt,Kr,Ts,Co]},{provide:OC,deps:[wt],useFactory:function IL(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:Co,useClass:Co,deps:[[new Wr,dd]]},{provide:f_,useClass:f_,deps:[]},V0,{provide:As,useFactory:function LL(){return EL},deps:[]},{provide:Lo,useFactory:function ML(){return bL},deps:[]},{provide:Si,useFactory:function TL(e){return e||function xL(){return"undefined"!=typeof $localize&&$localize.locale||al}()},deps:[[new za(Si),new Wr,new us]]},{provide:h_,useValue:"USD"}];let SL=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(me(yl))},e.\u0275mod=Gt({type:e}),e.\u0275inj=Xt({providers:PL}),e})(),Dl=null;function Ns(){return Dl}const Mn=new be("DocumentToken");var Ke=(()=>((Ke=Ke||{})[Ke.Zero=0]="Zero",Ke[Ke.One=1]="One",Ke[Ke.Two=2]="Two",Ke[Ke.Few=3]="Few",Ke[Ke.Many=4]="Many",Ke[Ke.Other=5]="Other",Ke))();const ZL=function eg(e){return function Pt(e){const t=function Cb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=tg(t);if(n)return n;const i=t.split("-")[0];if(n=tg(i),n)return n;if("en"===i)return bb;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[U.PluralCase]};class Il{}let vM=(()=>{class e extends Il{constructor(n){super(),this.locale=n}getPluralCategory(n,i){switch(ZL(i||this.locale)(n)){case Ke.Zero:return"zero";case Ke.One:return"one";case Ke.Two:return"two";case Ke.Few:return"few";case Ke.Many:return"many";default:return"other"}}}return e.\u0275fac=function(n){return new(n||e)(me(Si))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();function $_(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[o,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(o.trim()===t)return decodeURIComponent(s)}return null}let QM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Gt({type:e}),e.\u0275inj=Xt({providers:[{provide:Il,useClass:vM}]}),e})();class X_{}class Od extends class iT extends class NL{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function AL(e){Dl||(Dl=e)}(new Od)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function rT(){return Fs=Fs||document.querySelector("base"),Fs?Fs.getAttribute("href"):null}();return null==n?null:function oT(e){Sl=Sl||document.createElement("a"),Sl.setAttribute("href",e);const t=Sl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $_(document.cookie,t)}}let Sl,Fs=null;const ey=new be("TRANSITION_ID"),aT=[{provide:dd,useFactory:function sT(e,t,n){return()=>{n.get(Co).donePromise.then(()=>{const i=Ns(),o=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<o.length;s++)i.remove(o[s])})}},deps:[ey,Mn,Kt],multi:!0}];class Rd{static init(){!function Q0(e){_d=e}(new Rd)}addToWindow(t){ce.getAngularTestability=(i,o=!0)=>{const s=t.findTestabilityInTree(i,o);if(null==s)throw new Error("Could not find testability for element.");return s},ce.getAllAngularTestabilities=()=>t.getAllTestabilities(),ce.getAllAngularRootElements=()=>t.getAllRootElements(),ce.frameworkStabilizers||(ce.frameworkStabilizers=[]),ce.frameworkStabilizers.push(i=>{const o=ce.getAllAngularTestabilities();let s=o.length,l=!1;const c=function(d){l=l||d,s--,0==s&&i(l)};o.forEach(function(d){d.whenStable(c)})})}findTestabilityInTree(t,n,i){if(null==n)return null;const o=t.getTestability(n);return null!=o?o:i?Ns().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let lT=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const kl=new be("EventManagerPlugins");let Al=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(o=>o.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,o){return this._findPluginFor(i).addEventListener(n,i,o)}addGlobalEventListener(n,i,o){return this._findPluginFor(i).addGlobalEventListener(n,i,o)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const o=this._plugins;for(let s=0;s<o.length;s++){const l=o[s];if(l.supports(n))return this._eventNameToPlugin.set(n,l),l}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(me(kl),me(wt))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();class ty{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const o=Ns().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,i)}}let ny=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),i.add(o))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),Bs=(()=>{class e extends ny{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,o){n.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,o.push(i.appendChild(l))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(iy),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,o)=>{this._addStylesToHost(n,o,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(iy))}}return e.\u0275fac=function(n){return new(n||e)(me(Mn))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();function iy(e){Ns().remove(e)}const Fd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bd=/%COMP%/g;function Nl(e,t,n){for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?Nl(e,o,n):(o=o.replace(Bd,e),n.push(o))}return n}function sy(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Hd=(()=>{class e{constructor(n,i,o){this.eventManager=n,this.sharedStylesHost=i,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Vd(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case tn.Emulated:{let o=this.rendererByCompId.get(i.id);return o||(o=new pT(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,o)),o.applyToHost(n),o}case 1:case tn.ShadowDom:return new mT(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const o=Nl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(me(Al),me(Bs),me(ks))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();class Vd{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Fd[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,i){t&&t.insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,o){if(o){n=o+":"+n;const s=Fd[o];s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const o=Fd[i];o?t.removeAttributeNS(o,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,o){o&(qt.DashCase|qt.Important)?t.style.setProperty(n,i,o&qt.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&qt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,sy(i)):this.eventManager.addEventListener(t,n,sy(i))}}class pT extends Vd{constructor(t,n,i,o){super(t),this.component=i;const s=Nl(o+"-"+i.id,i.styles,[]);n.addStyles(s),this.contentAttr=function dT(e){return"_ngcontent-%COMP%".replace(Bd,e)}(o+"-"+i.id),this.hostAttr=function hT(e){return"_nghost-%COMP%".replace(Bd,e)}(o+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class mT extends Vd{constructor(t,n,i,o){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Nl(o.id,o.styles,[]);for(let l=0;l<s.length;l++){const c=document.createElement("style");c.textContent=s[l],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let gT=(()=>{class e extends ty{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,o){return n.addEventListener(i,o,!1),()=>this.removeEventListener(n,i,o)}removeEventListener(n,i,o){return n.removeEventListener(i,o)}}return e.\u0275fac=function(n){return new(n||e)(me(Mn))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const ly=["alt","control","meta","shift"],yT={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uy={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vT={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let DT=(()=>{class e extends ty{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,o){const s=e.parseEventName(i),l=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ns().onAndCancel(n,s.domEventName,l))}static parseEventName(n){const i=n.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(i.pop());let l="";if(ly.forEach(d=>{const p=i.indexOf(d);p>-1&&(i.splice(p,1),l+=d+".")}),l+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=o,c.fullKey=l,c}static getEventFullKey(n){let i="",o=function wT(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&uy.hasOwnProperty(t)&&(t=uy[t]))}return yT[t]||t}(n);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ly.forEach(s=>{s!=o&&vT[s](n)&&(i+=s+".")}),i+=o,i}static eventCallback(n,i,o){return s=>{e.getEventFullKey(s)===n&&o.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(me(Mn))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const LT=y_(CL,"browser",[{provide:_l,useValue:"browser"},{provide:d_,useValue:function ET(){Od.makeCurrent(),Rd.init()},multi:!0},{provide:Mn,useFactory:function CT(){return function u(e){a=e}(document),document},deps:[]}]),MT=[{provide:Cc,useValue:"root"},{provide:Kr,useFactory:function bT(){return new Kr},deps:[]},{provide:kl,useClass:gT,multi:!0,deps:[Mn,wt,_l]},{provide:kl,useClass:DT,multi:!0,deps:[Mn]},{provide:Hd,useClass:Hd,deps:[Al,Bs,ks]},{provide:Pg,useExisting:Hd},{provide:ny,useExisting:Bs},{provide:Bs,useClass:Bs,deps:[Mn]},{provide:gd,useClass:gd,deps:[wt]},{provide:Al,useClass:Al,deps:[kl,wt]},{provide:X_,useClass:lT,deps:[]}];let TT=(()=>{class e{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:e,providers:[{provide:ks,useValue:n.appId},{provide:ey,useExisting:ks},aT]}}}return e.\u0275fac=function(n){return new(n||e)(me(e,12))},e.\u0275mod=Gt({type:e}),e.\u0275inj=Xt({providers:MT,imports:[QM,SL]}),e})();"undefined"!=typeof window&&window;var hy=P(407);P(690),P(556);class fy{}class py{}class mi{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const o=n.slice(0,i),s=o.toLowerCase(),l=n.slice(i+1).trim();this.maybeSetNormalizedName(o,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let i=t[n];const o=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(o,i),this.maybeSetNormalizedName(n,o))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof mi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new mi;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof mi?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const o=("a"===t.op?this.headers.get(n):void 0)||[];o.push(...i),this.headers.set(n,o);break;case"d":const s=t.value;if(s){let l=this.headers.get(n);if(!l)return;l=l.filter(c=>-1===s.indexOf(c)),0===l.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,l)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class jT{encodeKey(t){return my(t)}encodeValue(t){return my(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const UT=/%(\d[a-f0-9])/gi,ZT={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function my(e){return encodeURIComponent(e).replace(UT,(t,n)=>{var i;return null!==(i=ZT[n])&&void 0!==i?i:t})}function gy(e){return`${e}`}class Ai{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new jT,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function zT(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{const s=o.indexOf("="),[l,c]=-1==s?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,s)),t.decodeValue(o.slice(s+1))],d=n.get(l)||[];d.push(c),n.set(l,d)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n];this.map.set(n,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const o=t[i];Array.isArray(o)?o.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:o,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Ai({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(gy(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const o=i.indexOf(gy(t.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class GT{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function _y(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function yy(e){return"undefined"!=typeof Blob&&e instanceof Blob}function vy(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Hs{constructor(t,n,i,o){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function $T(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,s=o):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new mi),this.context||(this.context=new GT),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=n;else{const c=n.indexOf("?");this.urlWithParams=n+(-1===c?"?":c<n.length-1?"&":"")+l}}else this.params=new Ai,this.urlWithParams=n}serializeBody(){return null===this.body?null:_y(this.body)||yy(this.body)||vy(this.body)||function WT(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ai?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||vy(this.body)?null:yy(this.body)?this.body.type||null:_y(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ai?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var n;const i=t.method||this.method,o=t.url||this.url,s=t.responseType||this.responseType,l=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,_=t.params||this.params;const v=null!==(n=t.context)&&void 0!==n?n:this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce((w,E)=>w.set(E,t.setHeaders[E]),p)),t.setParams&&(_=Object.keys(t.setParams).reduce((w,E)=>w.set(E,t.setParams[E]),_)),new Hs(i,o,l,{params:_,headers:p,context:v,reportProgress:d,responseType:s,withCredentials:c})}}var Qe=(()=>((Qe=Qe||{})[Qe.Sent=0]="Sent",Qe[Qe.UploadProgress=1]="UploadProgress",Qe[Qe.ResponseHeader=2]="ResponseHeader",Qe[Qe.DownloadProgress=3]="DownloadProgress",Qe[Qe.Response=4]="Response",Qe[Qe.User=5]="User",Qe))();class zd{constructor(t,n=200,i="OK"){this.headers=t.headers||new mi,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ud extends zd{constructor(t={}){super(t),this.type=Qe.ResponseHeader}clone(t={}){return new Ud({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ol extends zd{constructor(t={}){super(t),this.type=Qe.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Ol({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Dy extends zd{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Zd(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let wy=(()=>{class e{constructor(n){this.handler=n}request(n,i,o={}){let s;if(n instanceof Hs)s=n;else{let d,p;d=o.headers instanceof mi?o.headers:new mi(o.headers),o.params&&(p=o.params instanceof Ai?o.params:new Ai({fromObject:o.params})),s=new Hs(n,i,void 0!==o.body?o.body:null,{headers:d,context:o.context,params:p,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const l=function BT(...e){return Vi(e,Xs(e))}(s).pipe(function HT(e,t){return Q(t)?vi(e,t,1):vi(e,1)}(d=>this.handler.handle(d)));if(n instanceof Hs||"events"===o.observe)return l;const c=l.pipe(function VT(e,t){return Ae((n,i)=>{let o=0;n.subscribe(new ye(i,s=>e.call(t,s,o++)&&i.next(s)))})}(d=>d instanceof Ol));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(xe(d=>{if(null!==d.body&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return c.pipe(xe(d=>{if(null!==d.body&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return c.pipe(xe(d=>{if(null!==d.body&&"string"!=typeof d.body)throw new Error("Response is not a string.");return d.body}));default:return c.pipe(xe(d=>d.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new Ai).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,o={}){return this.request("PATCH",n,Zd(o,i))}post(n,i,o={}){return this.request("POST",n,Zd(o,i))}put(n,i,o={}){return this.request("PUT",n,Zd(o,i))}}return e.\u0275fac=function(n){return new(n||e)(me(fy))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();class Ey{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const by=new be("HTTP_INTERCEPTORS");let qT=(()=>{class e{intercept(n,i){return i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const YT=/^\)\]\}',?\n/;let Cy=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Te(i=>{const o=this.xhrFactory.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((E,C)=>o.setRequestHeader(E,C.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const E=n.detectContentTypeHeader();null!==E&&o.setRequestHeader("Content-Type",E)}if(n.responseType){const E=n.responseType.toLowerCase();o.responseType="json"!==E?E:"text"}const s=n.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const E=1223===o.status?204:o.status,C=o.statusText||"OK",S=new mi(o.getAllResponseHeaders()),R=function KT(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(o)||n.url;return l=new Ud({headers:S,status:E,statusText:C,url:R}),l},d=()=>{let{headers:E,status:C,statusText:S,url:R}=c(),O=null;204!==C&&(O=void 0===o.response?o.responseText:o.response),0===C&&(C=O?200:0);let I=C>=200&&C<300;if("json"===n.responseType&&"string"==typeof O){const W=O;O=O.replace(YT,"");try{O=""!==O?JSON.parse(O):null}catch(se){O=W,I&&(I=!1,O={error:se,text:O})}}I?(i.next(new Ol({body:O,headers:E,status:C,statusText:S,url:R||void 0})),i.complete()):i.error(new Dy({error:O,headers:E,status:C,statusText:S,url:R||void 0}))},p=E=>{const{url:C}=c(),S=new Dy({error:E,status:o.status||0,statusText:o.statusText||"Unknown Error",url:C||void 0});i.error(S)};let _=!1;const v=E=>{_||(i.next(c()),_=!0);let C={type:Qe.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(C.total=E.total),"text"===n.responseType&&!!o.responseText&&(C.partialText=o.responseText),i.next(C)},w=E=>{let C={type:Qe.UploadProgress,loaded:E.loaded};E.lengthComputable&&(C.total=E.total),i.next(C)};return o.addEventListener("load",d),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),n.reportProgress&&(o.addEventListener("progress",v),null!==s&&o.upload&&o.upload.addEventListener("progress",w)),o.send(s),i.next({type:Qe.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",d),o.removeEventListener("timeout",p),n.reportProgress&&(o.removeEventListener("progress",v),null!==s&&o.upload&&o.upload.removeEventListener("progress",w)),o.readyState!==o.DONE&&o.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(me(X_))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})();const Gd=new be("XSRF_COOKIE_NAME"),$d=new be("XSRF_HEADER_NAME");class Ly{}let JT=(()=>{class e{constructor(n,i,o){this.doc=n,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=$_(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(me(Mn),me(_l),me(Gd))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),Wd=(()=>{class e{constructor(n,i){this.tokenService=n,this.headerName=i}intercept(n,i){const o=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||o.startsWith("http://")||o.startsWith("https://"))return i.handle(n);const s=this.tokenService.getToken();return null!==s&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,s)})),i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(me(Ly),me($d))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),QT=(()=>{class e{constructor(n,i){this.backend=n,this.injector=i,this.chain=null}handle(n){if(null===this.chain){const i=this.injector.get(by,[]);this.chain=i.reduceRight((o,s)=>new Ey(o,s),this.backend)}return this.chain.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(me(py),me(Kt))},e.\u0275prov=we({token:e,factory:e.\u0275fac}),e})(),XT=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:Wd,useClass:qT}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:Gd,useValue:n.cookieName}:[],n.headerName?{provide:$d,useValue:n.headerName}:[]]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Gt({type:e}),e.\u0275inj=Xt({providers:[Wd,{provide:by,useExisting:Wd,multi:!0},{provide:Ly,useClass:JT},{provide:Gd,useValue:"XSRF-TOKEN"},{provide:$d,useValue:"X-XSRF-TOKEN"}]}),e})(),ex=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Gt({type:e}),e.\u0275inj=Xt({providers:[wy,{provide:fy,useClass:QT},Cy,{provide:py,useExisting:Cy}],imports:[[XT.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})(),My=(()=>{class e{constructor(n){this.http=n,this.pollusolIcon=L.icon({iconUrl:"https://tinyimg.io/i/oQxkY10.png",iconSize:[36,36]}),this.farmsIcon=L.icon({iconUrl:"https://tinyimg.io/i/qfHYyxS.png",iconSize:[36,36]}),this.userRange=3e3,this.greenData="../../assets/greenZonesTarnFull.json",this.pollusolData="https://api.jsonbin.io/b/620bc6fcca70c44b6e99153b",this.inst_indusData="https://api.jsonbin.io/b/620e8f741b38ee4b33bfed2b/1",this.farmsData="../../assets/farmsData.json",this.riversData="../../assets/riversDataTarn.json",this.greenZones=L.layerGroup(),this.pollusolLayer=L.deflate({minSize:100,markerOptions:{icon:this.pollusolIcon}}),this.inst_indusLayer=L.layerGroup(),this.editableLayers=new L.FeatureGroup,this.farmsLayer=L.layerGroup(),this.riversLayer=L.layerGroup(),this.userLayer=new L.layerGroup,this.customMarker=L.Icon.extend({options:{shadowUrl:null,iconAnchor:new L.Point(12,12),iconSize:new L.Point(24,24),iconUrl:"https://emassi.fr/wp-content/uploads/2017/10/Map-Marker-PNG-File.png"}})}style(n){return{fillColor:"#25633D",opacity:.8,weight:1,color:"white",fillOpacity:.7}}styleRed(n){return{fillColor:"#d15249",opacity:.8,weight:1,color:"white",fillOpacity:.7}}initmap(n){this.map=n,this.drawPolygons(),n.addLayer(this.editableLayers),n.on("click",i=>{new L.marker(i.latlng,{icon:L.icon({iconUrl:"https://emassi.fr/wp-content/uploads/2017/10/Map-Marker-PNG-File.png",iconSize:[12,12]})}).addTo(this.userLayer),L.circle(i.latlng,{radius:this.userRange}).addTo(this.userLayer).addTo(this.userLayer)}),this.userLayer.addTo(n)}drawPolygons(){this.http.get(this.greenData).subscribe(n=>{for(const i of n.data)i.geometry&&L.geoJSON(i.geometry,{style:this.style}).addTo(this.greenZones).bindPopup("<center><h1>Exploitation biologique</h1><img style='width:100%;'src='https://i.imgur.com/2X88trj.jpeg'/><p>Type de culture :"+i.properties.LBL_CULTU+"</p><p>Surface : "+i.properties.SURFACE_HA+" hectares</p></center>")}),this.http.get(this.pollusolData).subscribe(n=>{for(const i of n.data)L.geoJSON(i,{style:this.styleRed}).addTo(this.pollusolLayer).bindPopup("<center><h1>Zone pollu\xe9e</h1><img style='width:100%;'src='https://tinyimg.io/i/IU9CV0y.png'/></center>")}),this.http.get(this.inst_indusData).subscribe(n=>{for(const i of n.data)L.geoJSON(i.geometry,{pointToLayer:function(s,l){return L.marker(l,{icon:L.icon({iconUrl:"https://i.imgur.com/SxMOwaA.png",iconSize:[36,36]})})}}).addTo(this.inst_indusLayer).bindPopup("<center><h1>Installation industrielle</h1><img style='width:50%;'src='https://i.imgur.com/SxMOwaA.png'/><p>Type d'industrie : "+i.properties.lib_naf+"</p><p>Site class\xe9 "+i.properties.lib_seveso+"</p><a target=_blank href='"+i.properties.url_fiche+"'>Cliquer pour plus d'infos<a></center>")}),this.http.get(this.farmsData).subscribe(n=>{for(const i of n.data)L.geoJSON(i.geometry,{pointToLayer:function(s,l){return L.marker(l,{icon:L.icon({iconUrl:"https://tinyimg.io/i/qfHYyxS.png",iconSize:[36,36]})})}}).addTo(this.farmsLayer).bindPopup("<center><h1>Ferme</h1><img style='width:50%;'src='https://tinyimg.io/i/96r0nxA.png'/><p>Nom : "+i.properties.Nom+"</p><p>Ville "+i.properties.Ville+"<p> Adresse: "+i.properties.Address+"</p><p> Produits: "+i.properties.Produits+"</p></p><a target=_blank href='"+i.properties.Location+"'>lien maps<a></center>")}),this.http.get(this.riversData).subscribe(n=>{for(const i of n.data)L.geoJSON(i.geometry,{pointToLayer:function(s,l){return L.marker(l,{icon:L.icon({iconUrl:"https://tinyimg.io/i/s4mSpp6.png",iconSize:[36,36]})})}}).addTo(this.riversLayer).bindPopup("<center><h1>Rivi\xe8re</h1><img style='width:50%;'src='https://tinyimg.io/i/s4mSpp6.png'/><p>Libelle : "+i.properties.Libelle+"</p><p>Commune:  "+i.properties.Commune+"<p> Localisation: "+i.properties.Localisation+"</p><p> Resultat: "+i.properties.Resultat+"  "+this.calculateRiverNote(i.properties.Resultat)+"</p>")})}greenZonesDisplay(){this.greenZones.addTo(this.map)}greenZonesHide(){this.greenZones.removeFrom(this.map)}pollusolDisplay(){this.pollusolLayer.addTo(this.map)}pollusolHide(){this.pollusolLayer.removeFrom(this.map)}inst_indusDisplay(){this.inst_indusLayer.addTo(this.map)}inst_indusHide(){this.inst_indusLayer.removeFrom(this.map)}farmsDisplay(){this.farmsLayer.addTo(this.map)}farmsHide(){this.farmsLayer.removeFrom(this.map)}riversDisplay(){this.riversLayer.addTo(this.map)}riversHide(){this.riversLayer.removeFrom(this.map)}rangeChangedByUser(n){this.userRange=n}resetUserLayer(){this.userLayer.clearLayers()}calculateRiverNote(n){let i="";return n>=17&&(i="<span class='noteDiv' style='background-color:rgb(113, 230, 253)';>Tr\xe8s Bonne</div>"),n<17&&14.5<=n&&(i="<span class='noteDiv' style='background-color:rgb(69, 231, 118)';>Bonne</div>"),n<14.5&&10.5<=n&&(i="<span class='noteDiv' style='background-color:yellow';>Moyenne</div>"),n<10.5&&6<=n&&(i="<span class='noteDiv' style='background-color:orange';>M\xe9diocre</div>"),n<6&&(i="<span class='noteDiv' style='background-color:red';>Mauvaise</div>"),i}}return e.\u0275fac=function(n){return new(n||e)(me(wy))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),tx=(()=>{class e{constructor(n){this.mapService=n}ngAfterViewInit(){this.initMap(),this.mapService.initmap(this.map)}initMap(){this.map=hy.map("map",{preferCanvas:!0}).setView([43.924673107953865,2.075675106215357],11),hy.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map)}}return e.\u0275fac=function(n){return new(n||e)(de(My))},e.\u0275cmp=Ei({type:e,selectors:[["app-map"]],decls:2,vars:0,consts:[[1,"map-container"],["id","map"]],template:function(n,i){1&n&&(Pe(0,"div",0),Gn(1,"div",1),Ie())},styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%}#map[_ngcontent-%COMP%]{height:100%}"]}),e})();const nx=["layer1"],ix=["layer2"],rx=["layer3"],ox=["layer4"],sx=["layer5"],ax=["range"];let lx=(()=>{class e{constructor(n){this.mapService=n,this.n=3e3}layer1check(){var n;(null===(n=this.layer1)||void 0===n?void 0:n.nativeElement.checked)?this.mapService.greenZonesDisplay():this.mapService.greenZonesHide()}layer2check(){var n;(null===(n=this.layer2)||void 0===n?void 0:n.nativeElement.checked)?this.mapService.pollusolDisplay():this.mapService.pollusolHide()}layer3check(){var n;(null===(n=this.layer3)||void 0===n?void 0:n.nativeElement.checked)?this.mapService.inst_indusDisplay():this.mapService.inst_indusHide()}layer4check(){var n;(null===(n=this.layer4)||void 0===n?void 0:n.nativeElement.checked)?this.mapService.farmsDisplay():this.mapService.farmsHide()}layer5check(){var n;(null===(n=this.layer5)||void 0===n?void 0:n.nativeElement.checked)?this.mapService.riversDisplay():this.mapService.riversHide()}rangeChanged(n){this.range&&(this.n=n.target.value),this.mapService.rangeChangedByUser(this.n)}reset(){this.mapService.resetUserLayer()}}return e.\u0275fac=function(n){return new(n||e)(de(My))},e.\u0275cmp=Ei({type:e,selectors:[["app-sidebar"]],viewQuery:function(n,i){if(1&n&&(sr(nx,5),sr(ix,5),sr(rx,5),sr(ox,5),sr(sx,5),sr(ax,5)),2&n){let o;or(o=ar())&&(i.layer1=o.first),or(o=ar())&&(i.layer2=o.first),or(o=ar())&&(i.layer3=o.first),or(o=ar())&&(i.layer4=o.first),or(o=ar())&&(i.layer5=o.first),or(o=ar())&&(i.range=o.first)}},decls:54,vars:1,consts:[[1,"sidebar"],["id","lorem"],[1,"slidecontainer"],["type","range","min","1000","max","6000","value","3000","id","myRange",1,"slider",3,"input"],["range",""],["number",""],[3,"click"],["type","checkbox","id","layer1","name","layer1","value","bio",3,"click"],["layer1",""],["for","layer1"],[1,"LayerDescription"],["type","checkbox","id","layer4","name","layer4","value","ferms",3,"click"],["layer4",""],["for","layer4"],["type","checkbox","id","layer2","name","layer2","value","indus",3,"click"],["layer2",""],["for","layer2"],["type","checkbox","id","layer3","name","layer3","value","insectes",3,"click"],["layer3",""],["for","layer3"],["type","checkbox","id","layer5","name","layer5","value","Rivers",3,"click"],["layer5",""]],template:function(n,i){1&n&&(Pe(0,"div",0),Pe(1,"h1"),ut(2,"Beeo"),Ie(),Pe(3,"p",1),ut(4," Beeo est une application d'abord cr\xe9\xe9e pour aider les apiculteurs bio \xe0 trouver des endroits adapt\xe9s pour poser leurs ruches. "),Ie(),Pe(5,"div",2),Pe(6,"input",3,4),di("input",function(s){return i.rangeChanged(s)}),Ie(),Pe(8,"p"),ut(9," Rayon de butinage : "),Pe(10,"span",null,5),ut(12),Ie(),ut(13," m\xe8tres (cliquer sur la carte pour placer une zone de ce rayon) "),Ie(),Pe(14,"button",6),di("click",function(){return i.reset()}),ut(15,"Reset les marqueurs"),Ie(),Ie(),Gn(16,"br"),Pe(17,"h3"),ut(18,"S\xe9lection des calques"),Ie(),Pe(19,"input",7,8),di("click",function(){return i.layer1check()}),Ie(),Pe(21,"label",9),ut(22,"Zones bios"),Ie(),Gn(23,"br"),Pe(24,"p",10),ut(25," Correspond aux parcelles en Agriculture Biologique (AB) d\xe9clar\xe9es \xe0 la PAC "),Ie(),Pe(26,"input",11,12),di("click",function(){return i.layer4check()}),Ie(),Pe(28,"label",13),ut(29,"Fermes Bio"),Ie(),Gn(30,"br"),Pe(31,"p",10),ut(32," Correspond aux fermes bio avec leur emplacement exact "),Ie(),Pe(33,"input",14,15),di("click",function(){return i.layer2check()}),Ie(),Pe(35,"label",16),ut(36,"Zones pollu\xe9es"),Ie(),Gn(37,"br"),Pe(38,"p",10),ut(39," Correspond aux sites et sols pollu\xe9s (ou potentiellement pollu\xe9s) appelant une action des pouvoirs publics, \xe0 titre pr\xe9ventif ou curatif (ex BASOL). "),Ie(),Pe(40,"input",17,18),di("click",function(){return i.layer3check()}),Ie(),Pe(42,"label",19),ut(43,"Installations industrielles"),Ie(),Gn(44,"br"),Pe(45,"p",10),ut(46," Correspond aux Installations class\xe9es pour la protection de l'environnement (ICPE) soumises \xe0 autorisation ou \xe0 enregistrement (en construction, en fonctionnement ou en cessation d'activit\xe9) "),Ie(),Pe(47,"input",20,21),di("click",function(){return i.layer5check()}),Ie(),Pe(49,"label",13),ut(50,"Rivi\xe8res"),Ie(),Gn(51,"br"),Pe(52,"p",10),ut(53," Correspond aux qualit\xe9 des rivi\xe8res avec l'emplacement de la station de mesure. "),Ie(),Ie()),2&n&&(function Vf(e){jf(De(),N(),Tt()+e,Ma())}(12),Vc(i.n))},styles:[".sidebar[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#008752;border-left:solid 4px #eafadd;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:10%;color:#eafadd;overflow:auto}h1[_ngcontent-%COMP%]{margin:0}#lorem[_ngcontent-%COMP%]{font-size:.9em;text-justify:inter-word}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:#d3d3d3;opacity:1;transition:opacity .2s}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:23px;height:24px;border:0;background:url(bee-png.557467e20a7942b0.png);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:23px;height:24px;border:0;background:url(bee-png.557467e20a7942b0.png);cursor:pointer}.LayerDescription[_ngcontent-%COMP%]{margin-top:0;color:#cdd3c7}"]}),e})(),ux=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ei({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"global_container"],[1,"f1"],[1,"f2"]],template:function(n,i){1&n&&(Pe(0,"div",0),Gn(1,"app-map",1),Gn(2,"app-sidebar",2),Ie())},directives:[tx,lx],styles:[".global_container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;height:100%}.f1[_ngcontent-%COMP%]{width:75%;height:100%}.f2[_ngcontent-%COMP%]{width:25%;height:100%}"]}),e})(),cx=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Gt({type:e,bootstrap:[ux]}),e.\u0275inj=Xt({providers:[],imports:[[TT,ex]]}),e})();(function sL(){b_=!1})(),LT().bootstrapModule(cx).catch(e=>console.error(e))},556:()=>{"use strict";L.Layer.include({_originalRemove:L.Layer.prototype.remove,remove:function(){return this.marker&&this.marker.remove(),this._originalRemove()}}),L.Map.include({_originalRemoveLayer:L.Map.prototype.removeLayer,removeLayer:function(B){return B.marker&&B.marker.remove(),this._originalRemoveLayer(B)}}),L.Deflate=L.FeatureGroup.extend({options:{minSize:10,markerOptions:{},markerType:L.marker,greedyCollapse:!0},initialize:function(B){L.Util.setOptions(this,B),this._layers=[],this._needsPrepping=[],this._featureLayer=this._getFeatureLayer(B)},_getFeatureLayer:function(){return this.options.markerLayer?this.options.markerLayer:L.featureGroup(this.options)},_getBounds:function(B){if(B instanceof L.Circle){B.addTo(this._map);const q=B.getBounds();return this._map.removeLayer(B),q}return B.getBounds()},_isCollapsed:function(B,q){const P=B.computedBounds,Q=this._map.project(P.getNorthEast(),q),f=this._map.project(P.getSouthWest(),q),g=Math.abs(Q.x-f.x),D=Math.abs(f.y-Q.y);return this.options.greedyCollapse?D<this.options.minSize||g<this.options.minSize:D<this.options.minSize&&g<this.options.minSize},_getZoomThreshold:function(B){let q,P=this._map.getZoom();if(this._isCollapsed(B,this._map.getZoom()))for(;!q;)P+=1,this._isCollapsed(B,P)||(q=P-1);else for(;!q;)P-=1,this._isCollapsed(B,P)&&(q=P);return q},_bindInfoTools:function(B,q){q._popupHandlersAdded&&B.bindPopup(q._popup._content,q._popup.options),q._tooltipHandlersAdded&&B.bindTooltip(q._tooltip._content,q._tooltip.options)},_bindEvents:function(q,P){const Q=P._events,f=Q?Object.getOwnPropertyNames(Q):[],g=P._eventParents,D=g?Object.getOwnPropertyNames(g):[];this._bindInfoTools(q,P);for(let M=0,A=f.length;M<A;M+=1){const j=Q[f[M]];for(let V=0,Z=j.length;V<Z;V+=1)q.on(f[M],j[V].fn)}if(P._eventParents)for(let M=0,A=D.length;M<A;M+=1)P._eventParents[D[M]]._map||(this._bindEvents(q,P._eventParents[D[M]]),this._bindInfoTools(P,P._eventParents[D[M]]))},_makeMarker:function(B){if(-1===[L.marker,L.circleMarker].indexOf(this.options.markerType))throw new Error("Invalid markerType provided. Allowed markerTypes are: L.marker and L.circleMarker");const P="function"==typeof this.options.markerOptions?this.options.markerOptions(B):this.options.markerOptions,Q=this.options.markerType(B.computedBounds.getCenter(),P),f=B.feature?Q.toGeoJSON():void 0;return this._bindEvents(Q,B),f&&(f.properties=B.feature.properties,Q.feature=f),Q},prepLayer:function(B){B.getBounds&&(B.computedBounds=this._getBounds(B),B.zoomThreshold=this._getZoomThreshold(B),B.marker=this._makeMarker(B),B.zoomState=this._map.getZoom())},_addToMap:function(B){const q=this._map.getZoom()<=B.zoomThreshold?B.marker:B;this._featureLayer.addLayer(q)},addLayer:function(B){const q=B instanceof L.FeatureGroup?Object.getOwnPropertyNames(B._layers):[];if(q.length)for(let P=0,Q=q.length;P<Q;P+=1)this.addLayer(B._layers[q[P]]);else this._map?(this.prepLayer(B),this._addToMap(B)):this._needsPrepping.push(B),this._layers[this.getLayerId(B)]=B},removeLayer:function(B){const q=B instanceof L.FeatureGroup?Object.getOwnPropertyNames(B._layers):[];if(q.length)for(let P=0,Q=q.length;P<Q;P+=1)this.removeLayer(B._layers[q[P]]);else{const P=B in this._layers?B:this.getLayerId(B);this._featureLayer.removeLayer(this._layers[P]),this._layers[P].marker&&this._featureLayer.removeLayer(this._layers[P].marker),delete this._layers[P];const Q=this._needsPrepping.indexOf(this._layers[P]);-1!==Q&&this._needsPrepping.splice(Q,1)}},clearLayers:function(){this._featureLayer.clearLayers(),this._layers=[]},_switchDisplay:function(B,q){q?(this._featureLayer.removeLayer(B),this._featureLayer.addLayer(B.marker)):(this._featureLayer.removeLayer(B.marker),this._featureLayer.addLayer(B))},_deflate:function(){const B=this._map.getBounds(),q=this._map.getZoom();this.eachLayer(function(P){P.marker&&P.zoomState!==q&&P.computedBounds.intersects(B)&&(this._switchDisplay(P,q<=P.zoomThreshold),P.zoomState=q)},this)},onAdd:function(B){this._featureLayer.addTo(B),this._map.on("zoomend",this._deflate,this),this._map.on("moveend",this._deflate,this);for(let q=0,P=this._needsPrepping.length;q<P;q+=1)this.addLayer(this._needsPrepping[q]);this._needsPrepping=[],this._deflate()},onRemove:function(B){B.removeLayer(this._featureLayer),this._map.off("zoomend",this._deflate,this),this._map.off("moveend",this._deflate,this)}}),L.deflate=function(B){return new L.Deflate(B)}},690:()=>{var B,q,f;B=window,q=document,L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(f,g){this._map=f,this._container=f._container,this._overlayPane=f._panes.overlayPane,this._popupPane=f._panes.popupPane,g&&g.shapeOptions&&(g.shapeOptions=L.Util.extend({},this.options.shapeOptions,g.shapeOptions)),L.setOptions(this,g);var D=L.version.split(".");1===parseInt(D[0],10)&&parseInt(D[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var f=this._map;f&&(L.DomUtil.disableTextSelection(),f.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(f){L.setOptions(this,f)},_fireCreatedEvent:function(f){this._map.fire(L.Draw.Event.CREATED,{layer:f,layerType:this.type})},_cancelDrawing:function(f){27===f.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(f,g){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,g&&g.drawError&&(g.drawError=L.Util.extend({},this.options.drawError,g.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,f,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var f=this._markers.pop(),g=this._poly,D=g.getLatLngs(),M=D.splice(-1,1)[0];this._poly.setLatLngs(D),this._markerGroup.removeLayer(f),g.getLatLngs().length<2&&this._map.removeLayer(g),this._vertexChanged(M,!1)}},addVertex:function(f){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(f)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(f)),this._poly.addLatLng(f),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(f,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var f=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),g=this._poly.newLatLngIntersects(f[f.length-1]);!this.options.allowIntersection&&g||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(f){var g=this._map.mouseEventToLayerPoint(f.originalEvent),D=this._map.layerPointToLatLng(g);this._currentLatLng=D,this._updateTooltip(D),this._updateGuide(g),this._mouseMarker.setLatLng(D),L.DomEvent.preventDefault(f.originalEvent)},_vertexChanged:function(f,g){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(f,g),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(f){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(f),this._clickHandled=!0,this._disableNewMarkers();var g=f.originalEvent;this._startPoint.call(this,g.clientX,g.clientY)}},_startPoint:function(f,g){this._mouseDownOrigin=L.point(f,g)},_onMouseUp:function(f){var g=f.originalEvent;this._endPoint.call(this,g.clientX,g.clientY,f),this._clickHandled=null},_endPoint:function(f,g,D){if(this._mouseDownOrigin){var M=L.point(f,g).distanceTo(this._mouseDownOrigin),A=this._calculateFinishDistance(D.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(D.latlng),this._finishShape()):A<10&&L.Browser.touch?this._finishShape():Math.abs(M)<9*(B.devicePixelRatio||1)&&this.addVertex(D.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(f){var g,D,M=f.originalEvent;!M.touches||!M.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(g=M.touches[0].clientX,D=M.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,g,D),this._endPoint.call(this,g,D,f),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(f){var g;if(this._markers.length>0){var D;if(this.type===L.Draw.Polyline.TYPE)D=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;D=this._markers[0]}var M=this._map.latLngToContainerPoint(D.getLatLng()),A=new L.Marker(f,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),j=this._map.latLngToContainerPoint(A.getLatLng());g=M.distanceTo(j)}else g=1/0;return g},_updateFinishHandler:function(){var f=this._markers.length;f>1&&this._markers[f-1].on("click",this._finishShape,this),f>2&&this._markers[f-2].off("click",this._finishShape,this)},_createMarker:function(f){var g=new L.Marker(f,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(g),g},_updateGuide:function(f){var g=this._markers?this._markers.length:0;g>0&&(f=f||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[g-1].getLatLng()),f))},_updateTooltip:function(f){var g=this._getTooltipText();f&&this._tooltip.updatePosition(f),this._errorShown||this._tooltip.updateContent(g)},_drawGuide:function(f,g){var D,M,A,j=Math.floor(Math.sqrt(Math.pow(g.x-f.x,2)+Math.pow(g.y-f.y,2))),Z=this.options.maxGuideLineLength,_e=j>Z?j-Z:this.options.guidelineDistance;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));_e<j;_e+=this.options.guidelineDistance)D=_e/j,M={x:Math.floor(f.x*(1-D)+D*g.x),y:Math.floor(f.y*(1-D)+D*g.y)},(A=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(A,M)},_updateGuideColor:function(f){if(this._guidesContainer)for(var g=0,D=this._guidesContainer.childNodes.length;g<D;g++)this._guidesContainer.childNodes[g].style.backgroundColor=f},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var f,g;return 0===this._markers.length?f={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(g=this.options.showLength?this._getMeasurementString():"",f=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:g}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:g}),f},_updateRunningMeasure:function(f,g){var D,M,A=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(D=A-(g?2:1),M=L.GeometryUtil.isVersion07x()?f.distanceTo(this._markers[D].getLatLng())*(this.options.factor||1):this._map.distance(f,this._markers[D].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=M*(g?1:-1))},_getMeasurementString:function(){var f,g=this._currentLatLng,D=this._markers[this._markers.length-1].getLatLng();return f=L.GeometryUtil.isVersion07x()?D&&g&&g.distanceTo?this._measurementRunningTotal+g.distanceTo(D)*(this.options.factor||1):this._measurementRunningTotal||0:D&&g?this._measurementRunningTotal+this._map.distance(g,D)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(f,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var f=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,f)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(f,g){L.Draw.Polyline.prototype.initialize.call(this,f,g),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var f=this._markers.length;1===f&&this._markers[0].on("click",this._finishShape,this),f>2&&(this._markers[f-1].on("dblclick",this._finishShape,this),f>3&&this._markers[f-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var f,g;return 0===this._markers.length?f=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(f=L.drawLocal.draw.handlers.polygon.tooltip.cont,g=this._getMeasurementString()):(f=L.drawLocal.draw.handlers.polygon.tooltip.end,g=this._getMeasurementString()),{text:f,subtext:g}},_getMeasurementString:function(){var f=this._area,g="";return f||this.options.showLength?(this.options.showLength&&(g=L.Draw.Polyline.prototype._getMeasurementString.call(this)),f&&(g+="<br>"+L.GeometryUtil.readableArea(f,this.options.metric,this.options.precision)),g):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(f,g){var D;!this.options.allowIntersection&&this.options.showArea&&(D=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(D)),L.Draw.Polyline.prototype._vertexChanged.call(this,f,g)},_cleanUpShape:function(){var f=this._markers.length;f>0&&(this._markers[0].off("click",this._finishShape,this),f>2&&this._markers[f-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(f,g){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,f,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),q.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(q,"mouseup",this._onMouseUp,this),L.DomEvent.off(q,"touchend",this._onMouseUp,this),q.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(f){this._isDrawing=!0,this._startLatLng=f.latlng,L.DomEvent.on(q,"mouseup",this._onMouseUp,this).on(q,"touchend",this._onMouseUp,this).preventDefault(f.originalEvent)},_onMouseMove:function(f){var g=f.latlng;this._tooltip.updatePosition(g),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(g))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(f,g){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,f,g)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(f){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function Q(f,g){for(;(f=f.parentElement)&&!f.classList.contains(g););return f}(f.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(f){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,f)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,f),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var f=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,f)},_getTooltipText:function(){var f,g,D,M=L.Draw.SimpleShape.prototype._getTooltipText.call(this),j=this.options.showArea;return this._shape&&(f=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),g=L.GeometryUtil.geodesicArea(f),D=j?L.GeometryUtil.readableArea(g,this.options.metric):""),{text:M.text,subtext:D}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(f,g){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,f,g)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(f){var g=f.latlng;this._tooltip.updatePosition(g),this._mouseMarker.setLatLng(g),this._marker?(g=this._mouseMarker.getLatLng(),this._marker.setLatLng(g)):(this._marker=this._createMarker(g),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(f){return new L.Marker(f,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(f){this._onMouseMove(f),this._onClick()},_fireCreatedEvent:function(){var f=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,f)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(f,g){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,f,g)},_fireCreatedEvent:function(){var f=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,f)},_createMarker:function(f){return new L.CircleMarker(f,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(f,g){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,f,g)},_drawShape:function(f){if(L.GeometryUtil.isVersion07x())var g=this._startLatLng.distanceTo(f);else g=this._map.distance(this._startLatLng,f);this._shape?this._shape.setRadius(g):(this._shape=new L.Circle(this._startLatLng,g,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var f=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,f)},_onMouseMove:function(f){var g,D=f.latlng,M=this.options.showRadius,A=this.options.metric;if(this._tooltip.updatePosition(D),this._isDrawing){this._drawShape(D),g=this._shape.getRadius().toFixed(1);var j="";M&&(j=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(g,A,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:j})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(f,g){this._marker=f,L.setOptions(this,g)},addHooks:function(){var f=this._marker;f.dragging.enable(),f.on("dragend",this._onDragEnd,f),this._toggleMarkerHighlight()},removeHooks:function(){var f=this._marker;f.dragging.disable(),f.off("dragend",this._onDragEnd,f),this._toggleMarkerHighlight()},_onDragEnd:function(f){var g=f.target;g.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:g})},_toggleMarkerHighlight:function(){var f=this._marker._icon;f&&(f.style.display="none",L.DomUtil.hasClass(f,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(f,"leaflet-edit-marker-selected"),this._offsetMarker(f,-4)):(L.DomUtil.addClass(f,"leaflet-edit-marker-selected"),this._offsetMarker(f,4)),f.style.display="")},_offsetMarker:function(f,g){var D=parseInt(f.style.marginTop,10)-g,M=parseInt(f.style.marginLeft,10)-g;f.style.marginTop=D+"px",f.style.marginLeft=M+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(f){this.latlngs=[f._latlngs],f._holes&&(this.latlngs=this.latlngs.concat(f._holes)),this._poly=f,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(f){for(var g=0;g<this._verticesHandlers.length;g++)f(this._verticesHandlers[g])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(f){f.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(f){f.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(f){f.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var f=0;f<this.latlngs.length;f++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[f],this._poly.options.poly))},_updateLatLngs:function(f){this.latlngs=[f.layer._latlngs],f.layer._holes&&(this.latlngs=this.latlngs.concat(f.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(f,g,D){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=f,D&&D.drawError&&(D.drawError=L.Util.extend({},this.options.drawError,D.drawError)),this._latlngs=g,L.setOptions(this,D)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var f=this._poly,g=f._path;f instanceof L.Polygon||(f.options.fill=!1,f.options.editing&&(f.options.editing.fill=!1)),g&&f.options.editing&&f.options.editing.className&&(f.options.original.className&&f.options.original.className.split(" ").forEach(function(D){L.DomUtil.removeClass(g,D)}),f.options.editing.className.split(" ").forEach(function(D){L.DomUtil.addClass(g,D)})),f.setStyle(f.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var f=this._poly,g=f._path;g&&f.options.editing&&f.options.editing.className&&(f.options.editing.className.split(" ").forEach(function(D){L.DomUtil.removeClass(g,D)}),f.options.original.className&&f.options.original.className.split(" ").forEach(function(D){L.DomUtil.addClass(g,D)})),f.setStyle(f.options.original),f._map&&(f._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var f,g,D,M,j,V,A=this._defaultShape();for(f=0,D=A.length;f<D;f++)(M=this._createMarker(A[f],f)).on("click",this._onMarkerClick,this),M.on("contextmenu",this._onContextMenu,this),this._markers.push(M);for(f=0,g=D-1;f<D;g=f++)(0!==f||L.Polygon&&this._poly instanceof L.Polygon)&&(this._createMiddleMarker(j=this._markers[g],V=this._markers[f]),this._updatePrevNext(j,V))},_createMarker:function(f,g){var D=new L.Marker.Touch(f,{draggable:!0,icon:this.options.icon});return D._origLatLng=f,D._index=g,D.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(D),D},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var f=this._defaultShape(),g=[].splice.apply(f,arguments);return this._poly._convertLatLngs(f,!0),this._poly.redraw(),g},_removeMarker:function(f){var g=f._index;this._markerGroup.removeLayer(f),this._markers.splice(g,1),this._spliceLatLngs(g,1),this._updateIndexes(g,-1),f.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(f){var g=f.target,D=this._poly,M=L.LatLngUtil.cloneLatLng(g._origLatLng);if(L.extend(g._origLatLng,g._latlng),D.options.poly){var A=D._map._editTooltip;if(!D.options.poly.allowIntersection&&D.intersects()){L.extend(g._origLatLng,M),g.setLatLng(M);var j=D.options.color;D.setStyle({color:this.options.drawError.color}),A&&A.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){D.setStyle({color:j}),A&&A.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}g._middleLeft&&g._middleLeft.setLatLng(this._getMiddleLatLng(g._prev,g)),g._middleRight&&g._middleRight.setLatLng(this._getMiddleLatLng(g,g._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var V=this._poly.getLatLngs();this._poly._convertLatLngs(V,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(f){var g=L.Polygon&&this._poly instanceof L.Polygon?4:3,D=f.target;this._defaultShape().length<g||(this._removeMarker(D),this._updatePrevNext(D._prev,D._next),D._middleLeft&&this._markerGroup.removeLayer(D._middleLeft),D._middleRight&&this._markerGroup.removeLayer(D._middleRight),D._prev&&D._next?this._createMiddleMarker(D._prev,D._next):D._prev?D._next||(D._prev._middleRight=null):D._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(f){this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:f.target,layers:this._markerGroup,poly:this._poly}),L},_onTouchMove:function(f){var g=this._map.mouseEventToLayerPoint(f.originalEvent.touches[0]),D=this._map.layerPointToLatLng(g),M=f.target;L.extend(M._origLatLng,D),M._middleLeft&&M._middleLeft.setLatLng(this._getMiddleLatLng(M._prev,M)),M._middleRight&&M._middleRight.setLatLng(this._getMiddleLatLng(M,M._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(f,g){this._markerGroup.eachLayer(function(D){D._index>f&&(D._index+=g)})},_createMiddleMarker:function(f,g){var D,M,A,j=this._getMiddleLatLng(f,g),V=this._createMarker(j);V.setOpacity(.6),f._middleRight=g._middleLeft=V,M=function(){V.off("touchmove",M,this);var Z=g._index;V._index=Z,V.off("click",D,this).on("click",this._onMarkerClick,this),j.lat=V.getLatLng().lat,j.lng=V.getLatLng().lng,this._spliceLatLngs(Z,0,j),this._markers.splice(Z,0,V),V.setOpacity(1),this._updateIndexes(Z,1),g._index++,this._updatePrevNext(f,V),this._updatePrevNext(V,g),this._poly.fire("editstart")},A=function(){V.off("dragstart",M,this),V.off("dragend",A,this),V.off("touchmove",M,this),this._createMiddleMarker(f,V),this._createMiddleMarker(V,g)},V.on("click",D=function(){M.call(this),A.call(this),this._fireEdit()},this).on("dragstart",M,this).on("dragend",A,this).on("touchmove",M,this),this._markerGroup.addLayer(V)},_updatePrevNext:function(f,g){f&&(f._next=g),g&&(g._prev=f)},_getMiddleLatLng:function(f,g){var D=this._poly._map,M=D.project(f.getLatLng()),A=D.project(g.getLatLng());return D.unproject(M._add(A)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(f,g){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=f,L.Util.setOptions(this,g)},addHooks:function(){var f=this._shape;this._shape._map&&(this._map=this._shape._map,f.setStyle(f.options.editing),f._map&&(this._map=f._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var f=this._shape;if(f.setStyle(f.options.original),f._map){this._unbindMarker(this._moveMarker);for(var g=0,D=this._resizeMarkers.length;g<D;g++)this._unbindMarker(this._resizeMarkers[g]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(f,g){var D=new L.Marker.Touch(f,{draggable:!0,icon:g,zIndexOffset:10});return this._bindMarker(D),this._markerGroup.addLayer(D),D},_bindMarker:function(f){f.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(f){f.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(f){f.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(f){var g=f.target,D=g.getLatLng();g===this._moveMarker?this._move(D):this._resize(D),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(f){f.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(f){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,f),"function"==typeof this._getCorners){var g=this._getCorners(),D=f.target,M=D._cornerIndex;D.setOpacity(0),this._oppositeCorner=g[(M+2)%4],this._toggleCornerMarkers(0,M)}this._shape.fire("editstart")},_onTouchMove:function(f){var g=this._map.mouseEventToLayerPoint(f.originalEvent.touches[0]),D=this._map.layerPointToLatLng(g);return f.target===this._moveMarker?this._move(D):this._resize(D),this._shape.redraw(),!1},_onTouchEnd:function(f){f.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var g=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(g,this.options.moveIcon)},_createResizeMarker:function(){var f=this._getCorners();this._resizeMarkers=[];for(var g=0,D=f.length;g<D;g++)this._resizeMarkers.push(this._createMarker(f[g],this.options.resizeIcon)),this._resizeMarkers[g]._cornerIndex=g},_onMarkerDragStart:function(f){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,f);var g=this._getCorners(),M=f.target._cornerIndex;this._oppositeCorner=g[(M+2)%4],this._toggleCornerMarkers(0,M)},_onMarkerDragEnd:function(f){var D,M=f.target;M===this._moveMarker&&(D=this._shape.getBounds().getCenter(),M.setLatLng(D)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,f)},_move:function(f){for(var g,D=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),A=this._shape.getBounds().getCenter(),j=[],V=0,Z=D.length;V<Z;V++)j.push([f.lat+(g=[D[V].lat-A.lat,D[V].lng-A.lng])[0],f.lng+g[1]]);this._shape.setLatLngs(j),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(f){var g;this._shape.setBounds(L.latLngBounds(f,this._oppositeCorner)),g=this._shape.getBounds(),this._moveMarker.setLatLng(g.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var f=this._shape.getBounds();return[f.getNorthWest(),f.getNorthEast(),f.getSouthEast(),f.getSouthWest()]},_toggleCornerMarkers:function(f){for(var g=0,D=this._resizeMarkers.length;g<D;g++)this._resizeMarkers[g].setOpacity(f)},_repositionCornerMarkers:function(){for(var f=this._getCorners(),g=0,D=this._resizeMarkers.length;g<D;g++)this._resizeMarkers[g].setLatLng(f[g])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var f=this._shape.getLatLng();this._moveMarker=this._createMarker(f,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(f){if(this._resizeMarkers.length){var g=this._getResizeMarkerPoint(f);this._resizeMarkers[0].setLatLng(g)}this._shape.setLatLng(f),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var f=this._shape.getLatLng(),g=this._getResizeMarkerPoint(f);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(g,this.options.resizeIcon))},_getResizeMarkerPoint:function(f){var g=this._shape._radius*Math.cos(Math.PI/4),D=this._map.project(f);return this._map.unproject([D.x+g,D.y-g])},_resize:function(f){var g=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=g.distanceTo(f):radius=this._map.distance(g,f),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(f,g){var D={};if(void 0!==f.touches){if(!f.touches.length)return;D=f.touches[0]}else if("touch"!==f.pointerType||(D=f,!this._filterClick(f)))return;var M=this._map.mouseEventToContainerPoint(D),A=this._map.mouseEventToLayerPoint(D),j=this._map.layerPointToLatLng(A);this._map.fire(g,{latlng:j,layerPoint:A,containerPoint:M,pageX:D.pageX,pageY:D.pageY,originalEvent:f})},_filterClick:function(f){var g=f.timeStamp||f.originalEvent.timeStamp,D=L.DomEvent._lastClick&&g-L.DomEvent._lastClick;return D&&D>100&&D<500||f.target._simulatedClick&&!f._simulated?(L.DomEvent.stop(f),!1):(L.DomEvent._lastClick=g,!0)},_onTouchStart:function(f){this._map._loaded&&this._touchEvent(f,"touchstart")},_onTouchEnd:function(f){this._map._loaded&&this._touchEvent(f,"touchend")},_onTouchCancel:function(f){if(this._map._loaded){var g="touchcancel";this._detectIE()&&(g="pointercancel"),this._touchEvent(f,g)}},_onTouchLeave:function(f){this._map._loaded&&this._touchEvent(f,"touchleave")},_onTouchMove:function(f){this._map._loaded&&this._touchEvent(f,"touchmove")},_detectIE:function(){var f=B.navigator.userAgent,g=f.indexOf("MSIE ");if(g>0)return parseInt(f.substring(g+5,f.indexOf(".",g)),10);if(f.indexOf("Trident/")>0){var D=f.indexOf("rv:");return parseInt(f.substring(D+3,f.indexOf(".",D)),10)}var M=f.indexOf("Edge/");return M>0&&parseInt(f.substring(M+5,f.indexOf(".",M)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var f=this._icon,g=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];g.concat(this._detectIE?["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]:["touchcancel"]),L.DomUtil.addClass(f,"leaflet-clickable"),L.DomEvent.on(f,"click",this._onMouseClick,this),L.DomEvent.on(f,"keypress",this._onKeyPress,this);for(var D=0;D<g.length;D++)L.DomEvent.on(f,g[D],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var f=B.navigator.userAgent,g=f.indexOf("MSIE ");if(g>0)return parseInt(f.substring(g+5,f.indexOf(".",g)),10);if(f.indexOf("Trident/")>0){var D=f.indexOf("rv:");return parseInt(f.substring(D+3,f.indexOf(".",D)),10)}var M=f.indexOf("Edge/");return M>0&&parseInt(f.substring(M+5,f.indexOf(".",M)),10)}}),L.LatLngUtil={cloneLatLngs:function(f){for(var g=[],D=0,M=f.length;D<M;D++)Array.isArray(f[D])?g.push(L.LatLngUtil.cloneLatLngs(f[D])):g.push(this.cloneLatLng(f[D]));return g},cloneLatLng:function(f){return L.latLng(f.lat,f.lng)}},f={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(g){var D,M,A=g.length,j=0,V=Math.PI/180;if(A>2){for(var Z=0;Z<A;Z++)j+=((M=g[(Z+1)%A]).lng-(D=g[Z]).lng)*V*(2+Math.sin(D.lat*V)+Math.sin(M.lat*V));j=6378137*j*6378137/2}return Math.abs(j)},formattedNumber:function(g,D){var M=parseFloat(g).toFixed(D),A=L.drawLocal.format&&L.drawLocal.format.numeric,j=A&&A.delimiters,V=j&&j.thousands,Z=j&&j.decimal;if(V||Z){var _e=M.split(".");M=V?_e[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+V):_e[0],Z=Z||".",_e.length>1&&(M=M+Z+_e[1])}return M},readableArea:function(g,D,V){var A,j;return V=L.Util.extend({},f,V),D?(j=["ha","m"],type=typeof D,"string"===type?j=[D]:"boolean"!==type&&(j=D),A=g>=1e6&&-1!==j.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*g,V.km)+" km\xb2":g>=1e4&&-1!==j.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*g,V.ha)+" ha":L.GeometryUtil.formattedNumber(g,V.m)+" m\xb2"):A=(g/=.836127)>=3097600?L.GeometryUtil.formattedNumber(g/3097600,V.mi)+" mi\xb2":g>=4840?L.GeometryUtil.formattedNumber(g/4840,V.ac)+" acres":L.GeometryUtil.formattedNumber(g,V.yd)+" yd\xb2",A},readableDistance:function(g,D,M,A,Z){var V;switch(Z=L.Util.extend({},f,Z),D?"string"==typeof D?D:"metric":M?"feet":A?"nauticalMile":"yards"){case"metric":V=g>1e3?L.GeometryUtil.formattedNumber(g/1e3,Z.km)+" km":L.GeometryUtil.formattedNumber(g,Z.m)+" m";break;case"feet":g*=3.28083,V=L.GeometryUtil.formattedNumber(g,Z.ft)+" ft";break;case"nauticalMile":g*=.53996,V=L.GeometryUtil.formattedNumber(g/1e3,Z.nm)+" nm";break;default:V=(g*=1.09361)>1760?L.GeometryUtil.formattedNumber(g/1760,Z.mi)+" miles":L.GeometryUtil.formattedNumber(g,Z.yd)+" yd"}return V},isVersion07x:function(){var g=L.version.split(".");return 0===parseInt(g[0],10)&&7===parseInt(g[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(f,g,D,M){return this._checkCounterclockwise(f,D,M)!==this._checkCounterclockwise(g,D,M)&&this._checkCounterclockwise(f,g,D)!==this._checkCounterclockwise(f,g,M)},_checkCounterclockwise:function(f,g,D){return(D.y-f.y)*(g.x-f.x)>(g.y-f.y)*(D.x-f.x)}}),L.Polyline.include({intersects:function(){var f,M=this._getProjectedPoints(),A=M?M.length:0;if(this._tooFewPointsForIntersection())return!1;for(f=A-1;f>=3;f--)if(this._lineSegmentsIntersectsRange(M[f-1],M[f],f-2))return!0;return!1},newLatLngIntersects:function(f,g){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(f),g)},newPointIntersects:function(f,g){var D=this._getProjectedPoints(),M=D?D.length:0,A=D?D[M-1]:null,j=M-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(A,f,j,g?1:0)},_tooFewPointsForIntersection:function(f){var g=this._getProjectedPoints(),D=g?g.length:0;return!g||(D+=f||0)<=3},_lineSegmentsIntersectsRange:function(f,g,D,M){var V=this._getProjectedPoints();M=M||0;for(var Z=D;Z>M;Z--)if(L.LineUtil.segmentsIntersect(f,g,V[Z-1],V[Z]))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var f=[],g=this._defaultShape(),D=0;D<g.length;D++)f.push(this._map.latLngToLayerPoint(g[D]));return f}}),L.Polygon.include({intersects:function(){var f,A=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||this._lineSegmentsIntersectsRange(A[(f=A.length)-1],A[0],f-2,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(f){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var g;L.Control.prototype.initialize.call(this,f),this._toolbars={},L.DrawToolbar&&this.options.draw&&(g=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=g,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(g=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=g,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(f){var g,D=L.DomUtil.create("div","leaflet-draw"),M=!1;for(var A in this._toolbars)this._toolbars.hasOwnProperty(A)&&(g=this._toolbars[A].addToolbar(f))&&(M||(L.DomUtil.hasClass(g,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(g.childNodes[0],"leaflet-draw-toolbar-top"),M=!0),D.appendChild(g));return D},onRemove:function(){for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&this._toolbars[f].removeToolbar()},setDrawingOptions:function(f){for(var g in this._toolbars)this._toolbars[g]instanceof L.DrawToolbar&&this._toolbars[g].setOptions(f)},_toolbarEnabled:function(f){var g=f.target;for(var D in this._toolbars)this._toolbars[D]!==g&&this._toolbars[D].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(f){L.setOptions(this,f),this._modes={},this._actionButtons=[],this._activeMode=null;var g=L.version.split(".");1===parseInt(g[0],10)&&parseInt(g[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(f){var g,D=L.DomUtil.create("div","leaflet-draw-section"),M=0,A=this._toolbarClass||"",j=this.getModeHandlers(f);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=f,g=0;g<j.length;g++)j[g].enabled&&this._initModeHandler(j[g].handler,this._toolbarContainer,M++,A,j[g].title);if(M)return this._lastButtonIndex=--M,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),D.appendChild(this._toolbarContainer),D.appendChild(this._actionsContainer),D},removeToolbar:function(){for(var f in this._modes)this._modes.hasOwnProperty(f)&&(this._disposeButton(this._modes[f].button,this._modes[f].handler.enable,this._modes[f].handler),this._modes[f].handler.disable(),this._modes[f].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var g=0,D=this._actionButtons.length;g<D;g++)this._disposeButton(this._actionButtons[g].button,this._actionButtons[g].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(f,g,D,M,A){var j=f.type;this._modes[j]={},this._modes[j].handler=f,this._modes[j].button=this._createButton({type:j,title:A,className:M+"-"+j,container:g,callback:this._modes[j].handler.enable,context:this._modes[j].handler}),this._modes[j].buttonIndex=D,this._modes[j].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!B.MSStream},_createButton:function(f){var g=L.DomUtil.create("a",f.className||"",f.container),D=L.DomUtil.create("span","sr-only",f.container);g.href="#",g.appendChild(D),f.title&&(g.title=f.title,D.innerHTML=f.title),f.text&&(g.innerHTML=f.text,D.innerHTML=f.text);var M=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(g,"click",L.DomEvent.stopPropagation).on(g,"mousedown",L.DomEvent.stopPropagation).on(g,"dblclick",L.DomEvent.stopPropagation).on(g,"touchstart",L.DomEvent.stopPropagation).on(g,"click",L.DomEvent.preventDefault).on(g,M,f.callback,f.context),g},_disposeButton:function(f,g){var D=this._detectIOS()?"touchstart":"click";L.DomEvent.off(f,"click",L.DomEvent.stopPropagation).off(f,"mousedown",L.DomEvent.stopPropagation).off(f,"dblclick",L.DomEvent.stopPropagation).off(f,"touchstart",L.DomEvent.stopPropagation).off(f,"click",L.DomEvent.preventDefault).off(f,D,g)},_handlerActivated:function(f){this.disable(),this._activeMode=this._modes[f.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(f){var g,D,M,A,j=this._actionsContainer,V=this.getActions(f),Z=V.length;for(D=0,M=this._actionButtons.length;D<M;D++)this._disposeButton(this._actionButtons[D].button,this._actionButtons[D].callback);for(this._actionButtons=[];j.firstChild;)j.removeChild(j.firstChild);for(var _e=0;_e<Z;_e++)"enabled"in V[_e]&&!V[_e].enabled||(g=L.DomUtil.create("li","",j),A=this._createButton({title:V[_e].title,text:V[_e].text,container:g,callback:V[_e].callback,context:V[_e].context}),this._actionButtons.push({button:A,callback:V[_e].callback}))},_showActionsToolbar:function(){var f=this._activeMode.buttonIndex,g=this._lastButtonIndex,D=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=D+"px",0===f&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),f===g&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(f){this._map=f,this._popupPane=f._panes.popupPane,this._visible=!1,this._container=f.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(f){return this._container?(f.subtext=f.subtext||"",0!==f.subtext.length||this._singleLineLabel?f.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(f.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+f.subtext+"</span><br />":"")+"<span>"+f.text+"</span>",f.text||f.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(f){var g=this._map.latLngToLayerPoint(f),D=this._container;return this._container&&(this._visible&&(D.style.visibility="inherit"),L.DomUtil.setPosition(D,g)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(f){for(var g in this.options)this.options.hasOwnProperty(g)&&f[g]&&(f[g]=L.extend({},this.options[g],f[g]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,f)},getModeHandlers:function(f){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(f,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(f,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(f,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(f,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(f,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(f,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(f){return[{enabled:f.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:f.completeShape,context:f},{enabled:f.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:f.deleteLastVertex,context:f},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(f){for(var g in L.setOptions(this,f),this._modes)this._modes.hasOwnProperty(g)&&f.hasOwnProperty(g)&&this._modes[g].handler.setOptions(f[g])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(f){f.edit&&(void 0===f.edit.selectedPathOptions&&(f.edit.selectedPathOptions=this.options.edit.selectedPathOptions),f.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,f.edit.selectedPathOptions)),f.remove&&(f.remove=L.extend({},this.options.remove,f.remove)),f.poly&&(f.poly=L.extend({},this.options.poly,f.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,f),this._selectedFeatureCount=0},getModeHandlers:function(f){var g=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(f,{featureGroup:g,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(f,{featureGroup:g}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(f){var g=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return f.removeAllLayers&&g.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),g},addToolbar:function(f){var g=L.Toolbar.prototype.addToolbar.call(this,f);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),g},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var f,D=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(f=this._modes[L.EditToolbar.Edit.TYPE].button,D?L.DomUtil.removeClass(f,"leaflet-disabled"):L.DomUtil.addClass(f,"leaflet-disabled"),f.setAttribute("title",D?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(f=this._modes[L.EditToolbar.Delete.TYPE].button,D?L.DomUtil.removeClass(f,"leaflet-disabled"):L.DomUtil.addClass(f,"leaflet-disabled"),f.setAttribute("title",D?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(f,g){if(L.Handler.prototype.initialize.call(this,f),L.setOptions(this,g),this._featureGroup=g.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var D=L.version.split(".");1===parseInt(D[0],10)&&parseInt(D[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var f=this._map;f&&(f.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),f._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(f){this._revertLayer(f)},this)},save:function(){var f=new L.LayerGroup;this._featureGroup.eachLayer(function(g){g.edited&&(f.addLayer(g),g.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:f})},_backupLayer:function(f){var g=L.Util.stamp(f);this._uneditedLayerProps[g]||(f instanceof L.Polyline||f instanceof L.Polygon||f instanceof L.Rectangle?this._uneditedLayerProps[g]={latlngs:L.LatLngUtil.cloneLatLngs(f.getLatLngs())}:f instanceof L.Circle?this._uneditedLayerProps[g]={latlng:L.LatLngUtil.cloneLatLng(f.getLatLng()),radius:f.getRadius()}:(f instanceof L.Marker||f instanceof L.CircleMarker)&&(this._uneditedLayerProps[g]={latlng:L.LatLngUtil.cloneLatLng(f.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(f){var g=L.Util.stamp(f);f.edited=!1,this._uneditedLayerProps.hasOwnProperty(g)&&(f instanceof L.Polyline||f instanceof L.Polygon||f instanceof L.Rectangle?f.setLatLngs(this._uneditedLayerProps[g].latlngs):f instanceof L.Circle?(f.setLatLng(this._uneditedLayerProps[g].latlng),f.setRadius(this._uneditedLayerProps[g].radius)):(f instanceof L.Marker||f instanceof L.CircleMarker)&&f.setLatLng(this._uneditedLayerProps[g].latlng),f.fire("revert-edited",{layer:f}))},_enableLayerEdit:function(f){var g,D,M=f.layer||f.target||f;this._backupLayer(M),this.options.poly&&(D=L.Util.extend({},this.options.poly),M.options.poly=D),this.options.selectedPathOptions&&((g=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(g.color=M.options.color,g.fillColor=M.options.fillColor),M.options.original=L.extend({},M.options),M.options.editing=g),M instanceof L.Marker?(M.editing&&M.editing.enable(),M.dragging.enable(),M.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):M.editing.enable()},_disableLayerEdit:function(f){var g=f.layer||f.target||f;g.edited=!1,g.editing&&g.editing.disable(),delete g.options.editing,delete g.options.original,this._selectedPathOptions&&(g instanceof L.Marker?this._toggleMarkerHighlight(g):(g.setStyle(g.options.previousOptions),delete g.options.previousOptions)),g instanceof L.Marker?(g.dragging.disable(),g.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):g.editing.disable()},_onMouseMove:function(f){this._tooltip.updatePosition(f.latlng)},_onMarkerDragEnd:function(f){var g=f.target;g.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:g})},_onTouchMove:function(f){var D=this._map.mouseEventToLayerPoint(f.originalEvent.changedTouches[0]),M=this._map.layerPointToLatLng(D);f.target.setLatLng(M)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(f,g){if(L.Handler.prototype.initialize.call(this,f),L.Util.setOptions(this,g),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var D=L.version.split(".");1===parseInt(D[0],10)&&parseInt(D[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var f=this._map;f&&(f.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(f){this._deletableLayers.addLayer(f),f.fire("revert-deleted",{layer:f})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(f){this._removeLayer({layer:f})},this),this.save()},_enableLayerDelete:function(f){(f.layer||f.target||f).on("click",this._removeLayer,this)},_disableLayerDelete:function(f){var g=f.layer||f.target||f;g.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(g)},_removeLayer:function(f){var g=f.layer||f.target||f;this._deletableLayers.removeLayer(g),this._deletedLayers.addLayer(g),g.fire("deleted")},_onMouseMove:function(f){this._tooltip.updatePosition(f.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})},407:function(B,q){!function(P){"use strict";function f(r){var a,u,h,m;for(u=1,h=arguments.length;u<h;u++)for(a in m=arguments[u])r[a]=m[a];return r}var g=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function D(r,a){var u=Array.prototype.slice;if(r.bind)return r.bind.apply(r,u.call(arguments,1));var h=u.call(arguments,2);return function(){return r.apply(a,h.length?h.concat(u.call(arguments)):arguments)}}var M=0;function A(r){return r._leaflet_id=r._leaflet_id||++M,r._leaflet_id}function j(r,a,u){var h,m,y,b;return b=function(){h=!1,m&&(y.apply(u,m),m=!1)},y=function(){h?m=arguments:(r.apply(u,arguments),setTimeout(b,a),h=!0)},y}function V(r,a,u){var h=a[1],m=a[0],y=h-m;return r===h&&u?r:((r-m)%y+y)%y+m}function Z(){return!1}function _e(r,a){var u=Math.pow(10,void 0===a?6:a);return Math.round(r*u)/u}function cr(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function dn(r){return cr(r).split(/\s+/)}function Re(r,a){for(var u in Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?g(r.options):{}),a)r.options[u]=a[u];return r.options}function Vs(r,a,u){var h=[];for(var m in r)h.push(encodeURIComponent(u?m.toUpperCase():m)+"="+encodeURIComponent(r[m]));return(a&&-1!==a.indexOf("?")?"&":"?")+h.join("&")}var Rl=/\{ *([\w_-]+) *\}/g;function dr(r,a){return r.replace(Rl,function(u,h){var m=a[h];if(void 0===m)throw new Error("No value provided for variable "+u);return"function"==typeof m&&(m=m(a)),m})}var rt=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};function Ni(r,a){for(var u=0;u<r.length;u++)if(r[u]===a)return u;return-1}var hr="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Oi(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var fr=0;function pr(r){var a=+new Date,u=Math.max(0,16-(a-fr));return fr=a+u,window.setTimeout(r,u)}var mr=window.requestAnimationFrame||Oi("RequestAnimationFrame")||pr,gr=window.cancelAnimationFrame||Oi("CancelAnimationFrame")||Oi("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function ot(r,a,u){if(!u||mr!==pr)return mr.call(window,D(r,a));r.call(a)}function st(r){r&&gr.call(window,r)}var js={extend:f,create:g,bind:D,lastId:M,stamp:A,throttle:j,wrapNum:V,falseFn:Z,formatNum:_e,trim:cr,splitWords:dn,setOptions:Re,getParamString:Vs,template:dr,isArray:rt,indexOf:Ni,emptyImageUrl:hr,requestFn:mr,cancelFn:gr,requestAnimFrame:ot,cancelAnimFrame:st};function Pn(){}Pn.extend=function(r){var a=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=a.__super__=this.prototype,h=g(u);for(var m in h.constructor=a,a.prototype=h,this)Object.prototype.hasOwnProperty.call(this,m)&&"prototype"!==m&&"__super__"!==m&&(a[m]=this[m]);return r.statics&&(f(a,r.statics),delete r.statics),r.includes&&(function zs(r){if("undefined"!=typeof L&&L&&L.Mixin){r=rt(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(r.includes),f.apply(null,[h].concat(r.includes)),delete r.includes),h.options&&(r.options=f(g(h.options),r.options)),f(h,r),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,b=h._initHooks.length;y<b;y++)h._initHooks[y].call(this)}},a},Pn.include=function(r){return f(this.prototype,r),this},Pn.mergeOptions=function(r){return f(this.prototype.options,r),this},Pn.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),u="function"==typeof r?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};var Te={on:function(r,a,u){if("object"==typeof r)for(var h in r)this._on(h,r[h],a);else for(var m=0,y=(r=dn(r)).length;m<y;m++)this._on(r[m],a,u);return this},off:function(r,a,u){if(r)if("object"==typeof r)for(var h in r)this._off(h,r[h],a);else for(var m=0,y=(r=dn(r)).length;m<y;m++)this._off(r[m],a,u);else delete this._events;return this},_on:function(r,a,u){this._events=this._events||{};var h=this._events[r];h||(this._events[r]=h=[]),u===this&&(u=void 0);for(var m={fn:a,ctx:u},y=h,b=0,T=y.length;b<T;b++)if(y[b].fn===a&&y[b].ctx===u)return;y.push(m)},_off:function(r,a,u){var h,m,y;if(this._events&&(h=this._events[r])){if(!a){for(m=0,y=h.length;m<y;m++)h[m].fn=Z;return void delete this._events[r]}if(u===this&&(u=void 0),h)for(m=0,y=h.length;m<y;m++){var b=h[m];if(b.ctx===u&&b.fn===a)return b.fn=Z,this._firingCount&&(this._events[r]=h=h.slice()),void h.splice(m,1)}}},fire:function(r,a,u){if(!this.listens(r,u))return this;var h=f({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var m=this._events[r];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,b=m.length;y<b;y++){var T=m[y];T.fn.call(T.ctx||this,h)}this._firingCount--}}return u&&this._propagateEvent(h),this},listens:function(r,a){var u=this._events&&this._events[r];if(u&&u.length)return!0;if(a)for(var h in this._eventParents)if(this._eventParents[h].listens(r,a))return!0;return!1},once:function(r,a,u){if("object"==typeof r){for(var h in r)this.once(h,r[h],a);return this}var m=D(function(){this.off(r,a,u).off(r,m,u)},this);return this.on(r,a,u).on(r,m,u)},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[A(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[A(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,f({layer:r.target,propagatedFrom:r.target},r),!0)}};Te.addEventListener=Te.on,Te.removeEventListener=Te.clearAllEventListeners=Te.off,Te.addOneTimeEventListener=Te.once,Te.fireEvent=Te.fire,Te.hasEventListeners=Te.listens;var gi=Pn.extend(Te);function ee(r,a,u){this.x=u?Math.round(r):r,this.y=u?Math.round(a):a}var Us=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};function ge(r,a,u){return r instanceof ee?r:rt(r)?new ee(r[0],r[1]):null==r?r:"object"==typeof r&&"x"in r&&"y"in r?new ee(r.x,r.y):new ee(r,a,u)}function Se(r,a){if(r)for(var u=a?[r,a]:r,h=0,m=u.length;h<m;h++)this.extend(u[h])}function St(r,a){return!r||r instanceof Se?r:new Se(r,a)}function ht(r,a){if(r)for(var u=a?[r,a]:r,h=0,m=u.length;h<m;h++)this.extend(u[h])}function Ae(r,a){return r instanceof ht?r:new ht(r,a)}function ye(r,a,u){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,void 0!==u&&(this.alt=+u)}function xe(r,a,u){return r instanceof ye?r:rt(r)&&"object"!=typeof r[0]?3===r.length?new ye(r[0],r[1],r[2]):2===r.length?new ye(r[0],r[1]):null:null==r?r:"object"==typeof r&&"lat"in r?new ye(r.lat,"lng"in r?r.lng:r.lon,r.alt):void 0===a?null:new ye(r,a,u)}ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(r){return this.clone()._add(ge(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(ge(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new ee(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new ee(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Us(this.x),this.y=Us(this.y),this},distanceTo:function(r){var a=(r=ge(r)).x-this.x,u=r.y-this.y;return Math.sqrt(a*a+u*u)},equals:function(r){return(r=ge(r)).x===this.x&&r.y===this.y},contains:function(r){return r=ge(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+_e(this.x)+", "+_e(this.y)+")"}},Se.prototype={extend:function(r){return r=ge(r),this.min||this.max?(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)):(this.min=r.clone(),this.max=r.clone()),this},getCenter:function(r){return new ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return new ee(this.min.x,this.max.y)},getTopRight:function(){return new ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,u;return(r="number"==typeof r[0]||r instanceof ee?ge(r):St(r))instanceof Se?(a=r.min,u=r.max):a=u=r,a.x>=this.min.x&&u.x<=this.max.x&&a.y>=this.min.y&&u.y<=this.max.y},intersects:function(r){r=St(r);var a=this.min,u=this.max,h=r.min,m=r.max;return m.x>=a.x&&h.x<=u.x&&m.y>=a.y&&h.y<=u.y},overlaps:function(r){r=St(r);var a=this.min,u=this.max,h=r.min,m=r.max;return m.x>a.x&&h.x<u.x&&m.y>a.y&&h.y<u.y},isValid:function(){return!(!this.min||!this.max)}},ht.prototype={extend:function(r){var h,m,a=this._southWest,u=this._northEast;if(r instanceof ye)h=r,m=r;else{if(!(r instanceof ht))return r?this.extend(xe(r)||Ae(r)):this;if(m=r._northEast,!(h=r._southWest)||!m)return this}return a||u?(a.lat=Math.min(h.lat,a.lat),a.lng=Math.min(h.lng,a.lng),u.lat=Math.max(m.lat,u.lat),u.lng=Math.max(m.lng,u.lng)):(this._southWest=new ye(h.lat,h.lng),this._northEast=new ye(m.lat,m.lng)),this},pad:function(r){var a=this._southWest,u=this._northEast,h=Math.abs(a.lat-u.lat)*r,m=Math.abs(a.lng-u.lng)*r;return new ht(new ye(a.lat-h,a.lng-m),new ye(u.lat+h,u.lng+m))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){r="number"==typeof r[0]||r instanceof ye||"lat"in r?xe(r):Ae(r);var h,m,a=this._southWest,u=this._northEast;return r instanceof ht?(h=r.getSouthWest(),m=r.getNorthEast()):h=m=r,h.lat>=a.lat&&m.lat<=u.lat&&h.lng>=a.lng&&m.lng<=u.lng},intersects:function(r){r=Ae(r);var a=this._southWest,u=this._northEast,h=r.getSouthWest(),m=r.getNorthEast();return m.lat>=a.lat&&h.lat<=u.lat&&m.lng>=a.lng&&h.lng<=u.lng},overlaps:function(r){r=Ae(r);var a=this._southWest,u=this._northEast,h=r.getSouthWest(),m=r.getNorthEast();return m.lat>a.lat&&h.lat<u.lat&&m.lng>a.lng&&h.lng<u.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return!!r&&(r=Ae(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a))},isValid:function(){return!(!this._southWest||!this._northEast)}},ye.prototype={equals:function(r,a){return!!r&&(r=xe(r),Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng))<=(void 0===a?1e-9:a))},toString:function(r){return"LatLng("+_e(this.lat,r)+", "+_e(this.lng,r)+")"},distanceTo:function(r){return Yn.distance(this,xe(r))},wrap:function(){return Yn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,u=a/Math.cos(Math.PI/180*this.lat);return Ae([this.lat-a,this.lng-u],[this.lat+a,this.lng+u])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};var r,Vt={latLngToPoint:function(r,a){var u=this.projection.project(r),h=this.scale(a);return this.transformation._transform(u,h)},pointToLatLng:function(r,a){var u=this.scale(a),h=this.transformation.untransform(r,u);return this.projection.unproject(h)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,u=this.scale(r);return new Se(this.transformation.transform(a.min,u),this.transformation.transform(a.max,u))},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?V(r.lng,this.wrapLng,!0):r.lng;return new ye(this.wrapLat?V(r.lat,this.wrapLat,!0):r.lat,a,r.alt)},wrapLatLngBounds:function(r){var a=r.getCenter(),u=this.wrapLatLng(a),h=a.lat-u.lat,m=a.lng-u.lng;if(0===h&&0===m)return r;var y=r.getSouthWest(),b=r.getNorthEast();return new ht(new ye(y.lat-h,y.lng-m),new ye(b.lat-h,b.lng-m))}},Yn=f({},Vt,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var u=Math.PI/180,h=r.lat*u,m=a.lat*u,y=Math.sin((a.lat-r.lat)*u/2),b=Math.sin((a.lng-r.lng)*u/2),T=y*y+Math.cos(h)*Math.cos(m)*b*b,x=2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T));return this.R*x}}),Zs={R:6378137,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,u=this.MAX_LATITUDE,h=Math.max(Math.min(u,r.lat),-u),m=Math.sin(h*a);return new ee(this.R*r.lng*a,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(r){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:(r=6378137*Math.PI,new Se([-r,-r],[r,r]))};function Gs(r,a,u,h){if(rt(r))return this._a=r[0],this._b=r[1],this._c=r[2],void(this._d=r[3]);this._a=r,this._b=a,this._c=u,this._d=h}function _r(r,a,u,h){return new Gs(r,a,u,h)}Gs.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return r.x=(a=a||1)*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return new ee((r.x/(a=a||1)-this._b)/this._a,(r.y/a-this._d)/this._c)}};var $s=f({},Yn,{code:"EPSG:3857",projection:Zs,transformation:function(){var r=.5/(Math.PI*Zs.R);return _r(r,.5,-r,.5)}()}),Fl=f({},$s,{code:"EPSG:900913"});function Bl(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function To(r,a){var h,m,y,b,T,x,u="";for(h=0,y=r.length;h<y;h++){for(m=0,b=(T=r[h]).length;m<b;m++)u+=(m?"L":"M")+(x=T[m]).x+" "+x.y;u+=a?Fi?"z":"x":""}return u||"M0 0"}var Ws=document.documentElement.style,Ri="ActiveXObject"in window,_i=Ri&&!document.addEventListener,xo="msLaunchUri"in navigator&&!("documentMode"in document),qs=Qt("webkit"),yr=Qt("android"),jt=Qt("android 2")||Qt("android 3"),Hl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Vl=yr&&Qt("Google")&&Hl<537&&!("AudioNode"in window),Po=!!window.opera,Ys=!xo&&Qt("chrome"),Io=Qt("gecko")&&!qs&&!Po&&!Ri,So=!Ys&&Qt("safari"),jl=Qt("phantom"),zl="OTransition"in Ws,Ul=0===navigator.platform.indexOf("Win"),vr=Ri&&"transition"in Ws,Dr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!jt,ko="MozPerspective"in Ws,Et=!window.L_DISABLE_3D&&(vr||Dr||ko)&&!zl&&!jl,Kn="undefined"!=typeof orientation||Qt("mobile"),Zl=Kn&&qs,Ks=Kn&&Dr,hn=!window.PointerEvent&&window.MSPointerEvent,zt=!(!window.PointerEvent&&!hn),Ut=!window.L_NO_TOUCH&&(zt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Jn=Kn&&Po,Gl=Kn&&Io,In=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,yi=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",Z,a),window.removeEventListener("testPassiveEventSupport",Z,a)}catch(u){}return r}(),Js=!!document.createElement("canvas").getContext,Fi=!(!document.createElementNS||!Bl("svg").createSVGRect),wr=!Fi&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&"object"==typeof a.adj}catch(u){return!1}}();function Qt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var Sn={ie:Ri,ielt9:_i,edge:xo,webkit:qs,android:yr,android23:jt,androidStock:Vl,opera:Po,chrome:Ys,gecko:Io,safari:So,phantom:jl,opera12:zl,win:Ul,ie3d:vr,webkit3d:Dr,gecko3d:ko,any3d:Et,mobile:Kn,mobileWebkit:Zl,mobileWebkit3d:Ks,msPointer:hn,pointer:zt,touch:Ut,mobileOpera:Jn,mobileGecko:Gl,retina:In,passiveEvents:yi,canvas:Js,svg:Fi,vml:wr},Ao=hn?"MSPointerDown":"pointerdown",vi=hn?"MSPointerMove":"pointermove",No=hn?"MSPointerUp":"pointerup",Bi=hn?"MSPointerCancel":"pointercancel",Hi={},Qs=!1;function $l(r,a,u,h){return"touchstart"===a?function ih(r,a,u){var h=D(function(m){m.MSPOINTER_TYPE_TOUCH&&m.pointerType===m.MSPOINTER_TYPE_TOUCH&&bt(m),Er(m,a)});r["_leaflet_touchstart"+u]=h,r.addEventListener(Ao,h,!1),Qs||(document.addEventListener(Ao,Xs,!0),document.addEventListener(vi,Wl,!0),document.addEventListener(No,Ro,!0),document.addEventListener(Bi,Ro,!0),Qs=!0)}(r,u,h):"touchmove"===a?function ql(r,a,u){var h=function(m){m.pointerType===(m.MSPOINTER_TYPE_MOUSE||"mouse")&&0===m.buttons||Er(m,a)};r["_leaflet_touchmove"+u]=h,r.addEventListener(vi,h,!1)}(r,u,h):"touchend"===a&&function Yl(r,a,u){var h=function(m){Er(m,a)};r["_leaflet_touchend"+u]=h,r.addEventListener(No,h,!1),r.addEventListener(Bi,h,!1)}(r,u,h),this}function Xs(r){Hi[r.pointerId]=r}function Wl(r){Hi[r.pointerId]&&(Hi[r.pointerId]=r)}function Ro(r){delete Hi[r.pointerId]}function Er(r,a){for(var u in r.touches=[],Hi)r.touches.push(Hi[u]);r.changedTouches=[r],a(r)}var br=hn?"MSPointerDown":zt?"pointerdown":"touchstart",Cr=hn?"MSPointerUp":zt?"pointerup":"touchend",Qn="_leaflet_";var An,Xe,ia,Fo,oa,Vi=We(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ji=We(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ea="webkitTransition"===ji||"OTransition"===ji?ji+"End":"transitionend";function ta(r){return"string"==typeof r?document.getElementById(r):r}function Xn(r,a){var u=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!u||"auto"===u)&&document.defaultView){var h=document.defaultView.getComputedStyle(r,null);u=h?h[a]:null}return"auto"===u?null:u}function G(r,a,u){var h=document.createElement(r);return h.className=a||"",u&&u.appendChild(h),h}function ke(r){var a=r.parentNode;a&&a.removeChild(r)}function ve(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function kn(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Di(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function zi(r,a){if(void 0!==r.classList)return r.classList.contains(a);var u=pe(r);return u.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(u)}function F(r,a){if(void 0!==r.classList)for(var u=dn(a),h=0,m=u.length;h<m;h++)r.classList.add(u[h]);else if(!zi(r,a)){var y=pe(r);na(r,(y?y+" ":"")+a)}}function Fe(r,a){void 0!==r.classList?r.classList.remove(a):na(r,cr((" "+pe(r)+" ").replace(" "+a+" "," ")))}function na(r,a){void 0===r.className.baseVal?r.className=a:r.className.baseVal=a}function pe(r){return r.correspondingElement&&(r=r.correspondingElement),void 0===r.className.baseVal?r.className:r.className.baseVal}function ft(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&function te(r,a){var u=!1,h="DXImageTransform.Microsoft.Alpha";try{u=r.filters.item(h)}catch(m){if(1===a)return}a=Math.round(100*a),u?(u.Enabled=100!==a,u.Opacity=a):r.style.filter+=" progid:"+h+"(opacity="+a+")"}(r,a)}function We(r){for(var a=document.documentElement.style,u=0;u<r.length;u++)if(r[u]in a)return r[u];return!1}function ei(r,a,u){var h=a||new ee(0,0);r.style[Vi]=(vr?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(u?" scale("+u+")":"")}function Ze(r,a){r._leaflet_pos=a,Et?ei(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function ti(r){return r._leaflet_pos||new ee(0,0)}if("onselectstart"in document)An=function(){he(window,"selectstart",bt)},Xe=function(){X(window,"selectstart",bt)};else{var Ui=We(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);An=function(){if(Ui){var r=document.documentElement.style;ia=r[Ui],r[Ui]="none"}},Xe=function(){Ui&&(document.documentElement.style[Ui]=ia,ia=void 0)}}function ra(){he(window,"dragstart",bt)}function Zt(){X(window,"dragstart",bt)}function sa(r){for(;-1===r.tabIndex;)r=r.parentNode;!r.style||(Bo(),Fo=r,oa=r.style.outline,r.style.outline="none",he(window,"keydown",Bo))}function Bo(){!Fo||(Fo.style.outline=oa,Fo=void 0,oa=void 0,X(window,"keydown",Bo))}function aa(r){do{r=r.parentNode}while(!(r.offsetWidth&&r.offsetHeight||r===document.body));return r}function la(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Ql={TRANSFORM:Vi,TRANSITION:ji,TRANSITION_END:ea,get:ta,getStyle:Xn,create:G,remove:ke,empty:ve,toFront:kn,toBack:Di,hasClass:zi,addClass:F,removeClass:Fe,setClass:na,getClass:pe,setOpacity:ft,testProp:We,setTransform:ei,setPosition:Ze,getPosition:ti,disableTextSelection:An,enableTextSelection:Xe,disableImageDrag:ra,enableImageDrag:Zt,preventOutline:sa,restoreOutline:Bo,getSizedParentNode:aa,getScale:la};function he(r,a,u,h){if("object"==typeof a)for(var m in a)Ho(r,m,a[m],u);else for(var y=0,b=(a=dn(a)).length;y<b;y++)Ho(r,a[y],u,h);return this}var Be="_leaflet_events";function X(r,a,u,h){if("object"==typeof a)for(var m in a)we(r,m,a[m],u);else if(a)for(var y=0,b=(a=dn(a)).length;y<b;y++)we(r,a[y],u,h);else{for(var T in r[Be])we(r,T,r[Be][T]);delete r[Be]}return this}function Xl(){if(zt)return!(xo||So)}var ua={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ho(r,a,u,h){var m=a+A(u)+(h?"_"+A(h):"");if(r[Be]&&r[Be][m])return this;var y=function(T){return u.call(h||r,T||window.event)},b=y;zt&&0===a.indexOf("touch")?$l(r,a,y,m):Ut&&"dblclick"===a&&!Xl()?function Kl(r,a,u){var h,m,y=!1;function T(k){if(zt){if(!k.isPrimary||"mouse"===k.pointerType)return}else if(k.touches.length>1)return;var z=Date.now(),$=z-(h||z);m=k.touches?k.touches[0]:k,y=$>0&&$<=250,h=z}function x(k){if(y&&!m.cancelBubble){if(zt){if("mouse"===k.pointerType)return;var $,ie,z={};for(ie in m)z[ie]=($=m[ie])&&$.bind?$.bind(m):$;m=z}m.type="dblclick",m.button=0,a(m),h=null}}return r[Qn+br+u]=T,r[Qn+Cr+u]=x,r[Qn+"dblclick"+u]=a,r.addEventListener(br,T,!!yi&&{passive:!1}),r.addEventListener(Cr,x,!!yi&&{passive:!1}),r.addEventListener("dblclick",a,!1),this}(r,y,m):"addEventListener"in r?"touchstart"===a||"touchmove"===a||"wheel"===a||"mousewheel"===a?r.addEventListener(ua[a]||a,y,!!yi&&{passive:!1}):"mouseenter"===a||"mouseleave"===a?r.addEventListener(ua[a],y=function(T){T=T||window.event,ne(r,T)&&b(T)},!1):r.addEventListener(a,b,!1):"attachEvent"in r&&r.attachEvent("on"+a,y),r[Be]=r[Be]||{},r[Be][m]=y}function we(r,a,u,h){var m=a+A(u)+(h?"_"+A(h):""),y=r[Be]&&r[Be][m];if(!y)return this;zt&&0===a.indexOf("touch")?function Oo(r,a,u){var h=r["_leaflet_"+a+u];return"touchstart"===a?r.removeEventListener(Ao,h,!1):"touchmove"===a?r.removeEventListener(vi,h,!1):"touchend"===a&&(r.removeEventListener(No,h,!1),r.removeEventListener(Bi,h,!1)),this}(r,a,m):Ut&&"dblclick"===a&&!Xl()?function Jl(r,a){var h=r[Qn+Cr+a],m=r[Qn+"dblclick"+a];return r.removeEventListener(br,r[Qn+br+a],!!yi&&{passive:!1}),r.removeEventListener(Cr,h,!!yi&&{passive:!1}),r.removeEventListener("dblclick",m,!1),this}(r,m):"removeEventListener"in r?r.removeEventListener(ua[a]||a,y,!1):"detachEvent"in r&&r.detachEvent("on"+a,y),r[Be][m]=null}function wi(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,Vo(r),this}function Xt(r){return Ho(r,"wheel",wi),this}function ni(r){return he(r,"mousedown touchstart dblclick",wi),Ho(r,"click",Lr),this}function bt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function fn(r){return bt(r),wi(r),this}function ca(r,a){if(!a)return new ee(r.clientX,r.clientY);var u=la(a),h=u.boundingClientRect;return new ee((r.clientX-h.left)/u.x-a.clientLeft,(r.clientY-h.top)/u.y-a.clientTop)}var da=Ul&&Ys?2*window.devicePixelRatio:Io?window.devicePixelRatio:1;function Zi(r){return xo?r.wheelDeltaY/2:r.deltaY&&0===r.deltaMode?-r.deltaY/da:r.deltaY&&1===r.deltaMode?20*-r.deltaY:r.deltaY&&2===r.deltaMode?60*-r.deltaY:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?20*-r.detail:r.detail?r.detail/-32765*60:0}var Gi={};function Lr(r){Gi[r.type]=!0}function Vo(r){var a=Gi[r.type];return Gi[r.type]=!1,a}function ne(r,a){var u=a.relatedTarget;if(!u)return!0;try{for(;u&&u!==r;)u=u.parentNode}catch(h){return!1}return u!==r}var jo={on:he,off:X,stopPropagation:wi,disableScrollPropagation:Xt,disableClickPropagation:ni,preventDefault:bt,stop:fn,getMousePosition:ca,getWheelDelta:Zi,fakeStop:Lr,skipped:Vo,isExternalTarget:ne,addListener:he,removeListener:X},ha=gi.extend({run:function(r,a,u,h){this.stop(),this._el=r,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=ti(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=ot(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,u=1e3*this._duration;a<u?this._runFrame(this._easeOut(a/u),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var u=this._startPos.add(this._offset.multiplyBy(r));a&&u._round(),Ze(this._el,u),this.fire("step")},_complete:function(){st(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),ae=gi.extend({options:{crs:$s,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=Re(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=D(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),void 0!==a.zoom&&(this._zoom=this._limitZoom(a.zoom)),a.center&&void 0!==a.zoom&&this.setView(xe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ji&&Et&&!Jn&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,ea,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,u){return a=void 0===a?this._zoom:this._limitZoom(a),r=this._limitCenter(xe(r),a,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&!0!==u&&(void 0!==u.animate&&(u.zoom=f({animate:u.animate},u.zoom),u.pan=f({animate:u.animate,duration:u.duration},u.pan)),this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,u.zoom):this._tryAnimatedPan(r,u.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(r,a),this)},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return this.setZoom(this._zoom+(r=r||(Et?this.options.zoomDelta:1)),a)},zoomOut:function(r,a){return this.setZoom(this._zoom-(r=r||(Et?this.options.zoomDelta:1)),a)},setZoomAround:function(r,a,u){var h=this.getZoomScale(a),m=this.getSize().divideBy(2),b=(r instanceof ee?r:this.latLngToContainerPoint(r)).subtract(m).multiplyBy(1-1/h),T=this.containerPointToLatLng(m.add(b));return this.setView(T,a,{zoom:u})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Ae(r);var u=ge(a.paddingTopLeft||a.padding||[0,0]),h=ge(a.paddingBottomRight||a.padding||[0,0]),m=this.getBoundsZoom(r,!1,u.add(h));if((m="number"==typeof a.maxZoom?Math.min(a.maxZoom,m):m)===1/0)return{center:r.getCenter(),zoom:m};var y=h.subtract(u).divideBy(2),b=this.project(r.getSouthWest(),m),T=this.project(r.getNorthEast(),m);return{center:this.unproject(b.add(T).divideBy(2).add(y),m),zoom:m}},fitBounds:function(r,a){if(!(r=Ae(r)).isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(r,a);return this.setView(u.center,u.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(a=a||{},!(r=ge(r).round()).x&&!r.y)return this.fire("moveend");if(!0!==a.animate&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),!1!==a.animate){F(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,u,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,u){if(!1===(u=u||{}).animate||!Et)return this.setView(r,a,u);this._stop();var h=this.project(this.getCenter()),m=this.project(r),y=this.getSize(),b=this._zoom;r=xe(r),a=void 0===a?b:a;var T=Math.max(y.x,y.y),x=T*this.getZoomScale(b,a),k=m.distanceTo(h)||1,z=1.42,$=z*z;function ie(Ge){var Jo=(x*x-T*T+(Ge?-1:1)*$*$*k*k)/(2*(Ge?x:T)*$*k),La=Math.sqrt(Jo*Jo+1)-Jo;return La<1e-9?-18:Math.log(La)}function _n(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function yn(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}var je=ie(0);function qo(Ge){return T*(yn(je)*function vn(Ge){return _n(Ge)/yn(Ge)}(je+z*Ge)-_n(je))/$}var Bn=Date.now(),Yo=(ie(1)-je)/z,Ko=u.duration?1e3*u.duration:1e3*Yo*.8;return this._moveStart(!0,u.noMoveStart),function K(){var Ge=(Date.now()-Bn)/Ko,Fr=function du(Ge){return 1-Math.pow(1-Ge,1.5)}(Ge)*Yo;Ge<=1?(this._flyToFrame=ot(K,this),this._move(this.unproject(h.add(m.subtract(h).multiplyBy(qo(Fr)/k)),b),this.getScaleZoom(T/function Rr(Ge){return T*(yn(je)/yn(je+z*Ge))}(Fr),b),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}.call(this),this},flyToBounds:function(r,a){var u=this._getBoundsCenterZoom(r,a);return this.flyTo(u.center,u.zoom,a)},setMaxBounds:function(r){return(r=Ae(r)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var u=this.getCenter(),h=this._limitCenter(u,this._zoom,Ae(r));return u.equals(h)||this.panTo(h,a),this._enforcingBounds=!1,this},panInside:function(r,a){var u=ge((a=a||{}).paddingTopLeft||a.padding||[0,0]),h=ge(a.paddingBottomRight||a.padding||[0,0]),m=this.getCenter(),y=this.project(m),b=this.project(r),T=this.getPixelBounds(),x=T.getSize().divideBy(2),k=St([T.min.add(u),T.max.subtract(h)]);if(!k.contains(b)){this._enforcingBounds=!0;var z=y.subtract(b),$=ge(b.x+z.x,b.y+z.y);(b.x<k.min.x||b.x>k.max.x)&&($.x=y.x-z.x,z.x>0?$.x+=x.x-u.x:$.x-=x.x-h.x),(b.y<k.min.y||b.y>k.max.y)&&($.y=y.y-z.y,z.y>0?$.y+=x.y-u.y:$.y-=x.y-h.y),this.panTo(this.unproject($),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=f({animate:!1,pan:!0},!0===r?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),h=a.divideBy(2).round(),m=u.divideBy(2).round(),y=h.subtract(m);return y.x||y.y?(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(D(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:u})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=f({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=D(this._handleGeolocationResponse,this),u=D(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,u,r):navigator.geolocation.getCurrentPosition(a,u,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){var a=r.code,u=r.message||(1===a?"permission denied":2===a?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+u+"."})},_handleGeolocationResponse:function(r){var h=new ye(r.coords.latitude,r.coords.longitude),m=h.toBounds(2*r.coords.accuracy),y=this._locateOptions;if(y.setView){var b=this.getBoundsZoom(m);this.setView(h,y.maxZoom?Math.min(b,y.maxZoom):b)}var T={latlng:h,bounds:m,timestamp:r.timestamp};for(var x in r.coords)"number"==typeof r.coords[x]&&(T[x]=r.coords[x]);this.fire("locationfound",T)},addHandler:function(r,a){if(!a)return this;var u=this[r]=new a(this);return this._handlers.push(u),this.options[r]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(a){this._container._leaflet_id=void 0,this._containerId=void 0}var r;for(r in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(st(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[r].remove();for(r in this._panes)ke(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var h=G("div","leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),a||this._mapPane);return r&&(this._panes[r]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds();return new ht(this.unproject(r.getBottomLeft()),this.unproject(r.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,u){r=Ae(r),u=ge(u||[0,0]);var h=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),b=r.getNorthWest(),T=r.getSouthEast(),x=this.getSize().subtract(u),k=St(this.project(T,h),this.project(b,h)).getSize(),z=Et?this.options.zoomSnap:1,$=x.x/k.x,ie=x.y/k.y,_n=a?Math.max($,ie):Math.min($,ie);return h=this.getScaleZoom(_n,h),z&&(h=Math.round(h/(z/100))*(z/100),h=a?Math.ceil(h/z)*z:Math.floor(h/z)*z),Math.max(m,Math.min(y,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var u=this._getTopLeftPoint(r,a);return new Se(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(void 0===r?this.getZoom():r)},getPane:function(r){return"string"==typeof r?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var u=this.options.crs;return a=void 0===a?this._zoom:a,u.scale(r)/u.scale(a)},getScaleZoom:function(r,a){var u=this.options.crs,h=u.zoom(r*u.scale(a=void 0===a?this._zoom:a));return isNaN(h)?1/0:h},project:function(r,a){return a=void 0===a?this._zoom:a,this.options.crs.latLngToPoint(xe(r),a)},unproject:function(r,a){return a=void 0===a?this._zoom:a,this.options.crs.pointToLatLng(ge(r),a)},layerPointToLatLng:function(r){var a=ge(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){return this.project(xe(r))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(xe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Ae(r))},distance:function(r,a){return this.options.crs.distance(xe(r),xe(a))},containerPointToLayerPoint:function(r){return ge(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return ge(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(ge(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(r)))},mouseEventToContainerPoint:function(r){return ca(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ta(r);if(!a)throw new Error("Map container not found.");if(a._leaflet_id)throw new Error("Map container is already initialized.");he(a,"scroll",this._onScroll,this),this._containerId=A(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&Et,F(r,"leaflet-container"+(Ut?" leaflet-touch":"")+(In?" leaflet-retina":"")+(_i?" leaflet-oldie":"")+(So?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Xn(r,"position");"absolute"!==a&&"relative"!==a&&"fixed"!==a&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ze(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(F(r.markerPane,"leaflet-zoom-hide"),F(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a){Ze(this._mapPane,new ee(0,0));var u=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var h=this._zoom!==a;this._moveStart(h,!1)._move(r,a)._moveEnd(h),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,u){void 0===a&&(a=this._zoom);var h=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),(h||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return st(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Ze(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[A(this._container)]=this;var a=r?X:he;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),Et&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){st(this._resizeRequest),this._resizeRequest=ot(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var h,u=[],m="mouseout"===a||"mouseover"===a,y=r.target||r.srcElement,b=!1;y;){if((h=this._targets[A(y)])&&("click"===a||"preclick"===a)&&!r._simulated&&this._draggableMoved(h)){b=!0;break}if(h&&h.listens(a,!0)&&(m&&!ne(y,r)||(u.push(h),m))||y===this._container)break;y=y.parentNode}return!u.length&&!b&&!m&&ne(y,r)&&(u=[this]),u},_handleDOMEvent:function(r){if(this._loaded&&!Vo(r)){var a=r.type;("mousedown"===a||"keypress"===a||"keyup"===a||"keydown"===a)&&sa(r.target||r.srcElement),this._fireDOMEvent(r,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,u){if("click"===r.type){var h=f({},r);h.type="preclick",this._fireDOMEvent(h,h.type,u)}if(!r._stopped&&(u=(u||[]).concat(this._findEventTargets(r,a))).length){var m=u[0];"contextmenu"===a&&m.listens(a,!0)&&bt(r);var y={originalEvent:r};if("keypress"!==r.type&&"keydown"!==r.type&&"keyup"!==r.type){var b=m.getLatLng&&(!m._radius||m._radius<=10);y.containerPoint=b?this.latLngToContainerPoint(m.getLatLng()):this.mouseEventToContainerPoint(r),y.layerPoint=this.containerPointToLayerPoint(y.containerPoint),y.latlng=b?m.getLatLng():this.layerPointToLatLng(y.layerPoint)}for(var T=0;T<u.length;T++)if(u[T].fire(a,y,!0),y.originalEvent._stopped||!1===u[T].options.bubblingMouseEvents&&-1!==Ni(this._mouseEvents,a))return}},_draggableMoved:function(r){return(r=r.dragging&&r.dragging.enabled()?r:this).dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return ti(this._mapPane)||new ee(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){return(r&&void 0!==a?this._getNewPixelOrigin(r,a):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var u=this.getSize()._divideBy(2);return this.project(r,a)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,u){var h=this._getNewPixelOrigin(u,a);return this.project(r,a)._subtract(h)},_latLngBoundsToNewLayerBounds:function(r,a,u){var h=this._getNewPixelOrigin(u,a);return St([this.project(r.getSouthWest(),a)._subtract(h),this.project(r.getNorthWest(),a)._subtract(h),this.project(r.getSouthEast(),a)._subtract(h),this.project(r.getNorthEast(),a)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,u){if(!u)return r;var h=this.project(r,a),m=this.getSize().divideBy(2),y=new Se(h.subtract(m),h.add(m)),b=this._getBoundsOffset(y,u,a);return b.round().equals([0,0])?r:this.unproject(h.add(b),a)},_limitOffset:function(r,a){if(!a)return r;var u=this.getPixelBounds(),h=new Se(u.min.add(r),u.max.add(r));return r.add(this._getBoundsOffset(h,a))},_getBoundsOffset:function(r,a,u){var h=St(this.project(a.getNorthEast(),u),this.project(a.getSouthWest(),u)),m=h.min.subtract(r.min),y=h.max.subtract(r.max);return new ee(this._rebound(m.x,-y.x),this._rebound(m.y,-y.y))},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),u=this.getMaxZoom(),h=Et?this.options.zoomSnap:1;return h&&(r=Math.round(r/h)*h),Math.max(a,Math.min(u,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var u=this._getCenterOffset(r)._trunc();return!(!0!==(a&&a.animate)&&!this.getSize().contains(u)||(this.panBy(u,a),0))},_createAnimProxy:function(){var r=this._proxy=G("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var u=Vi,h=this._proxy.style[u];ei(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),h===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();ei(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||!1===u.animate||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(a),m=this._getCenterOffset(r)._divideBy(1-1/h);return!(!0!==u.animate&&!this.getSize().contains(m)||(ot(function(){this._moveStart(!0,!1)._animateZoom(r,a,!0)},this),0))},_animateZoom:function(r,a,u,h){!this._mapPane||(u&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,F(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:h}),setTimeout(D(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),ot(function(){this._moveEnd(!0)},this))}});var en=Pn.extend({options:{position:"topright"},initialize:function(r){Re(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),u=this.getPosition(),h=r._controlCorners[u];return F(a,"leaflet-control"),-1!==u.indexOf("bottom")?h.insertBefore(a,h.firstChild):h.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),kt=function(r){return new en(r)};ae.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",u=this._controlContainer=G("div",a+"control-container",this._container);function h(m,y){r[m+y]=G("div",a+m+" "+a+y,u)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)ke(this._controlCorners[r]);ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var At=en.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,u,h){return u<h?-1:h<u?1:0}},initialize:function(r,a,u){for(var h in Re(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,r)this._addLayer(r[h],h);for(h in a)this._addLayer(a[h],h,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return en.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(A(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){F(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(F(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=G("div",r),u=this.options.collapsed;a.setAttribute("aria-haspopup",!0),ni(a),Xt(a);var h=this._section=G("section",r+"-list");u&&(this._map.on("click",this.collapse,this),yr||he(a,{mouseenter:this.expand,mouseleave:this.collapse},this));var m=this._layersLink=G("a",r+"-toggle",a);m.href="#",m.title="Layers",Ut?(he(m,"click",fn),he(m,"click",this.expand,this)):he(m,"focus",this.expand,this),u||this.expand(),this._baseLayersList=G("div",r+"-base",h),this._separator=G("div",r+"-separator",h),this._overlaysList=G("div",r+"-overlays",h),a.appendChild(h)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&A(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,u){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:u}),this.options.sortLayers&&this._layers.sort(D(function(h,m){return this.options.sortFunction(h.layer,m.layer,h.name,m.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ve(this._baseLayersList),ve(this._overlaysList),this._layerControlInputs=[];var r,a,u,h,m=0;for(u=0;u<this._layers.length;u++)this._addItem(h=this._layers[u]),a=a||h.overlay,r=r||!h.overlay,m+=h.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(r=r&&m>1)?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(A(r.target)),u=a.overlay?"add"===r.type?"overlayadd":"overlayremove":"add"===r.type?"baselayerchange":null;u&&this._map.fire(u,a)},_createRadioElement:function(r,a){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=u,h.firstChild},_addItem:function(r){var h,a=document.createElement("label"),u=this._map.hasLayer(r.layer);r.overlay?((h=document.createElement("input")).type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=u):h=this._createRadioElement("leaflet-base-layers_"+A(this),u),this._layerControlInputs.push(h),h.layerId=A(r.layer),he(h,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+r.name;var y=document.createElement("div");return a.appendChild(y),y.appendChild(h),y.appendChild(m),(r.overlay?this._overlaysList:this._baseLayersList).appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){var a,u,r=this._layerControlInputs,h=[],m=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)u=this._getLayer((a=r[y]).layerId).layer,a.checked?h.push(u):a.checked||m.push(u);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<h.length;y++)this._map.hasLayer(h[y])||this._map.addLayer(h[y]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,u,r=this._layerControlInputs,h=this._map.getZoom(),m=r.length-1;m>=0;m--)u=this._getLayer((a=r[m]).layerId).layer,a.disabled=void 0!==u.options.minZoom&&h<u.options.minZoom||void 0!==u.options.maxZoom&&h>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),pa=en.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",u=G("div",a+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,a+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,a+"-out",u,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,u,h,m){var y=G("a",u,h);return y.innerHTML=r,y.href="#",y.title=a,y.setAttribute("role","button"),y.setAttribute("aria-label",a),ni(y),he(y,"click",fn),he(y,"click",m,this),he(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Fe(this._zoomInButton,a),Fe(this._zoomOutButton,a),(this._disabled||r._zoom===r.getMinZoom())&&F(this._zoomOutButton,a),(this._disabled||r._zoom===r.getMaxZoom())&&F(this._zoomInButton,a)}});ae.mergeOptions({zoomControl:!0}),ae.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new pa,this.addControl(this.zoomControl))});var ma=en.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",u=G("div",a),h=this.options;return this._addScales(h,a+"-line",u),r.on(h.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),u},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,u){r.metric&&(this._mScale=G("div",a,u)),r.imperial&&(this._iScale=G("div",a,u))},_update:function(){var r=this._map,a=r.getSize().y/2,u=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(u)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r);this._updateScale(this._mScale,a<1e3?a+" m":a/1e3+" km",a/r)},_updateImperial:function(r){var u,h,m,a=3.2808399*r;a>5280?(h=this._getRoundNum(u=a/5280),this._updateScale(this._iScale,h+" mi",h/u)):(m=this._getRoundNum(a),this._updateScale(this._iScale,m+" ft",m/a))},_updateScale:function(r,a,u){r.style.width=Math.round(this.options.maxWidth*u)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),u=r/a;return a*(u>=10?10:u>=5?5:u>=3?3:u>=2?2:1)}}),zo=en.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(r){Re(this,r),this._attributions={}},onAdd:function(r){for(var a in r.attributionControl=this,this._container=G("div","leaflet-control-attribution"),ni(this._container),r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),this._container},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var u=[];this.options.prefix&&u.push(this.options.prefix),r.length&&u.push(r.join(", ")),this._container.innerHTML=u.join(" | ")}}});ae.mergeOptions({attributionControl:!0}),ae.addInitHook(function(){this.options.attributionControl&&(new zo).addTo(this)});en.Layers=At,en.Zoom=pa,en.Scale=ma,en.Attribution=zo,kt.layers=function(r,a,u){return new At(r,a,u)},kt.zoom=function(r){return new pa(r)},kt.scale=function(r){return new ma(r)},kt.attribution=function(r){return new zo(r)};var ce=Pn.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ce.addTo=function(r,a){return r.addHandler(a,this),this};var Ei,sh={Events:Te},tu=Ut?"touchstart mousedown":"mousedown",ii={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Ce={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},nn=gi.extend({options:{clickTolerance:3},initialize:function(r,a,u,h){Re(this,h),this._element=r,this._dragStartTarget=a||r,this._preventOutline=u},enable:function(){this._enabled||(he(this._dragStartTarget,tu,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(nn._dragging===this&&this.finishDrag(),X(this._dragStartTarget,tu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(!r._simulated&&this._enabled&&(this._moved=!1,!zi(this._element,"leaflet-zoom-anim")&&!(nn._dragging||r.shiftKey||1!==r.which&&1!==r.button&&!r.touches)&&(nn._dragging=this,this._preventOutline&&sa(this._element),ra(),An(),!this._moving))){this.fire("down");var a=r.touches?r.touches[0]:r,u=aa(this._element);this._startPoint=new ee(a.clientX,a.clientY),this._parentScale=la(u),he(document,Ce[r.type],this._onMove,this),he(document,ii[r.type],this._onUp,this)}},_onMove:function(r){if(!r._simulated&&this._enabled){if(r.touches&&r.touches.length>1)return void(this._moved=!0);var a=r.touches&&1===r.touches.length?r.touches[0]:r,u=new ee(a.clientX,a.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,bt(r),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ti(this._element).subtract(u),F(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),F(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,st(this._animRequest),this._lastEvent=r,this._animRequest=ot(this._updatePosition,this,!0))}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Ze(this._element,this._newPos),this.fire("drag",r)},_onUp:function(r){r._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var r in Fe(document.body,"leaflet-dragging"),this._lastTarget&&(Fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ce)X(document,Ce[r],this._onMove,this),X(document,ii[r],this._onUp,this);Zt(),Xe(),this._moved&&this._moving&&(st(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,nn._dragging=!1}});function Mr(r,a){if(!a||!r.length)return r.slice();var u=a*a;return function pn(r,a){var u=r.length,m=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(u);m[0]=m[u-1]=1,ri(r,m,a,0,u-1);var y,b=[];for(y=0;y<u;y++)m[y]&&b.push(r[y]);return b}(r=function nu(r,a){for(var u=[r[0]],h=1,m=0,y=r.length;h<y;h++)ya(r[h],r[m])>a&&(u.push(r[h]),m=h);return m<y-1&&u.push(r[y-1]),u}(r,u),u)}function Tr(r,a,u){return Math.sqrt(Gt(r,a,u,!0))}function ri(r,a,u,h,m){var b,T,x,y=0;for(T=h+1;T<=m-1;T++)(x=Gt(r[T],r[h],r[m],!0))>y&&(b=T,y=x);y>u&&(a[b]=1,ri(r,a,u,h,b),ri(r,a,u,b,m))}function _a(r,a,u,h,m){var T,x,k,y=h?Ei:Nn(r,u),b=Nn(a,u);for(Ei=b;;){if(!(y|b))return[r,a];if(y&b)return!1;k=Nn(x=$i(r,a,T=y||b,u,m),u),T===y?(r=x,y=k):(a=x,b=k)}}function $i(r,a,u,h,m){var k,z,y=a.x-r.x,b=a.y-r.y,T=h.min,x=h.max;return 8&u?(k=r.x+y*(x.y-r.y)/b,z=x.y):4&u?(k=r.x+y*(T.y-r.y)/b,z=T.y):2&u?(k=x.x,z=r.y+b*(x.x-r.x)/y):1&u&&(k=T.x,z=r.y+b*(T.x-r.x)/y),new ee(k,z,m)}function Nn(r,a){var u=0;return r.x<a.min.x?u|=1:r.x>a.max.x&&(u|=2),r.y<a.min.y?u|=4:r.y>a.max.y&&(u|=8),u}function ya(r,a){var u=a.x-r.x,h=a.y-r.y;return u*u+h*h}function Gt(r,a,u,h){var k,m=a.x,y=a.y,b=u.x-m,T=u.y-y,x=b*b+T*T;return x>0&&((k=((r.x-m)*b+(r.y-y)*T)/x)>1?(m=u.x,y=u.y):k>0&&(m+=b*k,y+=T*k)),b=r.x-m,T=r.y-y,h?b*b+T*T:new ee(m,y)}function mn(r){return!rt(r[0])||"object"!=typeof r[0][0]&&void 0!==r[0][0]}function Uo(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(r)}var Nt={simplify:Mr,pointToSegmentDistance:Tr,closestPointOnSegment:function ga(r,a,u){return Gt(r,a,u)},clipSegment:_a,_getEdgeIntersection:$i,_getBitCode:Nn,_sqClosestPointOnSegment:Gt,isFlat:mn,_flat:Uo};function ct(r,a,u){var h,y,b,T,x,k,z,$,ie,m=[1,4,2,8];for(y=0,z=r.length;y<z;y++)r[y]._code=Nn(r[y],a);for(T=0;T<4;T++){for($=m[T],h=[],y=0,b=(z=r.length)-1;y<z;b=y++)k=r[b],(x=r[y])._code&$?k._code&$||((ie=$i(k,x,$,a,u))._code=Nn(ie,a),h.push(ie)):(k._code&$&&((ie=$i(k,x,$,a,u))._code=Nn(ie,a),h.push(ie)),h.push(x));r=h}return r}var at={clipPolygon:ct},rn={project:function(r){return new ee(r.lng,r.lat)},unproject:function(r){return new ye(r.y,r.x)},bounds:new Se([-180,-90],[180,90])},gn={R:6378137,R_MINOR:6356752.314245179,bounds:new Se([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(r){var a=Math.PI/180,u=this.R,h=r.lat*a,m=this.R_MINOR/u,y=Math.sqrt(1-m*m),b=y*Math.sin(h),T=Math.tan(Math.PI/4-h/2)/Math.pow((1-b)/(1+b),y/2);return h=-u*Math.log(Math.max(T,1e-10)),new ee(r.lng*a*u,h)},unproject:function(r){for(var k,a=180/Math.PI,u=this.R,h=this.R_MINOR/u,m=Math.sqrt(1-h*h),y=Math.exp(-r.y/u),b=Math.PI/2-2*Math.atan(y),T=0,x=.1;T<15&&Math.abs(x)>1e-7;T++)k=m*Math.sin(b),k=Math.pow((1-k)/(1+k),m/2),b+=x=Math.PI/2-2*Math.atan(y*k)-b;return new ye(b*a,r.x*a/u)}},Ot={LonLat:rn,Mercator:gn,SphericalMercator:Zs},xr=f({},Yn,{code:"EPSG:3395",projection:gn,transformation:function(){var r=.5/(Math.PI*gn.R);return _r(r,.5,-r,.5)}()}),Pr=f({},Yn,{code:"EPSG:4326",projection:rn,transformation:_r(1/180,1,-1/180,.5)}),Wi=f({},Vt,{projection:rn,transformation:_r(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var u=a.lng-r.lng,h=a.lat-r.lat;return Math.sqrt(u*u+h*h)},infinite:!0});Vt.Earth=Yn,Vt.EPSG3395=xr,Vt.EPSG3857=$s,Vt.EPSG900913=Fl,Vt.EPSG4326=Pr,Vt.Simple=Wi;var pt=gi.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[A(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[A(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var u=this.getEvents();a.on(u,this),this.once("remove",function(){a.off(u,this)},this)}this.onAdd(a),this.getAttribution&&a.attributionControl&&a.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),a.fire("layeradd",{layer:this})}}});ae.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=A(r);return this._layers[a]||(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r)),this},removeLayer:function(r){var a=A(r);return this._layers[a]?(this._loaded&&r.onRemove(this),r.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(r.getAttribution()),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return!!r&&A(r)in this._layers},eachLayer:function(r,a){for(var u in this._layers)r.call(a,this._layers[u]);return this},_addLayers:function(r){for(var a=0,u=(r=r?rt(r)?r:[r]:[]).length;a<u;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[A(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=A(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,u=this._getZoomSpan();for(var h in this._zoomBoundLayers){var m=this._zoomBoundLayers[h].options;r=void 0===m.minZoom?r:Math.min(r,m.minZoom),a=void 0===m.maxZoom?a:Math.max(a,m.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Rt=pt.extend({initialize:function(r,a){var u,h;if(Re(this,a),this._layers={},r)for(u=0,h=r.length;u<h;u++)this.addLayer(r[u])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){return!!r&&("number"==typeof r?r:this.getLayerId(r))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var u,h,a=Array.prototype.slice.call(arguments,1);for(u in this._layers)(h=this._layers[u])[r]&&h[r].apply(h,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var u in this._layers)r.call(a,this._layers[u]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return A(r)}}),bi=Rt.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Rt.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Rt.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new ht;for(var a in this._layers){var u=this._layers[a];r.extend(u.getBounds?u.getBounds():u.getLatLng())}return r}}),H=Pn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(r){Re(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var u=this._getIconUrl(r);if(!u){if("icon"===r)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(u,a&&"IMG"===a.tagName?a:null);return this._setIconStyles(h,r),h},_setIconStyles:function(r,a){var u=this.options,h=u[a+"Size"];"number"==typeof h&&(h=[h,h]);var m=ge(h),y=ge("shadow"===a&&u.shadowAnchor||u.iconAnchor||m&&m.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(u.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),m&&(r.style.width=m.x+"px",r.style.height=m.y+"px")},_createImg:function(r,a){return(a=a||document.createElement("img")).src=r,a},_getIconUrl:function(r){return In&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});var Me=H.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return Me.imagePath||(Me.imagePath=this._detectIconPath()),(this.options.imagePath||Me.imagePath)+H.prototype._getIconUrl.call(this,r)},_detectIconPath:function(){var r=G("div","leaflet-default-icon-path",document.body),a=Xn(r,"background-image")||Xn(r,"backgroundImage");return document.body.removeChild(r),null===a||0!==a.indexOf("url")?"":a.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),mt=ce.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new nn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),F(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,u=a._map,h=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=ti(a._icon),b=u.getPixelBounds(),T=u.getPixelOrigin(),x=St(b.min._subtract(T).add(m),b.max._subtract(T).subtract(m));if(!x.contains(y)){var k=ge((Math.max(x.max.x,y.x)-x.max.x)/(b.max.x-x.max.x)-(Math.min(x.min.x,y.x)-x.min.x)/(b.min.x-x.min.x),(Math.max(x.max.y,y.y)-x.max.y)/(b.max.y-x.max.y)-(Math.min(x.min.y,y.y)-x.min.y)/(b.min.y-x.min.y)).multiplyBy(h);u.panBy(k,{animate:!1}),this._draggable._newPos._add(k),this._draggable._startPos._add(k),Ze(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=ot(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(st(this._panRequest),this._panRequest=ot(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,u=a._shadow,h=ti(a._icon),m=a._map.layerPointToLatLng(h);u&&Ze(u,h),a._latlng=m,r.latlng=m,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){st(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),on=pt.extend({options:{icon:new Me,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){Re(this,a),this._latlng=xe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=xe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=r.icon.createIcon(this._icon),h=!1;u!==this._icon&&(this._icon&&this._removeIcon(),h=!0,r.title&&(u.title=r.title),"IMG"===u.tagName&&(u.alt=r.alt||"")),F(u,a),r.keyboard&&(u.tabIndex="0"),this._icon=u,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var m=r.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(F(m,a),m.alt=""),this._shadow=m,r.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ke(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Ze(this._icon,r),this._shadow&&Ze(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(F(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),mt)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new mt(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&ft(this._icon,r),this._shadow&&ft(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var gt=pt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return Re(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Ne=gt.extend({options:{fill:!0,radius:10},initialize:function(r,a){Re(this,a),this._latlng=xe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=xe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return gt.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,u=this._clickTolerance(),h=[r+u,a+u];this._pxBounds=new Se(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var On=Ne.extend({initialize:function(r,a,u){if("number"==typeof a&&(a=f({},u,{radius:a})),Re(this,a),this._latlng=xe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ht(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:gt.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,u=this._map,h=u.options.crs;if(h.distance===Yn.distance){var m=Math.PI/180,y=this._mRadius/Yn.R/m,b=u.project([a+y,r]),T=u.project([a-y,r]),x=b.add(T).divideBy(2),k=u.unproject(x).lat,z=Math.acos((Math.cos(y*m)-Math.sin(a*m)*Math.sin(k*m))/(Math.cos(a*m)*Math.cos(k*m)))/m;(isNaN(z)||0===z)&&(z=y/Math.cos(Math.PI/180*a)),this._point=x.subtract(u.getPixelOrigin()),this._radius=isNaN(z)?0:x.x-u.project([k,r-z]).x,this._radiusY=x.y-b.y}else{var $=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint($).x}this._updateBounds()}});var Bt=gt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){Re(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var m,y,a=1/0,u=null,h=Gt,b=0,T=this._parts.length;b<T;b++)for(var x=this._parts[b],k=1,z=x.length;k<z;k++){var $=h(r,m=x[k-1],y=x[k],!0);$<a&&(a=$,u=h(r,m,y))}return u&&(u.distance=Math.sqrt(a)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var r,a,u,h,m,y,b,T=this._rings[0],x=T.length;if(!x)return null;for(r=0,a=0;r<x-1;r++)a+=T[r].distanceTo(T[r+1])/2;if(0===a)return this._map.layerPointToLatLng(T[0]);for(r=0,h=0;r<x-1;r++)if((h+=u=(m=T[r]).distanceTo(y=T[r+1]))>a)return this._map.layerPointToLatLng([y.x-(b=(h-a)/u)*(y.x-m.x),y.y-b*(y.y-m.y)])},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=xe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ht,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],u=mn(r),h=0,m=r.length;h<m;h++)u?(a[h]=xe(r[h]),this._bounds.extend(a[h])):a[h]=this._convertLatLngs(r[h]);return a},_project:function(){var r=new Se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new ee(r,r);this._pxBounds=new Se([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)])},_projectLatlngs:function(r,a,u){var y,b,m=r.length;if(r[0]instanceof ye){for(b=[],y=0;y<m;y++)b[y]=this._map.latLngToLayerPoint(r[y]),u.extend(b[y]);a.push(b)}else for(y=0;y<m;y++)this._projectLatlngs(r[y],a,u)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(r)){if(this.options.noClip)return void(this._parts=this._rings);var u,h,m,y,b,T,x,a=this._parts;for(u=0,m=0,y=this._rings.length;u<y;u++)for(h=0,b=(x=this._rings[u]).length;h<b-1;h++)(T=_a(x[h],x[h+1],r,h,!0))&&(a[m]=a[m]||[],a[m].push(T[0]),(T[1]!==x[h+1]||h===b-2)&&(a[m].push(T[1]),m++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,u=0,h=r.length;u<h;u++)r[u]=Mr(r[u],a)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var u,h,m,y,b,T,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(u=0,y=this._parts.length;u<y;u++)for(h=0,m=(b=(T=this._parts[u]).length)-1;h<b;m=h++)if((a||0!==h)&&Tr(r,T[m],T[h])<=x)return!0;return!1}});Bt._flat=Uo;var Rn=Bt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var r,a,u,h,m,y,b,T,k=this._rings[0],z=k.length;if(!z)return null;for(y=b=T=0,r=0,a=z-1;r<z;a=r++)b+=((u=k[r]).x+(h=k[a]).x)*(m=u.y*h.x-h.y*u.x),T+=(u.y+h.y)*m,y+=3*m;return this._map.layerPointToLatLng(0===y?k[0]:[b/y,T/y])},_convertLatLngs:function(r){var a=Bt.prototype._convertLatLngs.call(this,r),u=a.length;return u>=2&&a[0]instanceof ye&&a[0].equals(a[u-1])&&a.pop(),a},_setLatLngs:function(r){Bt.prototype._setLatLngs.call(this,r),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,u=new ee(a,a);if(r=new Se(r.min.subtract(u),r.max.add(u)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(r)){if(this.options.noClip)return void(this._parts=this._rings);for(var y,h=0,m=this._rings.length;h<m;h++)(y=ct(this._rings[h],r,!0)).length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var u,h,m,y,b,T,x,k,a=!1;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,x=this._parts.length;y<x;y++)for(b=0,T=(k=(u=this._parts[y]).length)-1;b<k;T=b++)(h=u[b]).y>r.y!=(m=u[T]).y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(a=!a);return a||Bt.prototype._containsPoint.call(this,r,!0)}});var He=bi.extend({initialize:function(r,a){Re(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var u,h,m,a=rt(r)?r:r.features;if(a){for(u=0,h=a.length;u<h;u++)((m=a[u]).geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var b=oi(r,y);return b?(b.feature=_t(r),b.defaultOptions=b.options,this.resetStyle(b),y.onEachFeature&&y.onEachFeature(r,b),this.addLayer(b)):this},resetStyle:function(r){return void 0===r?this.eachLayer(this.resetStyle,this):(r.options=f({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&("function"==typeof a&&(a=a(r.feature)),r.setStyle(a))}});function oi(r,a){var T,x,k,z,u="Feature"===r.type?r.geometry:r,h=u?u.coordinates:null,m=[],y=a&&a.pointToLayer,b=a&&a.coordsToLatLng||Ct;if(!h&&!u)return null;switch(u.type){case"Point":return si(y,r,T=b(h),a);case"MultiPoint":for(k=0,z=h.length;k<z;k++)T=b(h[k]),m.push(si(y,r,T,a));return new bi(m);case"LineString":case"MultiLineString":return x=Le(h,"LineString"===u.type?0:1,b),new Bt(x,a);case"Polygon":case"MultiPolygon":return x=Le(h,"Polygon"===u.type?1:2,b),new Rn(x,a);case"GeometryCollection":for(k=0,z=u.geometries.length;k<z;k++){var $=oi({geometry:u.geometries[k],type:"Feature",properties:r.properties},a);$&&m.push($)}return new bi(m);default:throw new Error("Invalid GeoJSON object.")}}function si(r,a,u,h){return r?r(a,u):new on(u,h&&h.markersInheritOptions&&h)}function Ct(r){return new ye(r[1],r[0],r[2])}function Le(r,a,u){for(var b,h=[],m=0,y=r.length;m<y;m++)b=a?Le(r[m],a-1,u):(u||Ct)(r[m]),h.push(b);return h}function Zo(r,a){return a="number"==typeof a?a:6,void 0!==r.alt?[_e(r.lng,a),_e(r.lat,a),_e(r.alt,a)]:[_e(r.lng,a),_e(r.lat,a)]}function Ir(r,a,u,h){for(var m=[],y=0,b=r.length;y<b;y++)m.push(a?Ir(r[y],a-1,u,h):Zo(r[y],h));return!a&&u&&m.push(m[0]),m}function dt(r,a){return r.feature?f({},r.feature,{geometry:a}):_t(a)}function _t(r){return"Feature"===r.type||"FeatureCollection"===r.type?r:{type:"Feature",properties:{},geometry:r}}var Yi={toGeoJSON:function(r){return dt(this,{type:"Point",coordinates:Zo(this.getLatLng(),r)})}};function Ki(r,a){return new He(r,a)}on.include(Yi),On.include(Yi),Ne.include(Yi),Bt.include({toGeoJSON:function(r){var a=!mn(this._latlngs);return dt(this,{type:(a?"Multi":"")+"LineString",coordinates:Ir(this._latlngs,a?1:0,!1,r)})}}),Rn.include({toGeoJSON:function(r){var a=!mn(this._latlngs),u=a&&!mn(this._latlngs[0]),h=Ir(this._latlngs,u?2:a?1:0,!0,r);return a||(h=[h]),dt(this,{type:(u?"Multi":"")+"Polygon",coordinates:h})}}),Rt.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(u){a.push(u.toGeoJSON(r).geometry.coordinates)}),dt(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint(r);var u="GeometryCollection"===a,h=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(r);if(u)h.push(y.geometry);else{var b=_t(y);"FeatureCollection"===b.type?h.push.apply(h,b.features):h.push(b)}}}),u?dt(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});var Sr=Ki,yt=pt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,u){this._url=r,this._bounds=Ae(a),Re(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(F(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&kn(this._image),this},bringToBack:function(){return this._map&&Di(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Ae(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r="IMG"===this._url.tagName,a=this._image=r?this._url:G("img");F(a,"leaflet-image-layer"),this._zoomAnimated&&F(a,"leaflet-zoom-animated"),this.options.className&&F(a,this.options.className),a.onselectstart=Z,a.onmousemove=Z,a.onload=D(this.fire,this,"load"),a.onerror=D(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(a.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r?this._url=a.src:(a.src=this._url,a.alt=this.options.alt)},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ei(this._image,u,a)},_reset:function(){var r=this._image,a=new Se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=a.getSize();Ze(r,a.min),r.style.width=u.x+"px",r.style.height=u.y+"px"},_updateOpacity:function(){ft(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)}}),ru=yt.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var r="VIDEO"===this._url.tagName,a=this._image=r?this._url:G("video");if(F(a,"leaflet-image-layer"),this._zoomAnimated&&F(a,"leaflet-zoom-animated"),this.options.className&&F(a,this.options.className),a.onselectstart=Z,a.onmousemove=Z,a.onloadeddata=D(this.fire,this,"load"),r){for(var u=a.getElementsByTagName("source"),h=[],m=0;m<u.length;m++)h.push(u[m].src);this._url=u.length>0?h:[a.src]}else{rt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted;for(var y=0;y<this._url.length;y++){var b=G("source");b.src=this._url[y],a.appendChild(b)}}}});var va=yt.extend({_initImage:function(){var r=this._image=this._url;F(r,"leaflet-image-layer"),this._zoomAnimated&&F(r,"leaflet-zoom-animated"),this.options.className&&F(r,this.options.className),r.onselectstart=Z,r.onmousemove=Z}});var Fn=pt.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(r,a){Re(this,r),this._source=a},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&ft(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&ft(this._container,1),this.bringToFront()},onRemove:function(r){r._fadeAnimated?(ft(this._container,0),this._removeTimeout=setTimeout(D(ke,void 0,this._container),200)):ke(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=xe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&kn(this._container),this},bringToBack:function(){return this._map&&Di(this._container),this},_prepareOpen:function(r,a,u){if(a instanceof pt||(u=a,a=r),a instanceof bi)for(var h in r._layers){a=r._layers[h];break}if(!u)if(a.getCenter)u=a.getCenter();else{if(!a.getLatLng)throw new Error("Unable to get source layer LatLng.");u=a.getLatLng()}return this._source=a,this.update(),u},_updateContent:function(){if(this._content){var r=this._contentNode,a="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof a)r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=ge(this.options.offset),u=this._getAnchor();this._zoomAnimated?Ze(this._container,r.add(u)):a=a.add(r).add(u);var h=this._containerBottom=-a.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=h+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}}),Ji=Fn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r.openPopup(this),this},onAdd:function(r){Fn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gt||this._source.on("preclick",wi))},onRemove:function(r){Fn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gt||this._source.off("preclick",wi))},getEvents:function(){var r=Fn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this._close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var r="leaflet-popup",a=this._container=G("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=G("div",r+"-content-wrapper",a);if(this._contentNode=G("div",r+"-content",u),ni(a),Xt(this._contentNode),he(a,"contextmenu",wi),this._tipContainer=G("div",r+"-tip-container",a),this._tip=G("div",r+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=G("a",r+"-close-button",a);h.href="#close",h.innerHTML="&#215;",he(h,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var u=r.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),a.width=u+1+"px",a.whiteSpace="",a.height="";var m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&r.offsetHeight>m?(a.height=m+"px",F(r,y)):Fe(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),u=this._getAnchor();Ze(this._container,a.add(u))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var r=this._map,a=parseInt(Xn(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+a,h=this._containerWidth,m=new ee(this._containerLeft,-u-this._containerBottom);m._add(ti(this._container));var y=r.layerPointToContainerPoint(m),b=ge(this.options.autoPanPadding),T=ge(this.options.autoPanPaddingTopLeft||b),x=ge(this.options.autoPanPaddingBottomRight||b),k=r.getSize(),z=0,$=0;y.x+h+x.x>k.x&&(z=y.x+h-k.x+x.x),y.x-z-T.x<0&&(z=y.x-T.x),y.y+u+x.y>k.y&&($=y.y+u-k.y+x.y),y.y-$-T.y<0&&($=y.y-T.y),(z||$)&&r.fire("autopanstart").panBy([z,$])}},_onCloseButtonClick:function(r){this._close(),fn(r)},_getAnchor:function(){return ge(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});ae.mergeOptions({closePopupOnClick:!0}),ae.include({openPopup:function(r,a,u){return r instanceof Ji||(r=new Ji(u).setContent(r)),a&&r.setLatLng(a),this.hasLayer(r)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=r,this.addLayer(r))},closePopup:function(r){return(!r||r===this._popup)&&(r=this._popup,this._popup=null),r&&this.removeLayer(r),this}}),pt.include({bindPopup:function(r,a){return r instanceof Ji?(Re(r,a),this._popup=r,r._source=this):((!this._popup||a)&&(this._popup=new Ji(a,this)),this._popup.setContent(r)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r,a){return this._popup&&this._map&&(a=this._popup._prepareOpen(this,r,a),this._map.openPopup(this._popup,a)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(r){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(r)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){var a=r.layer||r.target;if(this._popup&&this._map){if(fn(r),a instanceof gt)return void this.openPopup(r.layer||r.target,r.latlng);this._map.hasLayer(this._popup)&&this._popup._source===a?this.closePopup():this.openPopup(a,r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){13===r.originalEvent.keyCode&&this._openPopup(r)}});var Qi=Fn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(r){Fn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(r){Fn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var r=Fn.prototype.getEvents.call(this);return Ut&&!this.options.permanent&&(r.preclick=this._close),r},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=G("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,u,h=this._map,m=this._container,y=h.latLngToContainerPoint(h.getCenter()),b=h.layerPointToContainerPoint(r),T=this.options.direction,x=m.offsetWidth,k=m.offsetHeight,z=ge(this.options.offset),$=this._getAnchor();"top"===T?(a=x/2,u=k):"bottom"===T?(a=x/2,u=0):"center"===T?(a=x/2,u=k/2):"right"===T?(a=0,u=k/2):"left"===T?(a=x,u=k/2):b.x<y.x?(T="right",a=0,u=k/2):(T="left",a=x+2*(z.x+$.x),u=k/2),r=r.subtract(ge(a,u,!0)).add(z).add($),Fe(m,"leaflet-tooltip-right"),Fe(m,"leaflet-tooltip-left"),Fe(m,"leaflet-tooltip-top"),Fe(m,"leaflet-tooltip-bottom"),F(m,"leaflet-tooltip-"+T),Ze(m,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&ft(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return ge(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});ae.include({openTooltip:function(r,a,u){return r instanceof Qi||(r=new Qi(u).setContent(r)),a&&r.setLatLng(a),this.hasLayer(r)?this:this.addLayer(r)},closeTooltip:function(r){return r&&this.removeLayer(r),this}}),pt.include({bindTooltip:function(r,a){return r instanceof Qi?(Re(r,a),this._tooltip=r,r._source=this):((!this._tooltip||a)&&(this._tooltip=new Qi(a,this)),this._tooltip.setContent(r)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(r||!this._tooltipHandlersAdded){var a=r?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),Ut&&(u.click=this._openTooltip)),this[a](u),this._tooltipHandlersAdded=!r}},openTooltip:function(r,a){return this._tooltip&&this._map&&(a=this._tooltip._prepareOpen(this,r,a),this._map.openTooltip(this._tooltip,a),this._tooltip.options.interactive&&this._tooltip._container&&(F(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Fe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(r){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(r)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_openTooltip:function(r){!this._tooltip||!this._map||this.openTooltip(r.layer||r.target,this._tooltip.options.sticky?r.latlng:void 0)},_moveTooltip:function(r){var u,h,a=r.latlng;this._tooltip.options.sticky&&r.originalEvent&&(u=this._map.mouseEventToContainerPoint(r.originalEvent),h=this._map.containerPointToLayerPoint(u),a=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(a)}});var su=H.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&"DIV"===r.tagName?r:document.createElement("div"),u=this.options;if(u.html instanceof Element?(ve(a),a.appendChild(u.html)):a.innerHTML=!1!==u.html?u.html:"",u.bgPos){var h=ge(u.bgPos);a.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});H.Default=Me;var kr=pt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Kn,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){Re(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),ke(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(kn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=j(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof ee?r:new ee(r,r)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var y,a=this.getPane().children,u=-r(-1/0,1/0),h=0,m=a.length;h<m;h++)y=a[h].style.zIndex,a[h]!==this._container&&y&&(u=r(u,+y));isFinite(u)&&(this.options.zIndex=u+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!_i){ft(this._container,this.options.opacity);var r=+new Date,a=!1,u=!1;for(var h in this._tiles){var m=this._tiles[h];if(m.current&&m.loaded){var y=Math.min(1,(r-m.loaded)/200);ft(m.el,y),y<1?a=!0:(m.active?u=!0:this._onOpaqueTile(m),m.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),a&&(st(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this))}},_onOpaqueTile:Z,_initContainer:function(){this._container||(this._container=G("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(void 0!==r){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===r?(this._levels[u].el.style.zIndex=a-Math.abs(r-u),this._onUpdateLevel(u)):(ke(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var h=this._levels[r],m=this._map;return h||((h=this._levels[r]={}).el=G("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=a,h.origin=m.project(m.unproject(m.getPixelOrigin()),r).round(),h.zoom=r,this._setZoomTransform(h,m.getCenter(),m.getZoom()),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:Z,_onRemoveLevel:Z,_onCreateLevel:Z,_pruneTiles:function(){if(this._map){var r,a,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom)return void this._removeAllTiles();for(r in this._tiles)(a=this._tiles[r]).retain=a.current;for(r in this._tiles)if((a=this._tiles[r]).current&&!a.active){var h=a.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)ke(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,u,h){var m=Math.floor(r/2),y=Math.floor(a/2),b=u-1,T=new ee(+m,+y);T.z=+b;var x=this._tileCoordsToKey(T),k=this._tiles[x];return k&&k.active?(k.retain=!0,!0):(k&&k.loaded&&(k.retain=!0),b>h&&this._retainParent(m,y,b,h))},_retainChildren:function(r,a,u,h){for(var m=2*r;m<2*r+2;m++)for(var y=2*a;y<2*a+2;y++){var b=new ee(m,y);b.z=u+1;var T=this._tileCoordsToKey(b),x=this._tiles[T];x&&x.active?x.retain=!0:(x&&x.loaded&&(x.retain=!0),u+1<h&&this._retainChildren(m,y,u+1,h))}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return void 0!==a.minNativeZoom&&r<a.minNativeZoom?a.minNativeZoom:void 0!==a.maxNativeZoom&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,u,h){var m=Math.round(a);m=void 0!==this.options.maxZoom&&m>this.options.maxZoom||void 0!==this.options.minZoom&&m<this.options.minZoom?void 0:this._clampZoom(m),(!h||this.options.updateWhenZooming&&m!==this._tileZoom)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==m&&this._update(r),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var u in this._levels)this._setZoomTransform(this._levels[u],r,a)},_setZoomTransform:function(r,a,u){var h=this._map.getZoomScale(u,r.zoom),m=r.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(a,u)).round();Et?ei(r.el,m,h):Ze(r.el,m)},_resetGrid:function(){var r=this._map,a=r.options.crs,u=this._tileSize=this.getTileSize(),h=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],h).x/u.x),Math.ceil(r.project([0,a.wrapLng[1]],h).x/u.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],h).y/u.x),Math.ceil(r.project([a.wrapLat[1],0],h).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,u=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),h=a.getZoomScale(u,this._tileZoom),m=a.project(r,this._tileZoom).floor(),y=a.getSize().divideBy(2*h);return new Se(m.subtract(y),m.add(y))},_update:function(r){var a=this._map;if(a){var u=this._clampZoom(a.getZoom());if(void 0===r&&(r=a.getCenter()),void 0!==this._tileZoom){var h=this._getTiledPixelBounds(r),m=this._pxBoundsToTileRange(h),y=m.getCenter(),b=[],T=this.options.keepBuffer,x=new Se(m.getBottomLeft().subtract([T,-T]),m.getTopRight().add([T,-T]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var k in this._tiles){var z=this._tiles[k].coords;(z.z!==this._tileZoom||!x.contains(new ee(z.x,z.y)))&&(this._tiles[k].current=!1)}if(Math.abs(u-this._tileZoom)>1)return void this._setView(r,u);for(var $=m.min.y;$<=m.max.y;$++)for(var ie=m.min.x;ie<=m.max.x;ie++){var _n=new ee(ie,$);if(_n.z=this._tileZoom,this._isValidTile(_n)){var yn=this._tiles[this._tileCoordsToKey(_n)];yn?yn.current=!0:b.push(_n)}}if(b.sort(function(je,Rr){return je.distanceTo(y)-Rr.distanceTo(y)}),0!==b.length){this._loading||(this._loading=!0,this.fire("loading"));var vn=document.createDocumentFragment();for(ie=0;ie<b.length;ie++)this._addTile(b[ie],vn);this._level.el.appendChild(vn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var u=this._globalTileRange;if(!a.wrapLng&&(r.x<u.min.x||r.x>u.max.x)||!a.wrapLat&&(r.y<u.min.y||r.y>u.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(r);return Ae(this.options.bounds).overlaps(h)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,u=this.getTileSize(),h=r.scaleBy(u),m=h.add(u);return[a.unproject(h,r.z),a.unproject(m,r.z)]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),u=new ht(a[0],a[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),u=new ee(+a[0],+a[1]);return u.z=+a[2],u},_removeTile:function(r){var a=this._tiles[r];!a||(ke(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){F(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=Z,r.onmousemove=Z,_i&&this.options.opacity<1&&ft(r,this.options.opacity),yr&&!jt&&(r.style.WebkitBackfaceVisibility="hidden")},_addTile:function(r,a){var u=this._getTilePos(r),h=this._tileCoordsToKey(r),m=this.createTile(this._wrapCoords(r),D(this._tileReady,this,r));this._initTile(m),this.createTile.length<2&&ot(D(this._tileReady,this,r,null,m)),Ze(m,u),this._tiles[h]={el:m,coords:r,current:!0},a.appendChild(m),this.fire("tileloadstart",{tile:m,coords:r})},_tileReady:function(r,a,u){a&&this.fire("tileerror",{error:a,tile:u,coords:r});var h=this._tileCoordsToKey(r);(u=this._tiles[h])&&(u.loaded=+new Date,this._map._fadeAnimated?(ft(u.el,0),st(this._fadeFrame),this._fadeFrame=ot(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),a||(F(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),_i||!this._map._fadeAnimated?ot(this._pruneTiles,this):setTimeout(D(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new ee(this._wrapX?V(r.x,this._wrapX):r.x,this._wrapY?V(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new Se(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});var Xi=kr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(r,a){this._url=r,(a=Re(this,a)).detectRetina&&In&&a.maxZoom>0&&(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom++):(a.zoomOffset++,a.maxZoom--),a.minZoom=Math.max(0,a.minZoom)),"string"==typeof a.subdomains&&(a.subdomains=a.subdomains.split("")),yr||this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&void 0===a&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var u=document.createElement("img");return he(u,"load",D(this._tileOnLoad,this,a,u)),he(u,"error",D(this._tileOnError,this,a,u)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(u.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),u.alt="",u.setAttribute("role","presentation"),u.src=this.getTileUrl(r),u},getTileUrl:function(r){var a={r:In?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=u),a["-y"]=u}return dr(this._url,f(a,this.options))},_tileOnLoad:function(r,a){_i?setTimeout(D(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,u){var h=this.options.errorTileUrl;h&&a.getAttribute("src")!==h&&(a.src=h),r(u,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom;return this.options.zoomReverse&&(r=this.options.maxZoom-r),r+this.options.zoomOffset},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)this._tiles[r].coords.z!==this._tileZoom&&((a=this._tiles[r].el).onload=Z,a.onerror=Z,a.complete||(a.src=hr,ke(a),delete this._tiles[r]))},_removeTile:function(r){var a=this._tiles[r];if(a)return Vl||a.el.setAttribute("src",hr),kr.prototype._removeTile.call(this,r)},_tileReady:function(r,a,u){if(this._map&&(!u||u.getAttribute("src")!==hr))return kr.prototype._tileReady.call(this,r,a,u)}});function au(r,a){return new Xi(r,a)}var lu=Xi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var u=f({},this.defaultWmsParams);for(var h in a)h in this.options||(u[h]=a[h]);var m=(a=Re(this,a)).detectRetina&&In?2:1,y=this.getTileSize();u.width=y.x*m,u.height=y.y*m,this.wmsParams=u},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,Xi.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),u=this._crs,h=St(u.project(a[0]),u.project(a[1])),m=h.min,y=h.max,b=(this._wmsVersion>=1.3&&this._crs===Pr?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),T=Xi.prototype.getTileUrl.call(this,r);return T+Vs(this.wmsParams,T,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+b},setParams:function(r,a){return f(this.wmsParams,r),a||this.redraw(),this}});Xi.WMS=lu,au.wms=function hh(r,a){return new lu(r,a)};var $t=pt.extend({options:{padding:.1,tolerance:0},initialize:function(r){Re(this,r),A(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&F(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var u=this._map.getZoomScale(a,this._zoom),h=ti(this._container),m=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,a),T=this._map.project(r,a).subtract(y),x=m.multiplyBy(-u).add(h).add(m).subtract(T);Et?ei(this._container,x,u):Ze(this._container,x)},_reset:function(){for(var r in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),u=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new Se(u,u.add(a.multiplyBy(1+2*r)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ar=$t.extend({getEvents:function(){var r=$t.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$t.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");he(r,"mousemove",this._onMouseMove,this),he(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(r,"mouseout",this._handleMouseOut,this),this._ctx=r.getContext("2d")},_destroyContainer:function(){st(this._redrawRequest),delete this._ctx,ke(this._container),X(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var a in this._redrawBounds=null,this._layers)this._layers[a]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){$t.prototype._update.call(this);var r=this._bounds,a=this._container,u=r.getSize(),h=In?2:1;Ze(a,r.min),a.width=h*u.x,a.height=h*u.y,a.style.width=u.x+"px",a.style.height=u.y+"px",In&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){$t.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[A(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,u=a.next,h=a.prev;u?u.prev=h:this._drawLast=h,h?h.next=u:this._drawFirst=u,delete r._order,delete this._layers[A(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if("string"==typeof r.options.dashArray){var h,m,a=r.options.dashArray.split(/[, ]+/),u=[];for(m=0;m<a.length;m++){if(h=Number(a[m]),isNaN(h))return;u.push(h)}r.options._dashArray=u}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){!this._map||(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||ot(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Se,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var u=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)r=h.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var u,h,m,y,b=r._parts,T=b.length,x=this._ctx;if(T){for(x.beginPath(),u=0;u<T;u++){for(h=0,m=b[u].length;h<m;h++)x[h?"lineTo":"moveTo"]((y=b[u][h]).x,y.y);a&&x.closePath()}this._fillStroke(x,r)}}},_updateCircle:function(r){if(this._drawing&&!r._empty()){var a=r._point,u=this._ctx,h=Math.max(Math.round(r._radius),1),m=(Math.max(Math.round(r._radiusY),1)||h)/h;1!==m&&(u.save(),u.scale(1,m)),u.beginPath(),u.arc(a.x,a.y/m,h,0,2*Math.PI,!1),1!==m&&u.restore(),this._fillStroke(u,r)}},_fillStroke:function(r,a){var u=a.options;u.fill&&(r.globalAlpha=u.fillOpacity,r.fillStyle=u.fillColor||u.color,r.fill(u.fillRule||"evenodd")),u.stroke&&0!==u.weight&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=u.opacity,r.lineWidth=u.weight,r.strokeStyle=u.color,r.lineCap=u.lineCap,r.lineJoin=u.lineJoin,r.stroke())},_onClick:function(r){for(var u,h,a=this._map.mouseEventToLayerPoint(r),m=this._drawFirst;m;m=m.next)(u=m.layer).options.interactive&&u._containsPoint(a)&&("click"!==r.type&&"preclick"===r.type||!this._map._draggableMoved(u))&&(h=u);h&&(Lr(r),this._fireEvent([h],r))},_onMouseMove:function(r){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var u,h,m=this._drawFirst;m;m=m.next)(u=m.layer).options.interactive&&u._containsPoint(a)&&(h=u);h!==this._hoveredLayer&&(this._handleMouseOut(r),h&&(F(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseover"),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],r),this._mouseHoverThrottled=!0,setTimeout(D(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,u){this._map._fireDOMEvent(a,u||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var u=a.next,h=a.prev;if(!u)return;u.prev=h,h?h.next=u:u&&(this._drawFirst=u),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var u=a.next,h=a.prev;if(!h)return;h.next=u,u?u.prev=h:h&&(this._drawLast=h),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function uu(r){return Js?new Ar(r):null}var Nr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch(r){return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),fh={_initContainer:function(){this._container=G("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($t.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Nr("shape");F(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Nr("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[A(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;ke(a),r.removeInteractiveTarget(a),delete this._layers[A(r)]},_updateStyle:function(r){var a=r._stroke,u=r._fill,h=r.options,m=r._container;m.stroked=!!h.stroke,m.filled=!!h.fill,h.stroke?(a||(a=r._stroke=Nr("stroke")),m.appendChild(a),a.weight=h.weight+"px",a.color=h.color,a.opacity=h.opacity,a.dashStyle=h.dashArray?rt(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):"",a.endcap=h.lineCap.replace("butt","flat"),a.joinstyle=h.lineJoin):a&&(m.removeChild(a),r._stroke=null),h.fill?(u||(u=r._fill=Nr("fill")),m.appendChild(u),u.color=h.fillColor||h.color,u.opacity=h.fillOpacity):u&&(m.removeChild(u),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),u=Math.round(r._radius),h=Math.round(r._radiusY||u);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+u+","+h+" 0,23592600")},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){kn(r._container)},_bringToBack:function(r){Di(r._container)}},sn=wr?Nr:Bl,er=$t.extend({getEvents:function(){var r=$t.prototype.getEvents.call(this);return r.zoomstart=this._onZoomStart,r},_initContainer:function(){this._container=sn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ke(this._container),X(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){$t.prototype._update.call(this);var r=this._bounds,a=r.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,u.setAttribute("width",a.x),u.setAttribute("height",a.y)),Ze(u,r.min),u.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=sn("path");r.options.className&&F(a,r.options.className),r.options.interactive&&F(a,"leaflet-interactive"),this._updateStyle(r),this._layers[A(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){ke(r._path),r.removeInteractiveTarget(r._path),delete this._layers[A(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,u=r.options;!a||(u.stroke?(a.setAttribute("stroke",u.color),a.setAttribute("stroke-opacity",u.opacity),a.setAttribute("stroke-width",u.weight),a.setAttribute("stroke-linecap",u.lineCap),a.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?a.setAttribute("stroke-dasharray",u.dashArray):a.removeAttribute("stroke-dasharray"),u.dashOffset?a.setAttribute("stroke-dashoffset",u.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),u.fill?(a.setAttribute("fill",u.fillColor||u.color),a.setAttribute("fill-opacity",u.fillOpacity),a.setAttribute("fill-rule",u.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,To(r._parts,a))},_updateCircle:function(r){var a=r._point,u=Math.max(Math.round(r._radius),1),m="a"+u+","+(Math.max(Math.round(r._radiusY),1)||u)+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(a.x-u)+","+a.y+m+2*u+",0 "+m+2*-u+",0 ";this._setPath(r,y)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){kn(r._path)},_bringToBack:function(r){Di(r._path)}});function tr(r){return Fi||wr?new er(r):null}wr&&er.include(fh),ae.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if("overlayPane"===r||void 0===r)return!1;var a=this._paneRenderers[r];return void 0===a&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&uu(r)||tr(r)}});var Go=Rn.extend({initialize:function(r,a){Rn.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return[(r=Ae(r)).getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});er.create=sn,er.pointsToPath=To,He.geometryToLayer=oi,He.coordsToLatLng=Ct,He.coordsToLatLngs=Le,He.latLngToCoords=Zo,He.latLngsToCoords=Ir,He.getFeature=dt,He.asFeature=_t,ae.mergeOptions({boxZoom:!0});var Da=ce.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){X(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||1!==r.which&&1!==r.button)return!1;this._clearDeferredResetState(),this._resetState(),An(),ra(),this._startPoint=this._map.mouseEventToContainerPoint(r),he(document,{contextmenu:fn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=G("div","leaflet-zoom-box",this._container),F(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new Se(this._point,this._startPoint),u=a.getSize();Ze(this._box,a.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ke(this._box),Fe(this._container,"leaflet-crosshair")),Xe(),Zt(),X(document,{contextmenu:fn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if((1===r.which||1===r.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(D(this._resetState,this),0);var a=new ht(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){27===r.keyCode&&this._finish()}});ae.addInitHook("addHandler","boxZoom",Da),ae.mergeOptions({doubleClickZoom:!0});var $o=ce.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,u=a.getZoom(),h=a.options.zoomDelta,m=r.originalEvent.shiftKey?u-h:u+h;"center"===a.options.doubleClickZoom?a.setZoom(m):a.setZoomAround(r.containerPoint,m)}});ae.addInitHook("addHandler","doubleClickZoom",$o),ae.mergeOptions({dragging:!0,inertia:!jt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Wo=ce.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new nn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}F(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Fe(this._map._container,"leaflet-grab"),Fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ae(this._map.options.maxBounds);this._offsetLimit=St(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),u=this._initialWorldOffset,h=this._draggable._newPos.x,m=(h-a+u)%r+a-u,y=(h+a+u)%r-a-u,b=Math.abs(m+u)<Math.abs(y+u)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=b},_onDragEnd:function(r){var a=this._map,u=a.options,h=!u.inertia||this._times.length<2;if(a.fire("dragend",r),h)a.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),b=u.easeLinearity,T=m.multiplyBy(b/((this._lastTime-this._times[0])/1e3)),x=T.distanceTo([0,0]),k=Math.min(u.inertiaMaxSpeed,x),z=T.multiplyBy(k/x),$=k/(u.inertiaDeceleration*b),ie=z.multiplyBy(-$/2).round();ie.x||ie.y?(ie=a._limitOffset(ie,a.options.maxBounds),ot(function(){a.panBy(ie,{duration:$,easeLinearity:b,noMoveStart:!0,animate:!0})})):a.fire("moveend")}}});ae.addInitHook("addHandler","dragging",Wo),ae.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wa=ce.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),he(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),X(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,u=r.scrollTop||a.scrollTop,h=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(h,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var h,m,a=this._panKeys={},u=this.keyCodes;for(h=0,m=u.left.length;h<m;h++)a[u.left[h]]=[-1*r,0];for(h=0,m=u.right.length;h<m;h++)a[u.right[h]]=[r,0];for(h=0,m=u.down.length;h<m;h++)a[u.down[h]]=[0,r];for(h=0,m=u.up.length;h<m;h++)a[u.up[h]]=[0,-1*r]},_setZoomDelta:function(r){var h,m,a=this._zoomKeys={},u=this.keyCodes;for(h=0,m=u.zoomIn.length;h<m;h++)a[u.zoomIn[h]]=r;for(h=0,m=u.zoomOut.length;h<m;h++)a[u.zoomOut[h]]=-r},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){X(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var h,a=r.keyCode,u=this._map;if(a in this._panKeys)(!u._panAnim||!u._panAnim._inProgress)&&(h=this._panKeys[a],r.shiftKey&&(h=ge(h).multiplyBy(3)),u.panBy(h),u.options.maxBounds&&u.panInsideBounds(u.options.maxBounds));else if(a in this._zoomKeys)u.setZoom(u.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else{if(27!==a||!u._popup||!u._popup.options.closeOnEscapeKey)return;u.closePopup()}fn(r)}}});ae.addInitHook("addHandler","keyboard",wa),ae.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Or=ce.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){X(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Zi(r),u=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var h=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(D(this._performZoom,this),h),fn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),u=this._map.options.zoomSnap||0;r._stop();var m=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,y=u?Math.ceil(m/u)*u:m,b=r._limitZoom(a+(this._delta>0?y:-y))-a;this._delta=0,this._startTime=null,b&&("center"===r.options.scrollWheelZoom?r.setZoom(a+b):r.setZoomAround(this._lastMousePos,a+b))}});ae.addInitHook("addHandler","scrollWheelZoom",Or),ae.mergeOptions({tap:!0,tapTolerance:15});var Ea=ce.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){X(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(r.touches){if(bt(r),this._fireClick=!0,r.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var a=r.touches[0],u=a.target;this._startPos=this._newPos=new ee(a.clientX,a.clientY),u.tagName&&"a"===u.tagName.toLowerCase()&&F(u,"leaflet-active"),this._holdTimeout=setTimeout(D(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",a))},this),1e3),this._simulateEvent("mousedown",a),he(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(r){if(clearTimeout(this._holdTimeout),X(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&r&&r.changedTouches){var a=r.changedTouches[0],u=a.target;u&&u.tagName&&"a"===u.tagName.toLowerCase()&&Fe(u,"leaflet-active"),this._simulateEvent("mouseup",a),this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(r){var a=r.touches[0];this._newPos=new ee(a.clientX,a.clientY),this._simulateEvent("mousemove",a)},_simulateEvent:function(r,a){var u=document.createEvent("MouseEvents");u._simulated=!0,a.target._simulatedClick=!0,u.initMouseEvent(r,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(u)}});Ut&&(!zt||So)&&ae.addInitHook("addHandler","tap",Ea),ae.mergeOptions({touchZoom:Ut&&!jt,bounceAtZoomLimits:!0});var Lt=ce.extend({addHooks:function(){F(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),X(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(r.touches&&2===r.touches.length&&!a._animatingZoom&&!this._zooming){var u=a.mouseEventToContainerPoint(r.touches[0]),h=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),"center"!==a.options.touchZoom&&(this._pinchStartLatLng=a.containerPointToLatLng(u.add(h)._divideBy(2))),this._startDist=u.distanceTo(h),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend",this._onTouchEnd,this),bt(r)}},_onTouchMove:function(r){if(r.touches&&2===r.touches.length&&this._zooming){var a=this._map,u=a.mouseEventToContainerPoint(r.touches[0]),h=a.mouseEventToContainerPoint(r.touches[1]),m=u.distanceTo(h)/this._startDist;if(this._zoom=a.getScaleZoom(m,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&m<1||this._zoom>a.getMaxZoom()&&m>1)&&(this._zoom=a._limitZoom(this._zoom)),"center"===a.options.touchZoom){if(this._center=this._startLatLng,1===m)return}else{var y=u._add(h)._divideBy(2)._subtract(this._centerPoint);if(1===m&&0===y.x&&0===y.y)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),st(this._animRequest);var b=D(a._move,a,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=ot(b,this,!0),bt(r)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,st(this._animRequest),X(document,"touchmove",this._onTouchMove,this),X(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});ae.addInitHook("addHandler","touchZoom",Lt),ae.BoxZoom=Da,ae.DoubleClickZoom=$o,ae.Drag=Wo,ae.Keyboard=wa,ae.ScrollWheelZoom=Or,ae.Tap=Ea,ae.TouchZoom=Lt,P.version="1.7.1",P.Control=en,P.control=kt,P.Browser=Sn,P.Evented=gi,P.Mixin=sh,P.Util=js,P.Class=Pn,P.Handler=ce,P.extend=f,P.bind=D,P.stamp=A,P.setOptions=Re,P.DomEvent=jo,P.DomUtil=Ql,P.PosAnimation=ha,P.Draggable=nn,P.LineUtil=Nt,P.PolyUtil=at,P.Point=ee,P.point=ge,P.Bounds=Se,P.bounds=St,P.Transformation=Gs,P.transformation=_r,P.Projection=Ot,P.LatLng=ye,P.latLng=xe,P.LatLngBounds=ht,P.latLngBounds=Ae,P.CRS=Vt,P.GeoJSON=He,P.geoJSON=Ki,P.geoJson=Sr,P.Layer=pt,P.LayerGroup=Rt,P.layerGroup=function(r,a){return new Rt(r,a)},P.FeatureGroup=bi,P.featureGroup=function(r,a){return new bi(r,a)},P.ImageOverlay=yt,P.imageOverlay=function(r,a,u){return new yt(r,a,u)},P.VideoOverlay=ru,P.videoOverlay=function ou(r,a,u){return new ru(r,a,u)},P.SVGOverlay=va,P.svgOverlay=function ah(r,a,u){return new va(r,a,u)},P.DivOverlay=Fn,P.Popup=Ji,P.popup=function(r,a){return new Ji(r,a)},P.Tooltip=Qi,P.tooltip=function(r,a){return new Qi(r,a)},P.Icon=H,P.icon=function ue(r){return new H(r)},P.DivIcon=su,P.divIcon=function ch(r){return new su(r)},P.Marker=on,P.marker=function qe(r,a){return new on(r,a)},P.TileLayer=Xi,P.tileLayer=au,P.GridLayer=kr,P.gridLayer=function dh(r){return new kr(r)},P.SVG=er,P.svg=tr,P.Renderer=$t,P.Canvas=Ar,P.canvas=uu,P.Path=gt,P.CircleMarker=Ne,P.circleMarker=function qi(r,a){return new Ne(r,a)},P.Circle=On,P.circle=function oe(r,a,u){return new On(r,a,u)},P.Polyline=Bt,P.polyline=function Ci(r,a){return new Bt(r,a)},P.Polygon=Rn,P.polygon=function Li(r,a){return new Rn(r,a)},P.Rectangle=Go,P.rectangle=function cu(r,a){return new Go(r,a)},P.Map=ae,P.map=function fa(r,a){return new ae(r,a)};var ba=window.L;P.noConflict=function(){return window.L=ba,this},window.L=P}(q)}},B=>{B(B.s=907)}]);